function bO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Sl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var GC={exports:{}},Xg={},WC={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=Symbol.for("react.element"),AO=Symbol.for("react.portal"),CO=Symbol.for("react.fragment"),RO=Symbol.for("react.strict_mode"),PO=Symbol.for("react.profiler"),LO=Symbol.for("react.provider"),IO=Symbol.for("react.context"),DO=Symbol.for("react.forward_ref"),OO=Symbol.for("react.suspense"),kO=Symbol.for("react.memo"),NO=Symbol.for("react.lazy"),vM=Symbol.iterator;function UO(n){return n===null||typeof n!="object"?null:(n=vM&&n[vM]||n["@@iterator"],typeof n=="function"?n:null)}var $C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jC=Object.assign,XC={};function _u(n,e,t){this.props=n,this.context=e,this.refs=XC,this.updater=t||$C}_u.prototype.isReactComponent={};_u.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};_u.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function YC(){}YC.prototype=_u.prototype;function R1(n,e,t){this.props=n,this.context=e,this.refs=XC,this.updater=t||$C}var P1=R1.prototype=new YC;P1.constructor=R1;jC(P1,_u.prototype);P1.isPureReactComponent=!0;var yM=Array.isArray,qC=Object.prototype.hasOwnProperty,L1={current:null},KC={key:!0,ref:!0,__self:!0,__source:!0};function ZC(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qC.call(e,r)&&!KC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zd,type:n,key:s,ref:o,props:i,_owner:L1.current}}function FO(n,e){return{$$typeof:zd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function I1(n){return typeof n=="object"&&n!==null&&n.$$typeof===zd}function zO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var _M=/\/+/g;function Vv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?zO(""+n.key):e.toString(36)}function Pm(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case zd:case AO:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Vv(o,0):r,yM(i)?(t="",n!=null&&(t=n.replace(_M,"$&/")+"/"),Pm(i,e,t,"",function(u){return u})):i!=null&&(I1(i)&&(i=FO(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_M,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yM(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Vv(s,a);o+=Pm(s,e,t,l,i)}else if(l=UO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Vv(s,a++),o+=Pm(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mp(n,e,t){if(n==null)return n;var r=[],i=0;return Pm(n,r,"","",function(s){return e.call(t,s,i++)}),r}function BO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Cr={current:null},Lm={transition:null},HO={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Lm,ReactCurrentOwner:L1};Ct.Children={map:mp,forEach:function(n,e,t){mp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return mp(n,function(){e++}),e},toArray:function(n){return mp(n,function(e){return e})||[]},only:function(n){if(!I1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ct.Component=_u;Ct.Fragment=CO;Ct.Profiler=PO;Ct.PureComponent=R1;Ct.StrictMode=RO;Ct.Suspense=OO;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HO;Ct.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=jC({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=L1.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)qC.call(e,l)&&!KC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:zd,type:n.type,key:i,ref:s,props:r,_owner:o}};Ct.createContext=function(n){return n={$$typeof:IO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:LO,_context:n},n.Consumer=n};Ct.createElement=ZC;Ct.createFactory=function(n){var e=ZC.bind(null,n);return e.type=n,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(n){return{$$typeof:DO,render:n}};Ct.isValidElement=I1;Ct.lazy=function(n){return{$$typeof:NO,_payload:{_status:-1,_result:n},_init:BO}};Ct.memo=function(n,e){return{$$typeof:kO,type:n,compare:e===void 0?null:e}};Ct.startTransition=function(n){var e=Lm.transition;Lm.transition={};try{n()}finally{Lm.transition=e}};Ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ct.useCallback=function(n,e){return Cr.current.useCallback(n,e)};Ct.useContext=function(n){return Cr.current.useContext(n)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(n){return Cr.current.useDeferredValue(n)};Ct.useEffect=function(n,e){return Cr.current.useEffect(n,e)};Ct.useId=function(){return Cr.current.useId()};Ct.useImperativeHandle=function(n,e,t){return Cr.current.useImperativeHandle(n,e,t)};Ct.useInsertionEffect=function(n,e){return Cr.current.useInsertionEffect(n,e)};Ct.useLayoutEffect=function(n,e){return Cr.current.useLayoutEffect(n,e)};Ct.useMemo=function(n,e){return Cr.current.useMemo(n,e)};Ct.useReducer=function(n,e,t){return Cr.current.useReducer(n,e,t)};Ct.useRef=function(n){return Cr.current.useRef(n)};Ct.useState=function(n){return Cr.current.useState(n)};Ct.useSyncExternalStore=function(n,e,t){return Cr.current.useSyncExternalStore(n,e,t)};Ct.useTransition=function(){return Cr.current.useTransition()};Ct.version="18.2.0";WC.exports=Ct;var D=WC.exports;const $=Sl(D),VO=bO({__proto__:null,default:$},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO=D,WO=Symbol.for("react.element"),$O=Symbol.for("react.fragment"),jO=Object.prototype.hasOwnProperty,XO=GO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YO={key:!0,ref:!0,__self:!0,__source:!0};function JC(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jO.call(e,r)&&!YO.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WO,type:n,key:s,ref:o,props:i,_owner:XO.current}}Xg.Fragment=$O;Xg.jsx=JC;Xg.jsxs=JC;GC.exports=Xg;var cn=GC.exports;var y_={},QC={exports:{}},ai={},e2={exports:{}},t2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,K){var X=F.length;F.push(K);e:for(;0<X;){var oe=X-1>>>1,W=F[oe];if(0<i(W,K))F[oe]=K,F[X]=W,X=oe;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],X=F.pop();if(X!==K){F[0]=X;e:for(var oe=0,W=F.length,he=W>>>1;oe<he;){var le=2*(oe+1)-1,Te=F[le],we=le+1,Re=F[we];if(0>i(Te,X))we<W&&0>i(Re,Te)?(F[oe]=Re,F[we]=X,oe=we):(F[oe]=Te,F[le]=X,oe=le);else if(we<W&&0>i(Re,X))F[oe]=Re,F[we]=X,oe=we;else break e}}return K}function i(F,K){var X=F.sortIndex-K.sortIndex;return X!==0?X:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,m=!1,v=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=F)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function M(F){if(S=!1,w(F),!v)if(t(l)!==null)v=!0,Z(A);else{var K=t(u);K!==null&&ee(M,K.startTime-F)}}function A(F,K){v=!1,S&&(S=!1,g(L),L=-1),m=!0;var X=p;try{for(w(K),h=t(l);h!==null&&(!(h.expirationTime>K)||F&&!k());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,p=h.priorityLevel;var W=oe(h.expirationTime<=K);K=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(l)&&r(l),w(K)}else r(l);h=t(l)}if(h!==null)var he=!0;else{var le=t(u);le!==null&&ee(M,le.startTime-K),he=!1}return he}finally{h=null,p=X,m=!1}}var b=!1,I=null,L=-1,R=5,P=-1;function k(){return!(n.unstable_now()-P<R)}function V(){if(I!==null){var F=n.unstable_now();P=F;var K=!0;try{K=I(!0,F)}finally{K?H():(b=!1,I=null)}}else b=!1}var H;if(typeof x=="function")H=function(){x(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=V,H=function(){q.postMessage(null)}}else H=function(){_(V,0)};function Z(F){I=F,b||(b=!0,H())}function ee(F,K){L=_(function(){F(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Z(A))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var X=p;p=K;try{return F()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=p;p=F;try{return K()}finally{p=X}},n.unstable_scheduleCallback=function(F,K,X){var oe=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?oe+X:oe):X=oe,F){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=X+W,F={id:d++,callback:K,priorityLevel:F,startTime:X,expirationTime:W,sortIndex:-1},X>oe?(F.sortIndex=X,e(u,F),t(l)===null&&F===t(u)&&(S?(g(L),L=-1):S=!0,ee(M,X-oe))):(F.sortIndex=W,e(l,F),v||m||(v=!0,Z(A))),F},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(F){var K=p;return function(){var X=p;p=K;try{return F.apply(this,arguments)}finally{p=X}}}})(t2);e2.exports=t2;var qO=e2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2=D,oi=qO;function Ae(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r2=new Set,nd={};function wl(n,e){Jc(n,e),Jc(n+"Capture",e)}function Jc(n,e){for(nd[n]=e,n=0;n<e.length;n++)r2.add(e[n])}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),__=Object.prototype.hasOwnProperty,KO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xM={},SM={};function ZO(n){return __.call(SM,n)?!0:__.call(xM,n)?!1:KO.test(n)?SM[n]=!0:(xM[n]=!0,!1)}function JO(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function QO(n,e,t,r){if(e===null||typeof e>"u"||JO(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){tr[n]=new Rr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];tr[e]=new Rr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){tr[n]=new Rr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){tr[n]=new Rr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){tr[n]=new Rr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){tr[n]=new Rr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){tr[n]=new Rr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){tr[n]=new Rr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){tr[n]=new Rr(n,5,!1,n.toLowerCase(),null,!1,!1)});var D1=/[\-:]([a-z])/g;function O1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(D1,O1);tr[e]=new Rr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(D1,O1);tr[e]=new Rr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(D1,O1);tr[e]=new Rr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){tr[n]=new Rr(n,1,!1,n.toLowerCase(),null,!1,!1)});tr.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){tr[n]=new Rr(n,1,!1,n.toLowerCase(),null,!0,!0)});function k1(n,e,t,r){var i=tr.hasOwnProperty(e)?tr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QO(e,t,i,r)&&(t=null),r||i===null?ZO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var yo=n2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gp=Symbol.for("react.element"),Ec=Symbol.for("react.portal"),Mc=Symbol.for("react.fragment"),N1=Symbol.for("react.strict_mode"),x_=Symbol.for("react.profiler"),i2=Symbol.for("react.provider"),s2=Symbol.for("react.context"),U1=Symbol.for("react.forward_ref"),S_=Symbol.for("react.suspense"),w_=Symbol.for("react.suspense_list"),F1=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),o2=Symbol.for("react.offscreen"),wM=Symbol.iterator;function nf(n){return n===null||typeof n!="object"?null:(n=wM&&n[wM]||n["@@iterator"],typeof n=="function"?n:null)}var hn=Object.assign,Gv;function Cf(n){if(Gv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gv=e&&e[1]||""}return`
`+Gv+n}var Wv=!1;function $v(n,e){if(!n||Wv)return"";Wv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Cf(n):""}function ek(n){switch(n.tag){case 5:return Cf(n.type);case 16:return Cf("Lazy");case 13:return Cf("Suspense");case 19:return Cf("SuspenseList");case 0:case 2:case 15:return n=$v(n.type,!1),n;case 11:return n=$v(n.type.render,!1),n;case 1:return n=$v(n.type,!0),n;default:return""}}function E_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mc:return"Fragment";case Ec:return"Portal";case x_:return"Profiler";case N1:return"StrictMode";case S_:return"Suspense";case w_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case s2:return(n.displayName||"Context")+".Consumer";case i2:return(n._context.displayName||"Context")+".Provider";case U1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F1:return e=n.displayName||null,e!==null?e:E_(n.type)||"Memo";case Bo:e=n._payload,n=n._init;try{return E_(n(e))}catch{}}return null}function tk(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E_(e);case 8:return e===N1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function la(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function a2(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nk(n){var e=a2(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vp(n){n._valueTracker||(n._valueTracker=nk(n))}function l2(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=a2(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Qm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function M_(n,e){var t=e.checked;return hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function EM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=la(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c2(n,e){e=e.checked,e!=null&&k1(n,"checked",e,!1)}function T_(n,e){c2(n,e);var t=la(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?b_(n,e.type,t):e.hasOwnProperty("defaultValue")&&b_(n,e.type,la(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function MM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function b_(n,e,t){(e!=="number"||Qm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Rf=Array.isArray;function Hc(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+la(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function A_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return hn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function TM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ae(92));if(Rf(t)){if(1<t.length)throw Error(Ae(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:la(t)}}function u2(n,e){var t=la(e.value),r=la(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function bM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function f2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?f2(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yp,d2=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yp=yp||document.createElement("div"),yp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function rd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var kf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rk=["Webkit","ms","Moz","O"];Object.keys(kf).forEach(function(n){rk.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),kf[e]=kf[n]})});function h2(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||kf.hasOwnProperty(n)&&kf[n]?(""+e).trim():e+"px"}function p2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=h2(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var ik=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R_(n,e){if(e){if(ik[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function P_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L_=null;function z1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var I_=null,Vc=null,Gc=null;function AM(n){if(n=Vd(n)){if(typeof I_!="function")throw Error(Ae(280));var e=n.stateNode;e&&(e=Jg(e),I_(n.stateNode,n.type,e))}}function m2(n){Vc?Gc?Gc.push(n):Gc=[n]:Vc=n}function g2(){if(Vc){var n=Vc,e=Gc;if(Gc=Vc=null,AM(n),e)for(n=0;n<e.length;n++)AM(e[n])}}function v2(n,e){return n(e)}function y2(){}var jv=!1;function _2(n,e,t){if(jv)return n(e,t);jv=!0;try{return v2(n,e,t)}finally{jv=!1,(Vc!==null||Gc!==null)&&(y2(),g2())}}function id(n,e){var t=n.stateNode;if(t===null)return null;var r=Jg(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ae(231,e,typeof t));return t}var D_=!1;if(co)try{var rf={};Object.defineProperty(rf,"passive",{get:function(){D_=!0}}),window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{D_=!1}function sk(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Nf=!1,eg=null,tg=!1,O_=null,ok={onError:function(n){Nf=!0,eg=n}};function ak(n,e,t,r,i,s,o,a,l){Nf=!1,eg=null,sk.apply(ok,arguments)}function lk(n,e,t,r,i,s,o,a,l){if(ak.apply(this,arguments),Nf){if(Nf){var u=eg;Nf=!1,eg=null}else throw Error(Ae(198));tg||(tg=!0,O_=u)}}function El(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function x2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function CM(n){if(El(n)!==n)throw Error(Ae(188))}function ck(n){var e=n.alternate;if(!e){if(e=El(n),e===null)throw Error(Ae(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return CM(i),n;if(s===r)return CM(i),e;s=s.sibling}throw Error(Ae(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(t.alternate!==r)throw Error(Ae(190))}if(t.tag!==3)throw Error(Ae(188));return t.stateNode.current===t?n:e}function S2(n){return n=ck(n),n!==null?w2(n):null}function w2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=w2(n);if(e!==null)return e;n=n.sibling}return null}var E2=oi.unstable_scheduleCallback,RM=oi.unstable_cancelCallback,uk=oi.unstable_shouldYield,fk=oi.unstable_requestPaint,Cn=oi.unstable_now,dk=oi.unstable_getCurrentPriorityLevel,B1=oi.unstable_ImmediatePriority,M2=oi.unstable_UserBlockingPriority,ng=oi.unstable_NormalPriority,hk=oi.unstable_LowPriority,T2=oi.unstable_IdlePriority,Yg=null,Ss=null;function pk(n){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Yg,n,void 0,(n.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:vk,mk=Math.log,gk=Math.LN2;function vk(n){return n>>>=0,n===0?32:31-(mk(n)/gk|0)|0}var _p=64,xp=4194304;function Pf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function rg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Pf(a):(s&=o,s!==0&&(r=Pf(s)))}else o=t&~i,o!==0?r=Pf(o):s!==0&&(r=Pf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ji(e),i=1<<t,r|=n[t],e&=~i;return r}function yk(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _k(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ji(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=yk(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function k_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function b2(){var n=_p;return _p<<=1,!(_p&4194240)&&(_p=64),n}function Xv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Bd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ji(e),n[e]=t}function xk(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ji(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function H1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ji(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var zt=0;function A2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var C2,V1,R2,P2,L2,N_=!1,Sp=[],Ko=null,Zo=null,Jo=null,sd=new Map,od=new Map,Wo=[],Sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PM(n,e){switch(n){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":sd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":od.delete(e.pointerId)}}function sf(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vd(e),e!==null&&V1(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function wk(n,e,t,r,i){switch(e){case"focusin":return Ko=sf(Ko,n,e,t,r,i),!0;case"dragenter":return Zo=sf(Zo,n,e,t,r,i),!0;case"mouseover":return Jo=sf(Jo,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return sd.set(s,sf(sd.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,od.set(s,sf(od.get(s)||null,n,e,t,r,i)),!0}return!1}function I2(n){var e=ja(n.target);if(e!==null){var t=El(e);if(t!==null){if(e=t.tag,e===13){if(e=x2(t),e!==null){n.blockedOn=e,L2(n.priority,function(){R2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Im(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=U_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);L_=r,t.target.dispatchEvent(r),L_=null}else return e=Vd(t),e!==null&&V1(e),n.blockedOn=t,!1;e.shift()}return!0}function LM(n,e,t){Im(n)&&t.delete(e)}function Ek(){N_=!1,Ko!==null&&Im(Ko)&&(Ko=null),Zo!==null&&Im(Zo)&&(Zo=null),Jo!==null&&Im(Jo)&&(Jo=null),sd.forEach(LM),od.forEach(LM)}function of(n,e){n.blockedOn===e&&(n.blockedOn=null,N_||(N_=!0,oi.unstable_scheduleCallback(oi.unstable_NormalPriority,Ek)))}function ad(n){function e(i){return of(i,n)}if(0<Sp.length){of(Sp[0],n);for(var t=1;t<Sp.length;t++){var r=Sp[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ko!==null&&of(Ko,n),Zo!==null&&of(Zo,n),Jo!==null&&of(Jo,n),sd.forEach(e),od.forEach(e),t=0;t<Wo.length;t++)r=Wo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Wo.length&&(t=Wo[0],t.blockedOn===null);)I2(t),t.blockedOn===null&&Wo.shift()}var Wc=yo.ReactCurrentBatchConfig,ig=!0;function Mk(n,e,t,r){var i=zt,s=Wc.transition;Wc.transition=null;try{zt=1,G1(n,e,t,r)}finally{zt=i,Wc.transition=s}}function Tk(n,e,t,r){var i=zt,s=Wc.transition;Wc.transition=null;try{zt=4,G1(n,e,t,r)}finally{zt=i,Wc.transition=s}}function G1(n,e,t,r){if(ig){var i=U_(n,e,t,r);if(i===null)ry(n,e,r,sg,t),PM(n,r);else if(wk(i,n,e,t,r))r.stopPropagation();else if(PM(n,r),e&4&&-1<Sk.indexOf(n)){for(;i!==null;){var s=Vd(i);if(s!==null&&C2(s),s=U_(n,e,t,r),s===null&&ry(n,e,r,sg,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else ry(n,e,r,null,t)}}var sg=null;function U_(n,e,t,r){if(sg=null,n=z1(r),n=ja(n),n!==null)if(e=El(n),e===null)n=null;else if(t=e.tag,t===13){if(n=x2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return sg=n,null}function D2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dk()){case B1:return 1;case M2:return 4;case ng:case hk:return 16;case T2:return 536870912;default:return 16}default:return 16}}var jo=null,W1=null,Dm=null;function O2(){if(Dm)return Dm;var n,e=W1,t=e.length,r,i="value"in jo?jo.value:jo.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Dm=i.slice(n,1<r?1-r:void 0)}function Om(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function wp(){return!0}function IM(){return!1}function li(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wp:IM,this.isPropagationStopped=IM,this}return hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=wp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=wp)},persist:function(){},isPersistent:wp}),e}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$1=li(xu),Hd=hn({},xu,{view:0,detail:0}),bk=li(Hd),Yv,qv,af,qg=hn({},Hd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==af&&(af&&n.type==="mousemove"?(Yv=n.screenX-af.screenX,qv=n.screenY-af.screenY):qv=Yv=0,af=n),Yv)},movementY:function(n){return"movementY"in n?n.movementY:qv}}),DM=li(qg),Ak=hn({},qg,{dataTransfer:0}),Ck=li(Ak),Rk=hn({},Hd,{relatedTarget:0}),Kv=li(Rk),Pk=hn({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),Lk=li(Pk),Ik=hn({},xu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dk=li(Ik),Ok=hn({},xu,{data:0}),OM=li(Ok),kk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Uk[n])?!!e[n]:!1}function j1(){return Fk}var zk=hn({},Hd,{key:function(n){if(n.key){var e=kk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Om(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Nk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j1,charCode:function(n){return n.type==="keypress"?Om(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Om(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bk=li(zk),Hk=hn({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kM=li(Hk),Vk=hn({},Hd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j1}),Gk=li(Vk),Wk=hn({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),$k=li(Wk),jk=hn({},qg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xk=li(jk),Yk=[9,13,27,32],X1=co&&"CompositionEvent"in window,Uf=null;co&&"documentMode"in document&&(Uf=document.documentMode);var qk=co&&"TextEvent"in window&&!Uf,k2=co&&(!X1||Uf&&8<Uf&&11>=Uf),NM=String.fromCharCode(32),UM=!1;function N2(n,e){switch(n){case"keyup":return Yk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tc=!1;function Kk(n,e){switch(n){case"compositionend":return U2(e);case"keypress":return e.which!==32?null:(UM=!0,NM);case"textInput":return n=e.data,n===NM&&UM?null:n;default:return null}}function Zk(n,e){if(Tc)return n==="compositionend"||!X1&&N2(n,e)?(n=O2(),Dm=W1=jo=null,Tc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k2&&e.locale!=="ko"?null:e.data;default:return null}}var Jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Jk[n.type]:e==="textarea"}function F2(n,e,t,r){m2(r),e=og(e,"onChange"),0<e.length&&(t=new $1("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Ff=null,ld=null;function Qk(n){q2(n,0)}function Kg(n){var e=Cc(n);if(l2(e))return n}function eN(n,e){if(n==="change")return e}var z2=!1;if(co){var Zv;if(co){var Jv="oninput"in document;if(!Jv){var zM=document.createElement("div");zM.setAttribute("oninput","return;"),Jv=typeof zM.oninput=="function"}Zv=Jv}else Zv=!1;z2=Zv&&(!document.documentMode||9<document.documentMode)}function BM(){Ff&&(Ff.detachEvent("onpropertychange",B2),ld=Ff=null)}function B2(n){if(n.propertyName==="value"&&Kg(ld)){var e=[];F2(e,ld,n,z1(n)),_2(Qk,e)}}function tN(n,e,t){n==="focusin"?(BM(),Ff=e,ld=t,Ff.attachEvent("onpropertychange",B2)):n==="focusout"&&BM()}function nN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kg(ld)}function rN(n,e){if(n==="click")return Kg(e)}function iN(n,e){if(n==="input"||n==="change")return Kg(e)}function sN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ki=typeof Object.is=="function"?Object.is:sN;function cd(n,e){if(Ki(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!__.call(e,i)||!Ki(n[i],e[i]))return!1}return!0}function HM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function VM(n,e){var t=HM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=HM(t)}}function H2(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?H2(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function V2(){for(var n=window,e=Qm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Qm(n.document)}return e}function Y1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function oN(n){var e=V2(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&H2(t.ownerDocument.documentElement,t)){if(r!==null&&Y1(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=VM(t,s);var o=VM(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var aN=co&&"documentMode"in document&&11>=document.documentMode,bc=null,F_=null,zf=null,z_=!1;function GM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;z_||bc==null||bc!==Qm(r)||(r=bc,"selectionStart"in r&&Y1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zf&&cd(zf,r)||(zf=r,r=og(F_,"onSelect"),0<r.length&&(e=new $1("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=bc)))}function Ep(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ac={animationend:Ep("Animation","AnimationEnd"),animationiteration:Ep("Animation","AnimationIteration"),animationstart:Ep("Animation","AnimationStart"),transitionend:Ep("Transition","TransitionEnd")},Qv={},G2={};co&&(G2=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function Zg(n){if(Qv[n])return Qv[n];if(!Ac[n])return n;var e=Ac[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in G2)return Qv[n]=e[t];return n}var W2=Zg("animationend"),$2=Zg("animationiteration"),j2=Zg("animationstart"),X2=Zg("transitionend"),Y2=new Map,WM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(n,e){Y2.set(n,e),wl(e,[n])}for(var ey=0;ey<WM.length;ey++){var ty=WM[ey],lN=ty.toLowerCase(),cN=ty[0].toUpperCase()+ty.slice(1);ga(lN,"on"+cN)}ga(W2,"onAnimationEnd");ga($2,"onAnimationIteration");ga(j2,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(X2,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lf));function $M(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,lk(r,e,void 0,n),n.currentTarget=null}function q2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$M(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$M(i,a,u),s=l}}}if(tg)throw n=O_,tg=!1,O_=null,n}function Zt(n,e){var t=e[W_];t===void 0&&(t=e[W_]=new Set);var r=n+"__bubble";t.has(r)||(K2(e,n,2,!1),t.add(r))}function ny(n,e,t){var r=0;e&&(r|=4),K2(t,n,r,e)}var Mp="_reactListening"+Math.random().toString(36).slice(2);function ud(n){if(!n[Mp]){n[Mp]=!0,r2.forEach(function(t){t!=="selectionchange"&&(uN.has(t)||ny(t,!1,n),ny(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Mp]||(e[Mp]=!0,ny("selectionchange",!1,e))}}function K2(n,e,t,r){switch(D2(e)){case 1:var i=Mk;break;case 4:i=Tk;break;default:i=G1}t=i.bind(null,e,t,n),i=void 0,!D_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function ry(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ja(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_2(function(){var u=s,d=z1(t),h=[];e:{var p=Y2.get(n);if(p!==void 0){var m=$1,v=n;switch(n){case"keypress":if(Om(t)===0)break e;case"keydown":case"keyup":m=Bk;break;case"focusin":v="focus",m=Kv;break;case"focusout":v="blur",m=Kv;break;case"beforeblur":case"afterblur":m=Kv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=DM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gk;break;case W2:case $2:case j2:m=Lk;break;case X2:m=$k;break;case"scroll":m=bk;break;case"wheel":m=Xk;break;case"copy":case"cut":case"paste":m=Dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kM}var S=(e&4)!==0,_=!S&&n==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var x=u,w;x!==null;){w=x;var M=w.stateNode;if(w.tag===5&&M!==null&&(w=M,g!==null&&(M=id(x,g),M!=null&&S.push(fd(x,M,w)))),_)break;x=x.return}0<S.length&&(p=new m(p,v,null,t,d),h.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==L_&&(v=t.relatedTarget||t.fromElement)&&(ja(v)||v[uo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?ja(v):null,v!==null&&(_=El(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(S=DM,M="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(S=kM,M="onPointerLeave",g="onPointerEnter",x="pointer"),_=m==null?p:Cc(m),w=v==null?p:Cc(v),p=new S(M,x+"leave",m,t,d),p.target=_,p.relatedTarget=w,M=null,ja(d)===u&&(S=new S(g,x+"enter",v,t,d),S.target=w,S.relatedTarget=_,M=S),_=M,m&&v)t:{for(S=m,g=v,x=0,w=S;w;w=$l(w))x++;for(w=0,M=g;M;M=$l(M))w++;for(;0<x-w;)S=$l(S),x--;for(;0<w-x;)g=$l(g),w--;for(;x--;){if(S===g||g!==null&&S===g.alternate)break t;S=$l(S),g=$l(g)}S=null}else S=null;m!==null&&jM(h,p,m,S,!1),v!==null&&_!==null&&jM(h,_,v,S,!0)}}e:{if(p=u?Cc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=eN;else if(FM(p))if(z2)A=iN;else{A=nN;var b=tN}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=rN);if(A&&(A=A(n,u))){F2(h,A,t,d);break e}b&&b(n,p,u),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&b_(p,"number",p.value)}switch(b=u?Cc(u):window,n){case"focusin":(FM(b)||b.contentEditable==="true")&&(bc=b,F_=u,zf=null);break;case"focusout":zf=F_=bc=null;break;case"mousedown":z_=!0;break;case"contextmenu":case"mouseup":case"dragend":z_=!1,GM(h,t,d);break;case"selectionchange":if(aN)break;case"keydown":case"keyup":GM(h,t,d)}var I;if(X1)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Tc?N2(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(k2&&t.locale!=="ko"&&(Tc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Tc&&(I=O2()):(jo=d,W1="value"in jo?jo.value:jo.textContent,Tc=!0)),b=og(u,L),0<b.length&&(L=new OM(L,n,null,t,d),h.push({event:L,listeners:b}),I?L.data=I:(I=U2(t),I!==null&&(L.data=I)))),(I=qk?Kk(n,t):Zk(n,t))&&(u=og(u,"onBeforeInput"),0<u.length&&(d=new OM("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=I))}q2(h,e)})}function fd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function og(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=id(n,t),s!=null&&r.unshift(fd(n,s,i)),s=id(n,e),s!=null&&r.push(fd(n,s,i))),n=n.return}return r}function $l(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=id(t,s),l!=null&&o.unshift(fd(t,l,a))):i||(l=id(t,s),l!=null&&o.push(fd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var fN=/\r\n?/g,dN=/\u0000|\uFFFD/g;function XM(n){return(typeof n=="string"?n:""+n).replace(fN,`
`).replace(dN,"")}function Tp(n,e,t){if(e=XM(e),XM(n)!==e&&t)throw Error(Ae(425))}function ag(){}var B_=null,H_=null;function V_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G_=typeof setTimeout=="function"?setTimeout:void 0,hN=typeof clearTimeout=="function"?clearTimeout:void 0,YM=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof YM<"u"?function(n){return YM.resolve(null).then(n).catch(mN)}:G_;function mN(n){setTimeout(function(){throw n})}function iy(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ad(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ad(e)}function Qo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Su=Math.random().toString(36).slice(2),gs="__reactFiber$"+Su,dd="__reactProps$"+Su,uo="__reactContainer$"+Su,W_="__reactEvents$"+Su,gN="__reactListeners$"+Su,vN="__reactHandles$"+Su;function ja(n){var e=n[gs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[uo]||t[gs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qM(n);n!==null;){if(t=n[gs])return t;n=qM(n)}return e}n=t,t=n.parentNode}return null}function Vd(n){return n=n[gs]||n[uo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ae(33))}function Jg(n){return n[dd]||null}var $_=[],Rc=-1;function va(n){return{current:n}}function en(n){0>Rc||(n.current=$_[Rc],$_[Rc]=null,Rc--)}function Xt(n,e){Rc++,$_[Rc]=n.current,n.current=e}var ca={},mr=va(ca),Hr=va(!1),cl=ca;function Qc(n,e){var t=n.type.contextTypes;if(!t)return ca;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Vr(n){return n=n.childContextTypes,n!=null}function lg(){en(Hr),en(mr)}function KM(n,e,t){if(mr.current!==ca)throw Error(Ae(168));Xt(mr,e),Xt(Hr,t)}function Z2(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,tk(n)||"Unknown",i));return hn({},t,r)}function cg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ca,cl=mr.current,Xt(mr,n),Xt(Hr,Hr.current),!0}function ZM(n,e,t){var r=n.stateNode;if(!r)throw Error(Ae(169));t?(n=Z2(n,e,cl),r.__reactInternalMemoizedMergedChildContext=n,en(Hr),en(mr),Xt(mr,n)):en(Hr),Xt(Hr,t)}var Xs=null,Qg=!1,sy=!1;function J2(n){Xs===null?Xs=[n]:Xs.push(n)}function yN(n){Qg=!0,J2(n)}function ya(){if(!sy&&Xs!==null){sy=!0;var n=0,e=zt;try{var t=Xs;for(zt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Xs=null,Qg=!1}catch(i){throw Xs!==null&&(Xs=Xs.slice(n+1)),E2(B1,ya),i}finally{zt=e,sy=!1}}return null}var Pc=[],Lc=0,ug=null,fg=0,xi=[],Si=0,ul=null,Qs=1,eo="";function Ba(n,e){Pc[Lc++]=fg,Pc[Lc++]=ug,ug=n,fg=e}function Q2(n,e,t){xi[Si++]=Qs,xi[Si++]=eo,xi[Si++]=ul,ul=n;var r=Qs;n=eo;var i=32-ji(r)-1;r&=~(1<<i),t+=1;var s=32-ji(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qs=1<<32-ji(e)+i|t<<i|r,eo=s+n}else Qs=1<<s|t<<i|r,eo=n}function q1(n){n.return!==null&&(Ba(n,1),Q2(n,1,0))}function K1(n){for(;n===ug;)ug=Pc[--Lc],Pc[Lc]=null,fg=Pc[--Lc],Pc[Lc]=null;for(;n===ul;)ul=xi[--Si],xi[Si]=null,eo=xi[--Si],xi[Si]=null,Qs=xi[--Si],xi[Si]=null}var ii=null,ti=null,nn=!1,Gi=null;function eR(n,e){var t=Mi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function JM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ii=n,ti=Qo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ii=n,ti=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ul!==null?{id:Qs,overflow:eo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Mi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ii=n,ti=null,!0):!1;default:return!1}}function j_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function X_(n){if(nn){var e=ti;if(e){var t=e;if(!JM(n,e)){if(j_(n))throw Error(Ae(418));e=Qo(t.nextSibling);var r=ii;e&&JM(n,e)?eR(r,t):(n.flags=n.flags&-4097|2,nn=!1,ii=n)}}else{if(j_(n))throw Error(Ae(418));n.flags=n.flags&-4097|2,nn=!1,ii=n}}}function QM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ii=n}function bp(n){if(n!==ii)return!1;if(!nn)return QM(n),nn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!V_(n.type,n.memoizedProps)),e&&(e=ti)){if(j_(n))throw tR(),Error(Ae(418));for(;e;)eR(n,e),e=Qo(e.nextSibling)}if(QM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ae(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ti=Qo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ti=null}}else ti=ii?Qo(n.stateNode.nextSibling):null;return!0}function tR(){for(var n=ti;n;)n=Qo(n.nextSibling)}function eu(){ti=ii=null,nn=!1}function Z1(n){Gi===null?Gi=[n]:Gi.push(n)}var _N=yo.ReactCurrentBatchConfig;function Bi(n,e){if(n&&n.defaultProps){e=hn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var dg=va(null),hg=null,Ic=null,J1=null;function Q1(){J1=Ic=hg=null}function eS(n){var e=dg.current;en(dg),n._currentValue=e}function Y_(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function $c(n,e){hg=n,J1=Ic=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zr=!0),n.firstContext=null)}function Ai(n){var e=n._currentValue;if(J1!==n)if(n={context:n,memoizedValue:e,next:null},Ic===null){if(hg===null)throw Error(Ae(308));Ic=n,hg.dependencies={lanes:0,firstContext:n}}else Ic=Ic.next=n;return e}var Xa=null;function tS(n){Xa===null?Xa=[n]:Xa.push(n)}function nR(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,tS(e)):(t.next=i.next,i.next=t),e.interleaved=t,fo(n,r)}function fo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ho=!1;function nS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function no(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fo(n,t)}return i=r.interleaved,i===null?(e.next=e,tS(r)):(e.next=i.next,i.next=e),r.interleaved=e,fo(n,t)}function km(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,H1(n,t)}}function eT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function pg(n,e,t,r){var i=n.updateQueue;Ho=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,m=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=hn({},h,p);break e;case 2:Ho=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);dl|=o,n.lanes=o,n.memoizedState=h}}function tT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var iR=new n2.Component().refs;function q_(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:hn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var e0={isMounted:function(n){return(n=n._reactInternals)?El(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=br(),i=na(n),s=no(r,i);s.payload=e,t!=null&&(s.callback=t),e=ea(n,s,i),e!==null&&(Xi(e,n,i,r),km(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=br(),i=na(n),s=no(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ea(n,s,i),e!==null&&(Xi(e,n,i,r),km(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=br(),r=na(n),i=no(t,r);i.tag=2,e!=null&&(i.callback=e),e=ea(n,i,r),e!==null&&(Xi(e,n,r,t),km(e,n,r))}};function nT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cd(t,r)||!cd(i,s):!0}function sR(n,e,t){var r=!1,i=ca,s=e.contextType;return typeof s=="object"&&s!==null?s=Ai(s):(i=Vr(e)?cl:mr.current,r=e.contextTypes,s=(r=r!=null)?Qc(n,i):ca),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=e0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function rT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&e0.enqueueReplaceState(e,e.state,null)}function K_(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=iR,nS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ai(s):(s=Vr(e)?cl:mr.current,i.context=Qc(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(q_(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&e0.enqueueReplaceState(i,i.state,null),pg(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function lf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ae(309));var r=t.stateNode}if(!r)throw Error(Ae(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===iR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ae(284));if(!t._owner)throw Error(Ae(290,n))}return n}function Ap(n,e){throw n=Object.prototype.toString.call(e),Error(Ae(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iT(n){var e=n._init;return e(n._payload)}function oR(n){function e(g,x){if(n){var w=g.deletions;w===null?(g.deletions=[x],g.flags|=16):w.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=ra(g,x),g.index=0,g.sibling=null,g}function s(g,x,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<x?(g.flags|=2,x):w):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,w,M){return x===null||x.tag!==6?(x=dy(w,g.mode,M),x.return=g,x):(x=i(x,w),x.return=g,x)}function l(g,x,w,M){var A=w.type;return A===Mc?d(g,x,w.props.children,M,w.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bo&&iT(A)===x.type)?(M=i(x,w.props),M.ref=lf(g,x,w),M.return=g,M):(M=Hm(w.type,w.key,w.props,null,g.mode,M),M.ref=lf(g,x,w),M.return=g,M)}function u(g,x,w,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=hy(w,g.mode,M),x.return=g,x):(x=i(x,w.children||[]),x.return=g,x)}function d(g,x,w,M,A){return x===null||x.tag!==7?(x=nl(w,g.mode,M,A),x.return=g,x):(x=i(x,w),x.return=g,x)}function h(g,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=dy(""+x,g.mode,w),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gp:return w=Hm(x.type,x.key,x.props,null,g.mode,w),w.ref=lf(g,null,x),w.return=g,w;case Ec:return x=hy(x,g.mode,w),x.return=g,x;case Bo:var M=x._init;return h(g,M(x._payload),w)}if(Rf(x)||nf(x))return x=nl(x,g.mode,w,null),x.return=g,x;Ap(g,x)}return null}function p(g,x,w,M){var A=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(g,x,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gp:return w.key===A?l(g,x,w,M):null;case Ec:return w.key===A?u(g,x,w,M):null;case Bo:return A=w._init,p(g,x,A(w._payload),M)}if(Rf(w)||nf(w))return A!==null?null:d(g,x,w,M,null);Ap(g,w)}return null}function m(g,x,w,M,A){if(typeof M=="string"&&M!==""||typeof M=="number")return g=g.get(w)||null,a(x,g,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case gp:return g=g.get(M.key===null?w:M.key)||null,l(x,g,M,A);case Ec:return g=g.get(M.key===null?w:M.key)||null,u(x,g,M,A);case Bo:var b=M._init;return m(g,x,w,b(M._payload),A)}if(Rf(M)||nf(M))return g=g.get(w)||null,d(x,g,M,A,null);Ap(x,M)}return null}function v(g,x,w,M){for(var A=null,b=null,I=x,L=x=0,R=null;I!==null&&L<w.length;L++){I.index>L?(R=I,I=null):R=I.sibling;var P=p(g,I,w[L],M);if(P===null){I===null&&(I=R);break}n&&I&&P.alternate===null&&e(g,I),x=s(P,x,L),b===null?A=P:b.sibling=P,b=P,I=R}if(L===w.length)return t(g,I),nn&&Ba(g,L),A;if(I===null){for(;L<w.length;L++)I=h(g,w[L],M),I!==null&&(x=s(I,x,L),b===null?A=I:b.sibling=I,b=I);return nn&&Ba(g,L),A}for(I=r(g,I);L<w.length;L++)R=m(I,g,L,w[L],M),R!==null&&(n&&R.alternate!==null&&I.delete(R.key===null?L:R.key),x=s(R,x,L),b===null?A=R:b.sibling=R,b=R);return n&&I.forEach(function(k){return e(g,k)}),nn&&Ba(g,L),A}function S(g,x,w,M){var A=nf(w);if(typeof A!="function")throw Error(Ae(150));if(w=A.call(w),w==null)throw Error(Ae(151));for(var b=A=null,I=x,L=x=0,R=null,P=w.next();I!==null&&!P.done;L++,P=w.next()){I.index>L?(R=I,I=null):R=I.sibling;var k=p(g,I,P.value,M);if(k===null){I===null&&(I=R);break}n&&I&&k.alternate===null&&e(g,I),x=s(k,x,L),b===null?A=k:b.sibling=k,b=k,I=R}if(P.done)return t(g,I),nn&&Ba(g,L),A;if(I===null){for(;!P.done;L++,P=w.next())P=h(g,P.value,M),P!==null&&(x=s(P,x,L),b===null?A=P:b.sibling=P,b=P);return nn&&Ba(g,L),A}for(I=r(g,I);!P.done;L++,P=w.next())P=m(I,g,L,P.value,M),P!==null&&(n&&P.alternate!==null&&I.delete(P.key===null?L:P.key),x=s(P,x,L),b===null?A=P:b.sibling=P,b=P);return n&&I.forEach(function(V){return e(g,V)}),nn&&Ba(g,L),A}function _(g,x,w,M){if(typeof w=="object"&&w!==null&&w.type===Mc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case gp:e:{for(var A=w.key,b=x;b!==null;){if(b.key===A){if(A=w.type,A===Mc){if(b.tag===7){t(g,b.sibling),x=i(b,w.props.children),x.return=g,g=x;break e}}else if(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Bo&&iT(A)===b.type){t(g,b.sibling),x=i(b,w.props),x.ref=lf(g,b,w),x.return=g,g=x;break e}t(g,b);break}else e(g,b);b=b.sibling}w.type===Mc?(x=nl(w.props.children,g.mode,M,w.key),x.return=g,g=x):(M=Hm(w.type,w.key,w.props,null,g.mode,M),M.ref=lf(g,x,w),M.return=g,g=M)}return o(g);case Ec:e:{for(b=w.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){t(g,x.sibling),x=i(x,w.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=hy(w,g.mode,M),x.return=g,g=x}return o(g);case Bo:return b=w._init,_(g,x,b(w._payload),M)}if(Rf(w))return v(g,x,w,M);if(nf(w))return S(g,x,w,M);Ap(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(t(g,x.sibling),x=i(x,w),x.return=g,g=x):(t(g,x),x=dy(w,g.mode,M),x.return=g,g=x),o(g)):t(g,x)}return _}var tu=oR(!0),aR=oR(!1),Gd={},ws=va(Gd),hd=va(Gd),pd=va(Gd);function Ya(n){if(n===Gd)throw Error(Ae(174));return n}function rS(n,e){switch(Xt(pd,e),Xt(hd,n),Xt(ws,Gd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:C_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=C_(e,n)}en(ws),Xt(ws,e)}function nu(){en(ws),en(hd),en(pd)}function lR(n){Ya(pd.current);var e=Ya(ws.current),t=C_(e,n.type);e!==t&&(Xt(hd,n),Xt(ws,t))}function iS(n){hd.current===n&&(en(ws),en(hd))}var ln=va(0);function mg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oy=[];function sS(){for(var n=0;n<oy.length;n++)oy[n]._workInProgressVersionPrimary=null;oy.length=0}var Nm=yo.ReactCurrentDispatcher,ay=yo.ReactCurrentBatchConfig,fl=0,dn=null,Fn=null,jn=null,gg=!1,Bf=!1,md=0,xN=0;function cr(){throw Error(Ae(321))}function oS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ki(n[t],e[t]))return!1;return!0}function aS(n,e,t,r,i,s){if(fl=s,dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nm.current=n===null||n.memoizedState===null?MN:TN,n=t(r,i),Bf){s=0;do{if(Bf=!1,md=0,25<=s)throw Error(Ae(301));s+=1,jn=Fn=null,e.updateQueue=null,Nm.current=bN,n=t(r,i)}while(Bf)}if(Nm.current=vg,e=Fn!==null&&Fn.next!==null,fl=0,jn=Fn=dn=null,gg=!1,e)throw Error(Ae(300));return n}function lS(){var n=md!==0;return md=0,n}function ms(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?dn.memoizedState=jn=n:jn=jn.next=n,jn}function Ci(){if(Fn===null){var n=dn.alternate;n=n!==null?n.memoizedState:null}else n=Fn.next;var e=jn===null?dn.memoizedState:jn.next;if(e!==null)jn=e,Fn=n;else{if(n===null)throw Error(Ae(310));Fn=n,n={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},jn===null?dn.memoizedState=jn=n:jn=jn.next=n}return jn}function gd(n,e){return typeof e=="function"?e(n):e}function ly(n){var e=Ci(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var r=Fn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((fl&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,dn.lanes|=d,dl|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ki(r,e.memoizedState)||(zr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,dn.lanes|=s,dl|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function cy(n){var e=Ci(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ki(s,e.memoizedState)||(zr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function cR(){}function uR(n,e){var t=dn,r=Ci(),i=e(),s=!Ki(r.memoizedState,i);if(s&&(r.memoizedState=i,zr=!0),r=r.queue,cS(hR.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||jn!==null&&jn.memoizedState.tag&1){if(t.flags|=2048,vd(9,dR.bind(null,t,r,i,e),void 0,null),Kn===null)throw Error(Ae(349));fl&30||fR(t,e,i)}return i}function fR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function dR(n,e,t,r){e.value=t,e.getSnapshot=r,pR(e)&&mR(n)}function hR(n,e,t){return t(function(){pR(e)&&mR(n)})}function pR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ki(n,t)}catch{return!0}}function mR(n){var e=fo(n,1);e!==null&&Xi(e,n,1,-1)}function sT(n){var e=ms();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:n},e.queue=n,n=n.dispatch=EN.bind(null,dn,n),[e.memoizedState,n]}function vd(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function gR(){return Ci().memoizedState}function Um(n,e,t,r){var i=ms();dn.flags|=n,i.memoizedState=vd(1|e,t,void 0,r===void 0?null:r)}function t0(n,e,t,r){var i=Ci();r=r===void 0?null:r;var s=void 0;if(Fn!==null){var o=Fn.memoizedState;if(s=o.destroy,r!==null&&oS(r,o.deps)){i.memoizedState=vd(e,t,s,r);return}}dn.flags|=n,i.memoizedState=vd(1|e,t,s,r)}function oT(n,e){return Um(8390656,8,n,e)}function cS(n,e){return t0(2048,8,n,e)}function vR(n,e){return t0(4,2,n,e)}function yR(n,e){return t0(4,4,n,e)}function _R(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function xR(n,e,t){return t=t!=null?t.concat([n]):null,t0(4,4,_R.bind(null,e,n),t)}function uS(){}function SR(n,e){var t=Ci();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&oS(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function wR(n,e){var t=Ci();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&oS(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function ER(n,e,t){return fl&21?(Ki(t,e)||(t=b2(),dn.lanes|=t,dl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zr=!0),n.memoizedState=t)}function SN(n,e){var t=zt;zt=t!==0&&4>t?t:4,n(!0);var r=ay.transition;ay.transition={};try{n(!1),e()}finally{zt=t,ay.transition=r}}function MR(){return Ci().memoizedState}function wN(n,e,t){var r=na(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},TR(n))bR(e,t);else if(t=nR(n,e,t,r),t!==null){var i=br();Xi(t,n,r,i),AR(t,e,r)}}function EN(n,e,t){var r=na(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(TR(n))bR(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ki(a,o)){var l=e.interleaved;l===null?(i.next=i,tS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=nR(n,e,i,r),t!==null&&(i=br(),Xi(t,n,r,i),AR(t,e,r))}}function TR(n){var e=n.alternate;return n===dn||e!==null&&e===dn}function bR(n,e){Bf=gg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function AR(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,H1(n,t)}}var vg={readContext:Ai,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},MN={readContext:Ai,useCallback:function(n,e){return ms().memoizedState=[n,e===void 0?null:e],n},useContext:Ai,useEffect:oT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Um(4194308,4,_R.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Um(4194308,4,n,e)},useInsertionEffect:function(n,e){return Um(4,2,n,e)},useMemo:function(n,e){var t=ms();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ms();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=wN.bind(null,dn,n),[r.memoizedState,n]},useRef:function(n){var e=ms();return n={current:n},e.memoizedState=n},useState:sT,useDebugValue:uS,useDeferredValue:function(n){return ms().memoizedState=n},useTransition:function(){var n=sT(!1),e=n[0];return n=SN.bind(null,n[1]),ms().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=dn,i=ms();if(nn){if(t===void 0)throw Error(Ae(407));t=t()}else{if(t=e(),Kn===null)throw Error(Ae(349));fl&30||fR(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,oT(hR.bind(null,r,s,n),[n]),r.flags|=2048,vd(9,dR.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=ms(),e=Kn.identifierPrefix;if(nn){var t=eo,r=Qs;t=(r&~(1<<32-ji(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=md++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=xN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},TN={readContext:Ai,useCallback:SR,useContext:Ai,useEffect:cS,useImperativeHandle:xR,useInsertionEffect:vR,useLayoutEffect:yR,useMemo:wR,useReducer:ly,useRef:gR,useState:function(){return ly(gd)},useDebugValue:uS,useDeferredValue:function(n){var e=Ci();return ER(e,Fn.memoizedState,n)},useTransition:function(){var n=ly(gd)[0],e=Ci().memoizedState;return[n,e]},useMutableSource:cR,useSyncExternalStore:uR,useId:MR,unstable_isNewReconciler:!1},bN={readContext:Ai,useCallback:SR,useContext:Ai,useEffect:cS,useImperativeHandle:xR,useInsertionEffect:vR,useLayoutEffect:yR,useMemo:wR,useReducer:cy,useRef:gR,useState:function(){return cy(gd)},useDebugValue:uS,useDeferredValue:function(n){var e=Ci();return Fn===null?e.memoizedState=n:ER(e,Fn.memoizedState,n)},useTransition:function(){var n=cy(gd)[0],e=Ci().memoizedState;return[n,e]},useMutableSource:cR,useSyncExternalStore:uR,useId:MR,unstable_isNewReconciler:!1};function ru(n,e){try{var t="",r=e;do t+=ek(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function uy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Z_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var AN=typeof WeakMap=="function"?WeakMap:Map;function CR(n,e,t){t=no(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){_g||(_g=!0,ax=r),Z_(n,e)},t}function RR(n,e,t){t=no(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Z_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Z_(n,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function aT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new AN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=HN.bind(null,n,e,t),e.then(n,n))}function lT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function cT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=no(-1,1),e.tag=2,ea(t,e,1))),t.lanes|=1),n)}var CN=yo.ReactCurrentOwner,zr=!1;function Er(n,e,t,r){e.child=n===null?aR(e,null,t,r):tu(e,n.child,t,r)}function uT(n,e,t,r,i){t=t.render;var s=e.ref;return $c(e,i),r=aS(n,e,t,r,s,i),t=lS(),n!==null&&!zr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ho(n,e,i)):(nn&&t&&q1(e),e.flags|=1,Er(n,e,r,i),e.child)}function fT(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!yS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,PR(n,e,s,r,i)):(n=Hm(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:cd,t(o,r)&&n.ref===e.ref)return ho(n,e,i)}return e.flags|=1,n=ra(s,r),n.ref=e.ref,n.return=e,e.child=n}function PR(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(cd(s,r)&&n.ref===e.ref)if(zr=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(zr=!0);else return e.lanes=n.lanes,ho(n,e,i)}return J_(n,e,t,r,i)}function LR(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Oc,ei),ei|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Xt(Oc,ei),ei|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Xt(Oc,ei),ei|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Xt(Oc,ei),ei|=r;return Er(n,e,i,t),e.child}function IR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function J_(n,e,t,r,i){var s=Vr(t)?cl:mr.current;return s=Qc(e,s),$c(e,i),t=aS(n,e,t,r,s,i),r=lS(),n!==null&&!zr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ho(n,e,i)):(nn&&r&&q1(e),e.flags|=1,Er(n,e,t,i),e.child)}function dT(n,e,t,r,i){if(Vr(t)){var s=!0;cg(e)}else s=!1;if($c(e,i),e.stateNode===null)Fm(n,e),sR(e,t,r),K_(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ai(u):(u=Vr(t)?cl:mr.current,u=Qc(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&rT(e,o,r,u),Ho=!1;var p=e.memoizedState;o.state=p,pg(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Hr.current||Ho?(typeof d=="function"&&(q_(e,t,d,r),l=e.memoizedState),(a=Ho||nT(e,t,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rR(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Bi(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ai(l):(l=Vr(t)?cl:mr.current,l=Qc(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&rT(e,o,r,l),Ho=!1,p=e.memoizedState,o.state=p,pg(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||Hr.current||Ho?(typeof m=="function"&&(q_(e,t,m,r),v=e.memoizedState),(u=Ho||nT(e,t,u,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Q_(n,e,t,r,s,i)}function Q_(n,e,t,r,i,s){IR(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ZM(e,t,!1),ho(n,e,s);r=e.stateNode,CN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=tu(e,n.child,null,s),e.child=tu(e,null,a,s)):Er(n,e,a,s),e.memoizedState=r.state,i&&ZM(e,t,!0),e.child}function DR(n){var e=n.stateNode;e.pendingContext?KM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&KM(n,e.context,!1),rS(n,e.containerInfo)}function hT(n,e,t,r,i){return eu(),Z1(i),e.flags|=256,Er(n,e,t,r),e.child}var ex={dehydrated:null,treeContext:null,retryLane:0};function tx(n){return{baseLanes:n,cachePool:null,transitions:null}}function OR(n,e,t){var r=e.pendingProps,i=ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Xt(ln,i&1),n===null)return X_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=i0(o,r,0,null),n=nl(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=tx(t),e.memoizedState=ex,n):fS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RN(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ra(a,s):(s=nl(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?tx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=ex,r}return s=n.child,n=s.sibling,r=ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function fS(n,e){return e=i0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Cp(n,e,t,r){return r!==null&&Z1(r),tu(e,n.child,null,t),n=fS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RN(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=uy(Error(Ae(422))),Cp(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=i0({mode:"visible",children:r.children},i,0,null),s=nl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&tu(e,n.child,null,o),e.child.memoizedState=tx(o),e.memoizedState=ex,s);if(!(e.mode&1))return Cp(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ae(419)),r=uy(s,r,void 0),Cp(n,e,o,r)}if(a=(o&n.childLanes)!==0,zr||a){if(r=Kn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fo(n,i),Xi(r,n,i,-1))}return vS(),r=uy(Error(Ae(421))),Cp(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=VN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ti=Qo(i.nextSibling),ii=e,nn=!0,Gi=null,n!==null&&(xi[Si++]=Qs,xi[Si++]=eo,xi[Si++]=ul,Qs=n.id,eo=n.overflow,ul=e),e=fS(e,r.children),e.flags|=4096,e)}function pT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Y_(n.return,e,t)}function fy(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function kR(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Er(n,e,r.children,t),r=ln.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pT(n,t,e);else if(n.tag===19)pT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Xt(ln,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&mg(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),fy(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&mg(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}fy(e,!0,t,null,s);break;case"together":fy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ho(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),dl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ae(153));if(e.child!==null){for(n=e.child,t=ra(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ra(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function PN(n,e,t){switch(e.tag){case 3:DR(e),eu();break;case 5:lR(e);break;case 1:Vr(e.type)&&cg(e);break;case 4:rS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xt(dg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xt(ln,ln.current&1),e.flags|=128,null):t&e.child.childLanes?OR(n,e,t):(Xt(ln,ln.current&1),n=ho(n,e,t),n!==null?n.sibling:null);Xt(ln,ln.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return kR(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xt(ln,ln.current),r)break;return null;case 22:case 23:return e.lanes=0,LR(n,e,t)}return ho(n,e,t)}var NR,nx,UR,FR;NR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};nx=function(){};UR=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ya(ws.current);var s=null;switch(t){case"input":i=M_(n,i),r=M_(n,r),s=[];break;case"select":i=hn({},i,{value:void 0}),r=hn({},r,{value:void 0}),s=[];break;case"textarea":i=A_(n,i),r=A_(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ag)}R_(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(nd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(nd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Zt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};FR=function(n,e,t,r){t!==r&&(e.flags|=4)};function cf(n,e){if(!nn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ur(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function LN(n,e,t){var r=e.pendingProps;switch(K1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(e),null;case 1:return Vr(e.type)&&lg(),ur(e),null;case 3:return r=e.stateNode,nu(),en(Hr),en(mr),sS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(bp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gi!==null&&(ux(Gi),Gi=null))),nx(n,e),ur(e),null;case 5:iS(e);var i=Ya(pd.current);if(t=e.type,n!==null&&e.stateNode!=null)UR(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return ur(e),null}if(n=Ya(ws.current),bp(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[gs]=e,r[dd]=s,n=(e.mode&1)!==0,t){case"dialog":Zt("cancel",r),Zt("close",r);break;case"iframe":case"object":case"embed":Zt("load",r);break;case"video":case"audio":for(i=0;i<Lf.length;i++)Zt(Lf[i],r);break;case"source":Zt("error",r);break;case"img":case"image":case"link":Zt("error",r),Zt("load",r);break;case"details":Zt("toggle",r);break;case"input":EM(r,s),Zt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Zt("invalid",r);break;case"textarea":TM(r,s),Zt("invalid",r)}R_(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tp(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tp(r.textContent,a,n),i=["children",""+a]):nd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Zt("scroll",r)}switch(t){case"input":vp(r),MM(r,s,!0);break;case"textarea":vp(r),bM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ag)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=f2(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[gs]=e,n[dd]=r,NR(n,e,!1,!1),e.stateNode=n;e:{switch(o=P_(t,r),t){case"dialog":Zt("cancel",n),Zt("close",n),i=r;break;case"iframe":case"object":case"embed":Zt("load",n),i=r;break;case"video":case"audio":for(i=0;i<Lf.length;i++)Zt(Lf[i],n);i=r;break;case"source":Zt("error",n),i=r;break;case"img":case"image":case"link":Zt("error",n),Zt("load",n),i=r;break;case"details":Zt("toggle",n),i=r;break;case"input":EM(n,r),i=M_(n,r),Zt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=hn({},r,{value:void 0}),Zt("invalid",n);break;case"textarea":TM(n,r),i=A_(n,r),Zt("invalid",n);break;default:i=r}R_(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?p2(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&d2(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rd(n,l):typeof l=="number"&&rd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Zt("scroll",n):l!=null&&k1(n,s,l,o))}switch(t){case"input":vp(n),MM(n,r,!1);break;case"textarea":vp(n),bM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+la(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Hc(n,!!r.multiple,s,!1):r.defaultValue!=null&&Hc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=ag)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ur(e),null;case 6:if(n&&e.stateNode!=null)FR(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(t=Ya(pd.current),Ya(ws.current),bp(e)){if(r=e.stateNode,t=e.memoizedProps,r[gs]=e,(s=r.nodeValue!==t)&&(n=ii,n!==null))switch(n.tag){case 3:Tp(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Tp(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[gs]=e,e.stateNode=r}return ur(e),null;case 13:if(en(ln),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nn&&ti!==null&&e.mode&1&&!(e.flags&128))tR(),eu(),e.flags|=98560,s=!1;else if(s=bp(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[gs]=e}else eu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ur(e),s=!1}else Gi!==null&&(ux(Gi),Gi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ln.current&1?zn===0&&(zn=3):vS())),e.updateQueue!==null&&(e.flags|=4),ur(e),null);case 4:return nu(),nx(n,e),n===null&&ud(e.stateNode.containerInfo),ur(e),null;case 10:return eS(e.type._context),ur(e),null;case 17:return Vr(e.type)&&lg(),ur(e),null;case 19:if(en(ln),s=e.memoizedState,s===null)return ur(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)cf(s,!1);else{if(zn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=mg(n),o!==null){for(e.flags|=128,cf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Xt(ln,ln.current&1|2),e.child}n=n.sibling}s.tail!==null&&Cn()>iu&&(e.flags|=128,r=!0,cf(s,!1),e.lanes=4194304)}else{if(!r)if(n=mg(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nn)return ur(e),null}else 2*Cn()-s.renderingStartTime>iu&&t!==1073741824&&(e.flags|=128,r=!0,cf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Cn(),e.sibling=null,t=ln.current,Xt(ln,r?t&1|2:t&1),e):(ur(e),null);case 22:case 23:return gS(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ei&1073741824&&(ur(e),e.subtreeFlags&6&&(e.flags|=8192)):ur(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function IN(n,e){switch(K1(e),e.tag){case 1:return Vr(e.type)&&lg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return nu(),en(Hr),en(mr),sS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return iS(e),null;case 13:if(en(ln),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));eu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return en(ln),null;case 4:return nu(),null;case 10:return eS(e.type._context),null;case 22:case 23:return gS(),null;case 24:return null;default:return null}}var Rp=!1,hr=!1,DN=typeof WeakSet=="function"?WeakSet:Set,We=null;function Dc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){_n(n,e,r)}else t.current=null}function rx(n,e,t){try{t()}catch(r){_n(n,e,r)}}var mT=!1;function ON(n,e){if(B_=ig,n=V2(),Y1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=n,p=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(H_={focusedElem:n,selectionRange:t},ig=!1,We=e;We!==null;)if(e=We,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,We=n;else for(;We!==null;){e=We;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,_=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:Bi(e.type,S),_);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(M){_n(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,We=n;break}We=e.return}return v=mT,mT=!1,v}function Hf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&rx(e,t,s)}i=i.next}while(i!==r)}}function n0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ix(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function zR(n){var e=n.alternate;e!==null&&(n.alternate=null,zR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[gs],delete e[dd],delete e[W_],delete e[gN],delete e[vN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function BR(n){return n.tag===5||n.tag===3||n.tag===4}function gT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||BR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sx(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ag));else if(r!==4&&(n=n.child,n!==null))for(sx(n,e,t),n=n.sibling;n!==null;)sx(n,e,t),n=n.sibling}function ox(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(ox(n,e,t),n=n.sibling;n!==null;)ox(n,e,t),n=n.sibling}var Qn=null,Vi=!1;function Io(n,e,t){for(t=t.child;t!==null;)HR(n,e,t),t=t.sibling}function HR(n,e,t){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Yg,t)}catch{}switch(t.tag){case 5:hr||Dc(t,e);case 6:var r=Qn,i=Vi;Qn=null,Io(n,e,t),Qn=r,Vi=i,Qn!==null&&(Vi?(n=Qn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Qn.removeChild(t.stateNode));break;case 18:Qn!==null&&(Vi?(n=Qn,t=t.stateNode,n.nodeType===8?iy(n.parentNode,t):n.nodeType===1&&iy(n,t),ad(n)):iy(Qn,t.stateNode));break;case 4:r=Qn,i=Vi,Qn=t.stateNode.containerInfo,Vi=!0,Io(n,e,t),Qn=r,Vi=i;break;case 0:case 11:case 14:case 15:if(!hr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&rx(t,e,o),i=i.next}while(i!==r)}Io(n,e,t);break;case 1:if(!hr&&(Dc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){_n(t,e,a)}Io(n,e,t);break;case 21:Io(n,e,t);break;case 22:t.mode&1?(hr=(r=hr)||t.memoizedState!==null,Io(n,e,t),hr=r):Io(n,e,t);break;default:Io(n,e,t)}}function vT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new DN),e.forEach(function(r){var i=GN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function ki(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qn=a.stateNode,Vi=!1;break e;case 3:Qn=a.stateNode.containerInfo,Vi=!0;break e;case 4:Qn=a.stateNode.containerInfo,Vi=!0;break e}a=a.return}if(Qn===null)throw Error(Ae(160));HR(s,o,i),Qn=null,Vi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_n(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VR(e,n),e=e.sibling}function VR(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ki(e,n),hs(n),r&4){try{Hf(3,n,n.return),n0(3,n)}catch(S){_n(n,n.return,S)}try{Hf(5,n,n.return)}catch(S){_n(n,n.return,S)}}break;case 1:ki(e,n),hs(n),r&512&&t!==null&&Dc(t,t.return);break;case 5:if(ki(e,n),hs(n),r&512&&t!==null&&Dc(t,t.return),n.flags&32){var i=n.stateNode;try{rd(i,"")}catch(S){_n(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&c2(i,s),P_(a,o);var u=P_(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?p2(i,h):d==="dangerouslySetInnerHTML"?d2(i,h):d==="children"?rd(i,h):k1(i,d,h,u)}switch(a){case"input":T_(i,s);break;case"textarea":u2(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Hc(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Hc(i,!!s.multiple,s.defaultValue,!0):Hc(i,!!s.multiple,s.multiple?[]:"",!1))}i[dd]=s}catch(S){_n(n,n.return,S)}}break;case 6:if(ki(e,n),hs(n),r&4){if(n.stateNode===null)throw Error(Ae(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){_n(n,n.return,S)}}break;case 3:if(ki(e,n),hs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ad(e.containerInfo)}catch(S){_n(n,n.return,S)}break;case 4:ki(e,n),hs(n);break;case 13:ki(e,n),hs(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pS=Cn())),r&4&&vT(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(hr=(u=hr)||d,ki(e,n),hr=u):ki(e,n),hs(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(We=n,d=n.child;d!==null;){for(h=We=d;We!==null;){switch(p=We,m=p.child,p.tag){case 0:case 11:case 14:case 15:Hf(4,p,p.return);break;case 1:Dc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){_n(r,t,S)}}break;case 5:Dc(p,p.return);break;case 22:if(p.memoizedState!==null){_T(h);continue}}m!==null?(m.return=p,We=m):_T(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=h2("display",o))}catch(S){_n(n,n.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){_n(n,n.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ki(e,n),hs(n),r&4&&vT(n);break;case 21:break;default:ki(e,n),hs(n)}}function hs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(BR(t)){var r=t;break e}t=t.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rd(i,""),r.flags&=-33);var s=gT(n);ox(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gT(n);sx(n,a,o);break;default:throw Error(Ae(161))}}catch(l){_n(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kN(n,e,t){We=n,GR(n)}function GR(n,e,t){for(var r=(n.mode&1)!==0;We!==null;){var i=We,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Rp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||hr;a=Rp;var u=hr;if(Rp=o,(hr=l)&&!u)for(We=i;We!==null;)o=We,l=o.child,o.tag===22&&o.memoizedState!==null?xT(i):l!==null?(l.return=o,We=l):xT(i);for(;s!==null;)We=s,GR(s),s=s.sibling;We=i,Rp=a,hr=u}yT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,We=s):yT(n)}}function yT(n){for(;We!==null;){var e=We;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hr||n0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Bi(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}tT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ad(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}hr||e.flags&512&&ix(e)}catch(p){_n(e,e.return,p)}}if(e===n){We=null;break}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}}function _T(n){for(;We!==null;){var e=We;if(e===n){We=null;break}var t=e.sibling;if(t!==null){t.return=e.return,We=t;break}We=e.return}}function xT(n){for(;We!==null;){var e=We;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{n0(4,e)}catch(l){_n(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_n(e,i,l)}}var s=e.return;try{ix(e)}catch(l){_n(e,s,l)}break;case 5:var o=e.return;try{ix(e)}catch(l){_n(e,o,l)}}}catch(l){_n(e,e.return,l)}if(e===n){We=null;break}var a=e.sibling;if(a!==null){a.return=e.return,We=a;break}We=e.return}}var NN=Math.ceil,yg=yo.ReactCurrentDispatcher,dS=yo.ReactCurrentOwner,bi=yo.ReactCurrentBatchConfig,Dt=0,Kn=null,On=null,er=0,ei=0,Oc=va(0),zn=0,yd=null,dl=0,r0=0,hS=0,Vf=null,Nr=null,pS=0,iu=1/0,js=null,_g=!1,ax=null,ta=null,Pp=!1,Xo=null,xg=0,Gf=0,lx=null,zm=-1,Bm=0;function br(){return Dt&6?Cn():zm!==-1?zm:zm=Cn()}function na(n){return n.mode&1?Dt&2&&er!==0?er&-er:_N.transition!==null?(Bm===0&&(Bm=b2()),Bm):(n=zt,n!==0||(n=window.event,n=n===void 0?16:D2(n.type)),n):1}function Xi(n,e,t,r){if(50<Gf)throw Gf=0,lx=null,Error(Ae(185));Bd(n,t,r),(!(Dt&2)||n!==Kn)&&(n===Kn&&(!(Dt&2)&&(r0|=t),zn===4&&$o(n,er)),Gr(n,r),t===1&&Dt===0&&!(e.mode&1)&&(iu=Cn()+500,Qg&&ya()))}function Gr(n,e){var t=n.callbackNode;_k(n,e);var r=rg(n,n===Kn?er:0);if(r===0)t!==null&&RM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&RM(t),e===1)n.tag===0?yN(ST.bind(null,n)):J2(ST.bind(null,n)),pN(function(){!(Dt&6)&&ya()}),t=null;else{switch(A2(r)){case 1:t=B1;break;case 4:t=M2;break;case 16:t=ng;break;case 536870912:t=T2;break;default:t=ng}t=ZR(t,WR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function WR(n,e){if(zm=-1,Bm=0,Dt&6)throw Error(Ae(327));var t=n.callbackNode;if(jc()&&n.callbackNode!==t)return null;var r=rg(n,n===Kn?er:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Sg(n,r);else{e=r;var i=Dt;Dt|=2;var s=jR();(Kn!==n||er!==e)&&(js=null,iu=Cn()+500,tl(n,e));do try{zN();break}catch(a){$R(n,a)}while(1);Q1(),yg.current=s,Dt=i,On!==null?e=0:(Kn=null,er=0,e=zn)}if(e!==0){if(e===2&&(i=k_(n),i!==0&&(r=i,e=cx(n,i))),e===1)throw t=yd,tl(n,0),$o(n,r),Gr(n,Cn()),t;if(e===6)$o(n,r);else{if(i=n.current.alternate,!(r&30)&&!UN(i)&&(e=Sg(n,r),e===2&&(s=k_(n),s!==0&&(r=s,e=cx(n,s))),e===1))throw t=yd,tl(n,0),$o(n,r),Gr(n,Cn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Ha(n,Nr,js);break;case 3:if($o(n,r),(r&130023424)===r&&(e=pS+500-Cn(),10<e)){if(rg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){br(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=G_(Ha.bind(null,n,Nr,js),e);break}Ha(n,Nr,js);break;case 4:if($o(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ji(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NN(r/1960))-r,10<r){n.timeoutHandle=G_(Ha.bind(null,n,Nr,js),r);break}Ha(n,Nr,js);break;case 5:Ha(n,Nr,js);break;default:throw Error(Ae(329))}}}return Gr(n,Cn()),n.callbackNode===t?WR.bind(null,n):null}function cx(n,e){var t=Vf;return n.current.memoizedState.isDehydrated&&(tl(n,e).flags|=256),n=Sg(n,e),n!==2&&(e=Nr,Nr=t,e!==null&&ux(e)),n}function ux(n){Nr===null?Nr=n:Nr.push.apply(Nr,n)}function UN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ki(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $o(n,e){for(e&=~hS,e&=~r0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ji(e),r=1<<t;n[t]=-1,e&=~r}}function ST(n){if(Dt&6)throw Error(Ae(327));jc();var e=rg(n,0);if(!(e&1))return Gr(n,Cn()),null;var t=Sg(n,e);if(n.tag!==0&&t===2){var r=k_(n);r!==0&&(e=r,t=cx(n,r))}if(t===1)throw t=yd,tl(n,0),$o(n,e),Gr(n,Cn()),t;if(t===6)throw Error(Ae(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ha(n,Nr,js),Gr(n,Cn()),null}function mS(n,e){var t=Dt;Dt|=1;try{return n(e)}finally{Dt=t,Dt===0&&(iu=Cn()+500,Qg&&ya())}}function hl(n){Xo!==null&&Xo.tag===0&&!(Dt&6)&&jc();var e=Dt;Dt|=1;var t=bi.transition,r=zt;try{if(bi.transition=null,zt=1,n)return n()}finally{zt=r,bi.transition=t,Dt=e,!(Dt&6)&&ya()}}function gS(){ei=Oc.current,en(Oc)}function tl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,hN(t)),On!==null)for(t=On.return;t!==null;){var r=t;switch(K1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lg();break;case 3:nu(),en(Hr),en(mr),sS();break;case 5:iS(r);break;case 4:nu();break;case 13:en(ln);break;case 19:en(ln);break;case 10:eS(r.type._context);break;case 22:case 23:gS()}t=t.return}if(Kn=n,On=n=ra(n.current,null),er=ei=e,zn=0,yd=null,hS=r0=dl=0,Nr=Vf=null,Xa!==null){for(e=0;e<Xa.length;e++)if(t=Xa[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Xa=null}return n}function $R(n,e){do{var t=On;try{if(Q1(),Nm.current=vg,gg){for(var r=dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gg=!1}if(fl=0,jn=Fn=dn=null,Bf=!1,md=0,dS.current=null,t===null||t.return===null){zn=1,yd=e,On=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=lT(o);if(m!==null){m.flags&=-257,cT(m,o,a,s,e),m.mode&1&&aT(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){aT(s,u,e),vS();break e}l=Error(Ae(426))}}else if(nn&&a.mode&1){var _=lT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),cT(_,o,a,s,e),Z1(ru(l,a));break e}}s=l=ru(l,a),zn!==4&&(zn=2),Vf===null?Vf=[s]:Vf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=CR(s,l,e);eT(s,g);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ta===null||!ta.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=RR(s,a,e);eT(s,M);break e}}s=s.return}while(s!==null)}YR(t)}catch(A){e=A,On===t&&t!==null&&(On=t=t.return);continue}break}while(1)}function jR(){var n=yg.current;return yg.current=vg,n===null?vg:n}function vS(){(zn===0||zn===3||zn===2)&&(zn=4),Kn===null||!(dl&268435455)&&!(r0&268435455)||$o(Kn,er)}function Sg(n,e){var t=Dt;Dt|=2;var r=jR();(Kn!==n||er!==e)&&(js=null,tl(n,e));do try{FN();break}catch(i){$R(n,i)}while(1);if(Q1(),Dt=t,yg.current=r,On!==null)throw Error(Ae(261));return Kn=null,er=0,zn}function FN(){for(;On!==null;)XR(On)}function zN(){for(;On!==null&&!uk();)XR(On)}function XR(n){var e=KR(n.alternate,n,ei);n.memoizedProps=n.pendingProps,e===null?YR(n):On=e,dS.current=null}function YR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=IN(t,e),t!==null){t.flags&=32767,On=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{zn=6,On=null;return}}else if(t=LN(t,e,ei),t!==null){On=t;return}if(e=e.sibling,e!==null){On=e;return}On=e=n}while(e!==null);zn===0&&(zn=5)}function Ha(n,e,t){var r=zt,i=bi.transition;try{bi.transition=null,zt=1,BN(n,e,t,r)}finally{bi.transition=i,zt=r}return null}function BN(n,e,t,r){do jc();while(Xo!==null);if(Dt&6)throw Error(Ae(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ae(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(xk(n,s),n===Kn&&(On=Kn=null,er=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Pp||(Pp=!0,ZR(ng,function(){return jc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=bi.transition,bi.transition=null;var o=zt;zt=1;var a=Dt;Dt|=4,dS.current=null,ON(n,t),VR(t,n),oN(H_),ig=!!B_,H_=B_=null,n.current=t,kN(t),fk(),Dt=a,zt=o,bi.transition=s}else n.current=t;if(Pp&&(Pp=!1,Xo=n,xg=i),s=n.pendingLanes,s===0&&(ta=null),pk(t.stateNode),Gr(n,Cn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(_g)throw _g=!1,n=ax,ax=null,n;return xg&1&&n.tag!==0&&jc(),s=n.pendingLanes,s&1?n===lx?Gf++:(Gf=0,lx=n):Gf=0,ya(),null}function jc(){if(Xo!==null){var n=A2(xg),e=bi.transition,t=zt;try{if(bi.transition=null,zt=16>n?16:n,Xo===null)var r=!1;else{if(n=Xo,Xo=null,xg=0,Dt&6)throw Error(Ae(331));var i=Dt;for(Dt|=4,We=n.current;We!==null;){var s=We,o=s.child;if(We.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(We=u;We!==null;){var d=We;switch(d.tag){case 0:case 11:case 15:Hf(8,d,s)}var h=d.child;if(h!==null)h.return=d,We=h;else for(;We!==null;){d=We;var p=d.sibling,m=d.return;if(zR(d),d===u){We=null;break}if(p!==null){p.return=m,We=p;break}We=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var _=S.sibling;S.sibling=null,S=_}while(S!==null)}}We=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,We=o;else e:for(;We!==null;){if(s=We,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,We=g;break e}We=s.return}}var x=n.current;for(We=x;We!==null;){o=We;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,We=w;else e:for(o=x;We!==null;){if(a=We,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:n0(9,a)}}catch(A){_n(a,a.return,A)}if(a===o){We=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,We=M;break e}We=a.return}}if(Dt=i,ya(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Yg,n)}catch{}r=!0}return r}finally{zt=t,bi.transition=e}}return!1}function wT(n,e,t){e=ru(t,e),e=CR(n,e,1),n=ea(n,e,1),e=br(),n!==null&&(Bd(n,1,e),Gr(n,e))}function _n(n,e,t){if(n.tag===3)wT(n,n,t);else for(;e!==null;){if(e.tag===3){wT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){n=ru(t,n),n=RR(e,n,1),e=ea(e,n,1),n=br(),e!==null&&(Bd(e,1,n),Gr(e,n));break}}e=e.return}}function HN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=br(),n.pingedLanes|=n.suspendedLanes&t,Kn===n&&(er&t)===t&&(zn===4||zn===3&&(er&130023424)===er&&500>Cn()-pS?tl(n,0):hS|=t),Gr(n,e)}function qR(n,e){e===0&&(n.mode&1?(e=xp,xp<<=1,!(xp&130023424)&&(xp=4194304)):e=1);var t=br();n=fo(n,e),n!==null&&(Bd(n,e,t),Gr(n,t))}function VN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),qR(n,t)}function GN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),qR(n,t)}var KR;KR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Hr.current)zr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zr=!1,PN(n,e,t);zr=!!(n.flags&131072)}else zr=!1,nn&&e.flags&1048576&&Q2(e,fg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fm(n,e),n=e.pendingProps;var i=Qc(e,mr.current);$c(e,t),i=aS(null,e,r,n,i,t);var s=lS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vr(r)?(s=!0,cg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nS(e),i.updater=e0,e.stateNode=i,i._reactInternals=e,K_(e,r,n,t),e=Q_(null,e,r,!0,s,t)):(e.tag=0,nn&&s&&q1(e),Er(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Fm(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$N(r),n=Bi(r,n),i){case 0:e=J_(null,e,r,n,t);break e;case 1:e=dT(null,e,r,n,t);break e;case 11:e=uT(null,e,r,n,t);break e;case 14:e=fT(null,e,r,Bi(r.type,n),t);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bi(r,i),J_(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bi(r,i),dT(n,e,r,i,t);case 3:e:{if(DR(e),n===null)throw Error(Ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rR(n,e),pg(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ru(Error(Ae(423)),e),e=hT(n,e,r,t,i);break e}else if(r!==i){i=ru(Error(Ae(424)),e),e=hT(n,e,r,t,i);break e}else for(ti=Qo(e.stateNode.containerInfo.firstChild),ii=e,nn=!0,Gi=null,t=aR(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(eu(),r===i){e=ho(n,e,t);break e}Er(n,e,r,t)}e=e.child}return e;case 5:return lR(e),n===null&&X_(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,V_(r,i)?o=null:s!==null&&V_(r,s)&&(e.flags|=32),IR(n,e),Er(n,e,o,t),e.child;case 6:return n===null&&X_(e),null;case 13:return OR(n,e,t);case 4:return rS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=tu(e,null,r,t):Er(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bi(r,i),uT(n,e,r,i,t);case 7:return Er(n,e,e.pendingProps,t),e.child;case 8:return Er(n,e,e.pendingProps.children,t),e.child;case 12:return Er(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Xt(dg,r._currentValue),r._currentValue=o,s!==null)if(Ki(s.value,o)){if(s.children===i.children&&!Hr.current){e=ho(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=no(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Y_(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Y_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Er(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$c(e,t),i=Ai(i),r=r(i),e.flags|=1,Er(n,e,r,t),e.child;case 14:return r=e.type,i=Bi(r,e.pendingProps),i=Bi(r.type,i),fT(n,e,r,i,t);case 15:return PR(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bi(r,i),Fm(n,e),e.tag=1,Vr(r)?(n=!0,cg(e)):n=!1,$c(e,t),sR(e,r,i),K_(e,r,i,t),Q_(null,e,r,!0,n,t);case 19:return kR(n,e,t);case 22:return LR(n,e,t)}throw Error(Ae(156,e.tag))};function ZR(n,e){return E2(n,e)}function WN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(n,e,t,r){return new WN(n,e,t,r)}function yS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $N(n){if(typeof n=="function")return yS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U1)return 11;if(n===F1)return 14}return 2}function ra(n,e){var t=n.alternate;return t===null?(t=Mi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hm(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")yS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Mc:return nl(t.children,i,s,e);case N1:o=8,i|=8;break;case x_:return n=Mi(12,t,e,i|2),n.elementType=x_,n.lanes=s,n;case S_:return n=Mi(13,t,e,i),n.elementType=S_,n.lanes=s,n;case w_:return n=Mi(19,t,e,i),n.elementType=w_,n.lanes=s,n;case o2:return i0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case i2:o=10;break e;case s2:o=9;break e;case U1:o=11;break e;case F1:o=14;break e;case Bo:o=16,r=null;break e}throw Error(Ae(130,n==null?n:typeof n,""))}return e=Mi(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function nl(n,e,t,r){return n=Mi(7,n,r,e),n.lanes=t,n}function i0(n,e,t,r){return n=Mi(22,n,r,e),n.elementType=o2,n.lanes=t,n.stateNode={isHidden:!1},n}function dy(n,e,t){return n=Mi(6,n,null,e),n.lanes=t,n}function hy(n,e,t){return e=Mi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function jN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xv(0),this.expirationTimes=Xv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _S(n,e,t,r,i,s,o,a,l){return n=new jN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mi(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},nS(s),n}function XN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ec,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function JR(n){if(!n)return ca;n=n._reactInternals;e:{if(El(n)!==n||n.tag!==1)throw Error(Ae(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(n.tag===1){var t=n.type;if(Vr(t))return Z2(n,t,e)}return e}function QR(n,e,t,r,i,s,o,a,l){return n=_S(t,r,!0,n,i,s,o,a,l),n.context=JR(null),t=n.current,r=br(),i=na(t),s=no(r,i),s.callback=e??null,ea(t,s,i),n.current.lanes=i,Bd(n,i,r),Gr(n,r),n}function s0(n,e,t,r){var i=e.current,s=br(),o=na(i);return t=JR(t),e.context===null?e.context=t:e.pendingContext=t,e=no(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ea(i,e,o),n!==null&&(Xi(n,i,o,s),km(n,i,o)),o}function wg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ET(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function xS(n,e){ET(n,e),(n=n.alternate)&&ET(n,e)}function YN(){return null}var eP=typeof reportError=="function"?reportError:function(n){console.error(n)};function SS(n){this._internalRoot=n}o0.prototype.render=SS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ae(409));s0(n,e,null,null)};o0.prototype.unmount=SS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;hl(function(){s0(null,n,null,null)}),e[uo]=null}};function o0(n){this._internalRoot=n}o0.prototype.unstable_scheduleHydration=function(n){if(n){var e=P2();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Wo.length&&e!==0&&e<Wo[t].priority;t++);Wo.splice(t,0,n),t===0&&I2(n)}};function wS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function MT(){}function qN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=wg(o);s.call(u)}}var o=QR(e,r,n,0,null,!1,!1,"",MT);return n._reactRootContainer=o,n[uo]=o.current,ud(n.nodeType===8?n.parentNode:n),hl(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=wg(l);a.call(u)}}var l=_S(n,0,!1,null,null,!1,!1,"",MT);return n._reactRootContainer=l,n[uo]=l.current,ud(n.nodeType===8?n.parentNode:n),hl(function(){s0(e,l,t,r)}),l}function l0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wg(o);a.call(l)}}s0(e,o,n,i)}else o=qN(t,e,n,i,r);return wg(o)}C2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Pf(e.pendingLanes);t!==0&&(H1(e,t|1),Gr(e,Cn()),!(Dt&6)&&(iu=Cn()+500,ya()))}break;case 13:hl(function(){var r=fo(n,1);if(r!==null){var i=br();Xi(r,n,1,i)}}),xS(n,1)}};V1=function(n){if(n.tag===13){var e=fo(n,134217728);if(e!==null){var t=br();Xi(e,n,134217728,t)}xS(n,134217728)}};R2=function(n){if(n.tag===13){var e=na(n),t=fo(n,e);if(t!==null){var r=br();Xi(t,n,e,r)}xS(n,e)}};P2=function(){return zt};L2=function(n,e){var t=zt;try{return zt=n,e()}finally{zt=t}};I_=function(n,e,t){switch(e){case"input":if(T_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Jg(r);if(!i)throw Error(Ae(90));l2(r),T_(r,i)}}}break;case"textarea":u2(n,t);break;case"select":e=t.value,e!=null&&Hc(n,!!t.multiple,e,!1)}};v2=mS;y2=hl;var KN={usingClientEntryPoint:!1,Events:[Vd,Cc,Jg,m2,g2,mS]},uf={findFiberByHostInstance:ja,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZN={bundleType:uf.bundleType,version:uf.version,rendererPackageName:uf.rendererPackageName,rendererConfig:uf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=S2(n),n===null?null:n.stateNode},findFiberByHostInstance:uf.findFiberByHostInstance||YN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lp.isDisabled&&Lp.supportsFiber)try{Yg=Lp.inject(ZN),Ss=Lp}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KN;ai.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wS(e))throw Error(Ae(200));return XN(n,e,null,t)};ai.createRoot=function(n,e){if(!wS(n))throw Error(Ae(299));var t=!1,r="",i=eP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_S(n,1,!1,null,null,t,!1,r,i),n[uo]=e.current,ud(n.nodeType===8?n.parentNode:n),new SS(e)};ai.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ae(188)):(n=Object.keys(n).join(","),Error(Ae(268,n)));return n=S2(e),n=n===null?null:n.stateNode,n};ai.flushSync=function(n){return hl(n)};ai.hydrate=function(n,e,t){if(!a0(e))throw Error(Ae(200));return l0(null,n,e,!0,t)};ai.hydrateRoot=function(n,e,t){if(!wS(n))throw Error(Ae(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=eP;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=QR(e,null,n,1,t??null,i,!1,s,o),n[uo]=e.current,ud(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new o0(e)};ai.render=function(n,e,t){if(!a0(e))throw Error(Ae(200));return l0(null,n,e,!1,t)};ai.unmountComponentAtNode=function(n){if(!a0(n))throw Error(Ae(40));return n._reactRootContainer?(hl(function(){l0(null,null,n,!1,function(){n._reactRootContainer=null,n[uo]=null})}),!0):!1};ai.unstable_batchedUpdates=mS;ai.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!a0(t))throw Error(Ae(200));if(n==null||n._reactInternals===void 0)throw Error(Ae(38));return l0(n,e,t,!1,r)};ai.version="18.2.0-next-9e3b772b8-20220608";function tP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tP)}catch(n){console.error(n)}}tP(),QC.exports=ai;var Wd=QC.exports;const nP=Sl(Wd);var TT=Wd;y_.createRoot=TT.createRoot,y_.hydrateRoot=TT.hydrateRoot;function wn(){return wn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const c0="153",Ys={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rP=0,fx=1,iP=2,JN=3,sP=0,u0=1,Wf=2,Hi=3,po=0,Ar=1,vs=2,QN=2,ro=0,rl=1,dx=2,hx=3,px=4,oP=5,Wa=100,aP=101,lP=102,mx=103,gx=104,cP=200,uP=201,fP=202,dP=203,ES=204,MS=205,hP=206,pP=207,mP=208,gP=209,vP=210,yP=0,_P=1,xP=2,Eg=3,SP=4,wP=5,EP=6,MP=7,$d=0,TP=1,bP=2,Yi=0,AP=1,CP=2,RP=3,f0=4,PP=5,d0=300,ua=301,fa=302,su=303,_d=304,wu=306,pl=1e3,Yn=1001,xd=1002,An=1003,Mg=1004,eU=1004,$f=1005,tU=1005,Rn=1006,TS=1007,nU=1007,da=1008,rU=1008,Es=1009,LP=1010,IP=1011,h0=1012,bS=1013,to=1014,ys=1015,ou=1016,AS=1017,CS=1018,ia=1020,DP=1021,Fr=1023,OP=1024,kP=1025,sa=1026,ml=1027,NP=1028,RS=1029,UP=1030,PS=1031,LS=1033,Vm=33776,Gm=33777,Wm=33778,$m=33779,vx=35840,yx=35841,_x=35842,xx=35843,FP=36196,Sx=37492,wx=37496,Ex=37808,Mx=37809,Tx=37810,bx=37811,Ax=37812,Cx=37813,Rx=37814,Px=37815,Lx=37816,Ix=37817,Dx=37818,Ox=37819,kx=37820,Nx=37821,jm=36492,zP=36283,Ux=36284,Fx=36285,zx=36286,BP=2200,HP=2201,VP=2202,Sd=2300,wd=2301,Xm=2302,qa=2400,Ka=2401,Ed=2402,p0=2500,IS=2501,iU=0,sU=1,oU=2,DS=3e3,oa=3001,GP=3200,WP=3201,_a=0,$P=1,aa="",vt="srgb",Zi="srgb-linear",OS="display-p3",aU=0,Ym=7680,lU=7681,cU=7682,uU=7683,fU=34055,dU=34056,hU=5386,pU=512,mU=513,gU=514,vU=515,yU=516,_U=517,xU=518,jP=519,XP=512,YP=513,qP=514,KP=515,ZP=516,JP=517,QP=518,e3=519,Md=35044,SU=35048,wU=35040,EU=35045,MU=35049,TU=35041,bU=35046,AU=35050,CU=35042,RU="100",Bx="300 es",Tg=1035,_s=2e3,Td=2001;class Rs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const fr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bT=1234567;const il=Math.PI/180,au=180/Math.PI;function si(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(fr[n&255]+fr[n>>8&255]+fr[n>>16&255]+fr[n>>24&255]+"-"+fr[e&255]+fr[e>>8&255]+"-"+fr[e>>16&15|64]+fr[e>>24&255]+"-"+fr[t&63|128]+fr[t>>8&255]+"-"+fr[t>>16&255]+fr[t>>24&255]+fr[r&255]+fr[r>>8&255]+fr[r>>16&255]+fr[r>>24&255]).toLowerCase()}function xn(n,e,t){return Math.max(e,Math.min(t,n))}function kS(n,e){return(n%e+e)%e}function PU(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function LU(n,e,t){return n!==e?(t-n)/(e-n):0}function jf(n,e,t){return(1-t)*n+t*e}function IU(n,e,t,r){return jf(n,e,1-Math.exp(-t*r))}function DU(n,e=1){return e-Math.abs(kS(n,e*2)-e)}function OU(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function kU(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function NU(n,e){return n+Math.floor(Math.random()*(e-n+1))}function UU(n,e){return n+Math.random()*(e-n)}function FU(n){return n*(.5-Math.random())}function zU(n){n!==void 0&&(bT=n);let e=bT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function BU(n){return n*il}function HU(n){return n*au}function Hx(n){return(n&n-1)===0&&n!==0}function t3(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function bg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function VU(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),d=o((e+r)/2),h=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*d,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*d,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*d,a*u);break;case"XZX":n.set(a*d,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*d,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*d,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ni(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Et(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const $i={DEG2RAD:il,RAD2DEG:au,generateUUID:si,clamp:xn,euclideanModulo:kS,mapLinear:PU,inverseLerp:LU,lerp:jf,damp:IU,pingpong:DU,smoothstep:OU,smootherstep:kU,randInt:NU,randFloat:UU,randFloatSpread:FU,seededRandom:zU,degToRad:BU,radToDeg:HU,isPowerOfTwo:Hx,ceilPowerOfTwo:t3,floorPowerOfTwo:bg,setQuaternionFromProperEuler:VU,normalize:Et,denormalize:ni};class ve{constructor(e=0,t=0){ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _t{constructor(e,t,r,i,s,o,a,l,u){_t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],d=r[4],h=r[7],p=r[2],m=r[5],v=r[8],S=i[0],_=i[3],g=i[6],x=i[1],w=i[4],M=i[7],A=i[2],b=i[5],I=i[8];return s[0]=o*S+a*x+l*A,s[3]=o*_+a*w+l*b,s[6]=o*g+a*M+l*I,s[1]=u*S+d*x+h*A,s[4]=u*_+d*w+h*b,s[7]=u*g+d*M+h*I,s[2]=p*S+m*x+v*A,s[5]=p*_+m*w+v*b,s[8]=p*g+m*M+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8];return t*o*d-t*a*u-r*s*d+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=d*o-a*u,p=a*l-d*s,m=u*s-o*l,v=t*h+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=h*S,e[1]=(i*u-d*r)*S,e[2]=(a*r-i*o)*S,e[3]=p*S,e[4]=(d*t-i*l)*S,e[5]=(i*s-a*t)*S,e[6]=m*S,e[7]=(r*l-u*t)*S,e[8]=(o*t-r*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(py.makeScale(e,t)),this}rotate(e){return this.premultiply(py.makeRotation(-e)),this}translate(e,t){return this.premultiply(py.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const py=new _t;function n3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const GU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kc(n,e){return new GU[n](e)}function bd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const AT={};function Xf(n){n in AT||(AT[n]=!0,console.warn(n))}function Xc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function my(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const WU=new _t().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),$U=new _t().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function jU(n){return n.convertSRGBToLinear().applyMatrix3($U)}function XU(n){return n.applyMatrix3(WU).convertLinearToSRGB()}const YU={[Zi]:n=>n,[vt]:n=>n.convertSRGBToLinear(),[OS]:jU},qU={[Zi]:n=>n,[vt]:n=>n.convertLinearToSRGB(),[OS]:XU},yi={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Zi},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=YU[e],i=qU[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let jl;class NS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{jl===void 0&&(jl=bd("canvas")),jl.width=e.width,jl.height=e.height;const r=jl.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=jl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bd("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Xc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Xc(t[r]/255)*255):t[r]=Xc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let KU=0;class Za{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:KU++}),this.uuid=si(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(gy(i[o].image)):s.push(gy(i[o]))}else s=gy(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function gy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?NS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ZU=0;class rn extends Rs{constructor(e=rn.DEFAULT_IMAGE,t=rn.DEFAULT_MAPPING,r=Yn,i=Yn,s=Rn,o=da,a=Fr,l=Es,u=rn.DEFAULT_ANISOTROPY,d=aa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ZU++}),this.uuid=si(),this.name="",this.source=new Za(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===oa?vt:aa),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==d0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pl:e.x=e.x-Math.floor(e.x);break;case Yn:e.x=e.x<0?0:1;break;case xd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pl:e.y=e.y-Math.floor(e.y);break;case Yn:e.y=e.y<0?0:1;break;case xd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===vt?oa:DS}set encoding(e){Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===oa?vt:aa}}rn.DEFAULT_IMAGE=null;rn.DEFAULT_MAPPING=d0;rn.DEFAULT_ANISOTROPY=1;class It{constructor(e=0,t=0,r=0,i=1){It.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],d=l[4],h=l[8],p=l[1],m=l[5],v=l[9],S=l[2],_=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-S)<.01&&Math.abs(v-_)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+S)<.1&&Math.abs(v+_)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(u+1)/2,M=(m+1)/2,A=(g+1)/2,b=(d+p)/4,I=(h+S)/4,L=(v+_)/4;return w>M&&w>A?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=b/r,s=I/r):M>A?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=b/i,s=L/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=I/s,i=L/s),this.set(r,i,s,t),this}let x=Math.sqrt((_-v)*(_-v)+(h-S)*(h-S)+(p-d)*(p-d));return Math.abs(x)<.001&&(x=1),this.x=(_-v)/x,this.y=(h-S)/x,this.z=(p-d)/x,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ji extends Rs{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new It(0,0,e,t),this.scissorTest=!1,this.viewport=new It(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Xf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===oa?vt:aa),this.texture=new rn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Rn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Za(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class m0 extends rn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=An,this.minFilter=An,this.wrapR=Yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class JU extends Ji{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new m0(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class US extends rn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=An,this.minFilter=An,this.wrapR=Yn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class QU extends Ji{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new US(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class eF extends Ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class kn{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],d=r[i+2],h=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],S=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=S;return}if(h!==S||l!==p||u!==m||d!==v){let _=1-a;const g=l*p+u*m+d*v+h*S,x=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const A=Math.sqrt(w),b=Math.atan2(A,g*x);_=Math.sin(_*b)/A,a=Math.sin(a*b)/A}const M=a*x;if(l=l*_+p*M,u=u*_+m*M,d=d*_+v*M,h=h*_+S*M,_===1-a){const A=1/Math.sqrt(l*l+u*u+d*d+h*h);l*=A,u*=A,d*=A,h*=A}}e[t]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],d=r[i+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+d*h+l*m-u*p,e[t+1]=l*v+d*p+u*h-a*m,e[t+2]=u*v+d*m+a*p-l*h,e[t+3]=d*v-a*h-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),d=a(i/2),h=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*h+u*m*v,this._y=u*m*h-p*d*v,this._z=u*d*v+p*m*h,this._w=u*d*h-p*m*v;break;case"YXZ":this._x=p*d*h+u*m*v,this._y=u*m*h-p*d*v,this._z=u*d*v-p*m*h,this._w=u*d*h+p*m*v;break;case"ZXY":this._x=p*d*h-u*m*v,this._y=u*m*h+p*d*v,this._z=u*d*v+p*m*h,this._w=u*d*h-p*m*v;break;case"ZYX":this._x=p*d*h-u*m*v,this._y=u*m*h+p*d*v,this._z=u*d*v-p*m*h,this._w=u*d*h+p*m*v;break;case"YZX":this._x=p*d*h+u*m*v,this._y=u*m*h+p*d*v,this._z=u*d*v-p*m*h,this._w=u*d*h-p*m*v;break;case"XZY":this._x=p*d*h-u*m*v,this._y=u*m*h-p*d*v,this._z=u*d*v+p*m*h,this._w=u*d*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],d=t[6],h=t[10],p=r+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>h){const m=2*Math.sqrt(1+r-a-h);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>h){const m=2*Math.sqrt(1+a-r-h);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,d=t._w;return this._x=r*d+o*a+i*u-s*l,this._y=i*d+o*l+s*a-r*u,this._z=s*d+o*u+r*l-i*a,this._w=o*d-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),d=Math.atan2(u,a),h=Math.sin((1-t)*d)/u,p=Math.sin(t*d)/u;return this._w=o*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,r=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,d=l*r+a*t-s*i,h=l*i+s*r-o*t,p=-s*t-o*r-a*i;return this.x=u*l+p*-s+d*-a-h*-o,this.y=d*l+p*-o+h*-s-u*-a,this.z=h*l+p*-a+u*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return vy.copy(this).projectOnVector(e),this.sub(vy)}reflect(e){return this.sub(vy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vy=new U,CT=new kn;class Ps{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(zs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(zs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=zs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Xl.copy(e.boundingBox),Xl.applyMatrix4(e.matrixWorld),this.union(Xl);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)zs.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(zs)}else i.boundingBox===null&&i.computeBoundingBox(),Xl.copy(i.boundingBox),Xl.applyMatrix4(e.matrixWorld),this.union(Xl)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zs),zs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ff),Ip.subVectors(this.max,ff),Yl.subVectors(e.a,ff),ql.subVectors(e.b,ff),Kl.subVectors(e.c,ff),Do.subVectors(ql,Yl),Oo.subVectors(Kl,ql),La.subVectors(Yl,Kl);let t=[0,-Do.z,Do.y,0,-Oo.z,Oo.y,0,-La.z,La.y,Do.z,0,-Do.x,Oo.z,0,-Oo.x,La.z,0,-La.x,-Do.y,Do.x,0,-Oo.y,Oo.x,0,-La.y,La.x,0];return!yy(t,Yl,ql,Kl,Ip)||(t=[1,0,0,0,1,0,0,0,1],!yy(t,Yl,ql,Kl,Ip))?!1:(Dp.crossVectors(Do,Oo),t=[Dp.x,Dp.y,Dp.z],yy(t,Yl,ql,Kl,Ip))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fs=[new U,new U,new U,new U,new U,new U,new U,new U],zs=new U,Xl=new Ps,Yl=new U,ql=new U,Kl=new U,Do=new U,Oo=new U,La=new U,ff=new U,Ip=new U,Dp=new U,Ia=new U;function yy(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ia.fromArray(n,s);const a=i.x*Math.abs(Ia.x)+i.y*Math.abs(Ia.y)+i.z*Math.abs(Ia.z),l=e.dot(Ia),u=t.dot(Ia),d=r.dot(Ia);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>a)return!1}return!0}const tF=new Ps,df=new U,_y=new U;class ts{constructor(e=new U,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):tF.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;df.subVectors(e,this.center);const t=df.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(df,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_y.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(df.copy(e.center).add(_y)),this.expandByPoint(df.copy(e.center).sub(_y))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bs=new U,xy=new U,Op=new U,ko=new U,Sy=new U,kp=new U,wy=new U;class Eu{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Bs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bs.copy(this.origin).addScaledVector(this.direction,t),Bs.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){xy.copy(e).add(t).multiplyScalar(.5),Op.copy(t).sub(e).normalize(),ko.copy(this.origin).sub(xy);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Op),a=ko.dot(this.direction),l=-ko.dot(Op),u=ko.lengthSq(),d=Math.abs(1-o*o);let h,p,m,v;if(d>0)if(h=o*l-a,p=o*a-l,v=s*d,h>=0)if(p>=-v)if(p<=v){const S=1/d;h*=S,p*=S,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+u}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(xy).addScaledVector(Op,p),m}intersectSphere(e,t){Bs.subVectors(e.center,this.origin);const r=Bs.dot(this.direction),i=Bs.dot(Bs)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Bs)!==null}intersectTriangle(e,t,r,i,s){Sy.subVectors(t,e),kp.subVectors(r,e),wy.crossVectors(Sy,kp);let o=this.direction.dot(wy),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ko.subVectors(this.origin,e);const l=a*this.direction.dot(kp.crossVectors(ko,kp));if(l<0)return null;const u=a*this.direction.dot(Sy.cross(ko));if(u<0||l+u>o)return null;const d=-a*ko.dot(wy);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qe{constructor(e,t,r,i,s,o,a,l,u,d,h,p,m,v,S,_){qe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,d,h,p,m,v,S,_)}set(e,t,r,i,s,o,a,l,u,d,h,p,m,v,S,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=d,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=S,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qe().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Zl.setFromMatrixColumn(e,0).length(),s=1/Zl.setFromMatrixColumn(e,1).length(),o=1/Zl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*h,v=a*d,S=a*h;t[0]=l*d,t[4]=-l*h,t[8]=u,t[1]=m+v*u,t[5]=p-S*u,t[9]=-a*l,t[2]=S-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*h,v=u*d,S=u*h;t[0]=p+S*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=m*a-v,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*h,v=u*d,S=u*h;t[0]=p-S*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*d,t[9]=S-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*h,v=a*d,S=a*h;t[0]=l*d,t[4]=v*u-m,t[8]=p*u+S,t[1]=l*h,t[5]=S*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*d,t[4]=S-p*h,t[8]=v*h+m,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-u*d,t[6]=m*h+v,t[10]=p-S*h}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*d,t[4]=-h,t[8]=u*d,t[1]=p*h+S,t[5]=o*d,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*d,t[10]=S*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nF,e,rF)}lookAt(e,t,r){const i=this.elements;return Jr.subVectors(e,t),Jr.lengthSq()===0&&(Jr.z=1),Jr.normalize(),No.crossVectors(r,Jr),No.lengthSq()===0&&(Math.abs(r.z)===1?Jr.x+=1e-4:Jr.z+=1e-4,Jr.normalize(),No.crossVectors(r,Jr)),No.normalize(),Np.crossVectors(Jr,No),i[0]=No.x,i[4]=Np.x,i[8]=Jr.x,i[1]=No.y,i[5]=Np.y,i[9]=Jr.y,i[2]=No.z,i[6]=Np.z,i[10]=Jr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],d=r[1],h=r[5],p=r[9],m=r[13],v=r[2],S=r[6],_=r[10],g=r[14],x=r[3],w=r[7],M=r[11],A=r[15],b=i[0],I=i[4],L=i[8],R=i[12],P=i[1],k=i[5],V=i[9],H=i[13],j=i[2],q=i[6],Z=i[10],ee=i[14],F=i[3],K=i[7],X=i[11],oe=i[15];return s[0]=o*b+a*P+l*j+u*F,s[4]=o*I+a*k+l*q+u*K,s[8]=o*L+a*V+l*Z+u*X,s[12]=o*R+a*H+l*ee+u*oe,s[1]=d*b+h*P+p*j+m*F,s[5]=d*I+h*k+p*q+m*K,s[9]=d*L+h*V+p*Z+m*X,s[13]=d*R+h*H+p*ee+m*oe,s[2]=v*b+S*P+_*j+g*F,s[6]=v*I+S*k+_*q+g*K,s[10]=v*L+S*V+_*Z+g*X,s[14]=v*R+S*H+_*ee+g*oe,s[3]=x*b+w*P+M*j+A*F,s[7]=x*I+w*k+M*q+A*K,s[11]=x*L+w*V+M*Z+A*X,s[15]=x*R+w*H+M*ee+A*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],d=e[2],h=e[6],p=e[10],m=e[14],v=e[3],S=e[7],_=e[11],g=e[15];return v*(+s*l*h-i*u*h-s*a*p+r*u*p+i*a*m-r*l*m)+S*(+t*l*m-t*u*p+s*o*p-i*o*m+i*u*d-s*l*d)+_*(+t*u*h-t*a*m-s*o*h+r*o*m+s*a*d-r*u*d)+g*(-i*a*d-t*l*h+t*a*p+i*o*h-r*o*p+r*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11],v=e[12],S=e[13],_=e[14],g=e[15],x=h*_*u-S*p*u+S*l*m-a*_*m-h*l*g+a*p*g,w=v*p*u-d*_*u-v*l*m+o*_*m+d*l*g-o*p*g,M=d*S*u-v*h*u+v*a*m-o*S*m-d*a*g+o*h*g,A=v*h*l-d*S*l-v*a*p+o*S*p+d*a*_-o*h*_,b=t*x+r*w+i*M+s*A;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/b;return e[0]=x*I,e[1]=(S*p*s-h*_*s-S*i*m+r*_*m+h*i*g-r*p*g)*I,e[2]=(a*_*s-S*l*s+S*i*u-r*_*u-a*i*g+r*l*g)*I,e[3]=(h*l*s-a*p*s-h*i*u+r*p*u+a*i*m-r*l*m)*I,e[4]=w*I,e[5]=(d*_*s-v*p*s+v*i*m-t*_*m-d*i*g+t*p*g)*I,e[6]=(v*l*s-o*_*s-v*i*u+t*_*u+o*i*g-t*l*g)*I,e[7]=(o*p*s-d*l*s+d*i*u-t*p*u-o*i*m+t*l*m)*I,e[8]=M*I,e[9]=(v*h*s-d*S*s-v*r*m+t*S*m+d*r*g-t*h*g)*I,e[10]=(o*S*s-v*a*s+v*r*u-t*S*u-o*r*g+t*a*g)*I,e[11]=(d*a*s-o*h*s-d*r*u+t*h*u+o*r*m-t*a*m)*I,e[12]=A*I,e[13]=(d*S*i-v*h*i+v*r*p-t*S*p-d*r*_+t*h*_)*I,e[14]=(v*a*i-o*S*i-v*r*l+t*S*l+o*r*_-t*a*_)*I,e[15]=(o*h*i-d*a*i+d*r*l-t*h*l-o*r*p+t*a*p)*I,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,d=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,d*a+r,d*l-i*o,0,u*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,d=o+o,h=a+a,p=s*u,m=s*d,v=s*h,S=o*d,_=o*h,g=a*h,x=l*u,w=l*d,M=l*h,A=r.x,b=r.y,I=r.z;return i[0]=(1-(S+g))*A,i[1]=(m+M)*A,i[2]=(v-w)*A,i[3]=0,i[4]=(m-M)*b,i[5]=(1-(p+g))*b,i[6]=(_+x)*b,i[7]=0,i[8]=(v+w)*I,i[9]=(_-x)*I,i[10]=(1-(p+S))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Zl.set(i[0],i[1],i[2]).length();const o=Zl.set(i[4],i[5],i[6]).length(),a=Zl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ni.copy(this);const u=1/s,d=1/o,h=1/a;return Ni.elements[0]*=u,Ni.elements[1]*=u,Ni.elements[2]*=u,Ni.elements[4]*=d,Ni.elements[5]*=d,Ni.elements[6]*=d,Ni.elements[8]*=h,Ni.elements[9]*=h,Ni.elements[10]*=h,t.setFromRotationMatrix(Ni),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=_s){const l=this.elements,u=2*s/(t-e),d=2*s/(r-i),h=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===_s)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Td)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=_s){const l=this.elements,u=1/(t-e),d=1/(r-i),h=1/(o-s),p=(t+e)*u,m=(r+i)*d;let v,S;if(a===_s)v=(o+s)*h,S=-2*h;else if(a===Td)v=s*h,S=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=S,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Zl=new U,Ni=new qe,nF=new U(0,0,0),rF=new U(1,1,1),No=new U,Np=new U,Jr=new U,RT=new qe,PT=new kn;class xs{constructor(e=0,t=0,r=0,i=xs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],d=i[9],h=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-xn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(xn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-xn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return RT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(RT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return PT.setFromEuler(this),this.setFromQuaternion(PT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xs.DEFAULT_ORDER="XYZ";class sl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let iF=0;const LT=new U,Jl=new kn,Hs=new qe,Up=new U,hf=new U,sF=new U,oF=new kn,IT=new U(1,0,0),DT=new U(0,1,0),OT=new U(0,0,1),aF={type:"added"},kT={type:"removed"};class Lt extends Rs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:iF++}),this.uuid=si(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DEFAULT_UP.clone();const e=new U,t=new xs,r=new kn,i=new U(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new qe},normalMatrix:{value:new _t}}),this.matrix=new qe,this.matrixWorld=new qe,this.matrixAutoUpdate=Lt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new sl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Jl.setFromAxisAngle(e,t),this.quaternion.multiply(Jl),this}rotateOnWorldAxis(e,t){return Jl.setFromAxisAngle(e,t),this.quaternion.premultiply(Jl),this}rotateX(e){return this.rotateOnAxis(IT,e)}rotateY(e){return this.rotateOnAxis(DT,e)}rotateZ(e){return this.rotateOnAxis(OT,e)}translateOnAxis(e,t){return LT.copy(e).applyQuaternion(this.quaternion),this.position.add(LT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(IT,e)}translateY(e){return this.translateOnAxis(DT,e)}translateZ(e){return this.translateOnAxis(OT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Hs.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Up.copy(e):Up.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),hf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hs.lookAt(hf,Up,this.up):Hs.lookAt(Up,hf,this.up),this.quaternion.setFromRotationMatrix(Hs),i&&(Hs.extractRotation(i.matrixWorld),Jl.setFromRotationMatrix(Hs),this.quaternion.premultiply(Jl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(aF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(kT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(kT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Hs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Hs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Hs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hf,e,sF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hf,oF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),d=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Lt.DEFAULT_UP=new U(0,1,0);Lt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ui=new U,Vs=new U,Ey=new U,Gs=new U,Ql=new U,ec=new U,NT=new U,My=new U,Ty=new U,by=new U;let Fp=!1;class Ur{constructor(e=new U,t=new U,r=new U){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ui.subVectors(e,t),i.cross(Ui);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ui.subVectors(i,t),Vs.subVectors(r,t),Ey.subVectors(e,t);const o=Ui.dot(Ui),a=Ui.dot(Vs),l=Ui.dot(Ey),u=Vs.dot(Vs),d=Vs.dot(Ey),h=o*u-a*a;if(h===0)return s.set(-2,-1,-1);const p=1/h,m=(u*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Gs),Gs.x>=0&&Gs.y>=0&&Gs.x+Gs.y<=1}static getUV(e,t,r,i,s,o,a,l){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Gs),l.setScalar(0),l.addScaledVector(s,Gs.x),l.addScaledVector(o,Gs.y),l.addScaledVector(a,Gs.z),l}static isFrontFacing(e,t,r,i){return Ui.subVectors(r,t),Vs.subVectors(e,t),Ui.cross(Vs).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ui.subVectors(this.c,this.b),Vs.subVectors(this.a,this.b),Ui.cross(Vs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ur.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ur.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),Ur.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Ur.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ur.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ur.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Ql.subVectors(i,r),ec.subVectors(s,r),My.subVectors(e,r);const l=Ql.dot(My),u=ec.dot(My);if(l<=0&&u<=0)return t.copy(r);Ty.subVectors(e,i);const d=Ql.dot(Ty),h=ec.dot(Ty);if(d>=0&&h<=d)return t.copy(i);const p=l*h-d*u;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(r).addScaledVector(Ql,o);by.subVectors(e,s);const m=Ql.dot(by),v=ec.dot(by);if(v>=0&&m<=v)return t.copy(s);const S=m*u-l*v;if(S<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(ec,a);const _=d*v-m*h;if(_<=0&&h-d>=0&&m-v>=0)return NT.subVectors(s,i),a=(h-d)/(h-d+(m-v)),t.copy(i).addScaledVector(NT,a);const g=1/(_+S+p);return o=S*g,a=p*g,t.copy(r).addScaledVector(Ql,o).addScaledVector(ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let lF=0;class nr extends Rs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lF++}),this.uuid=si(),this.name="",this.type="Material",this.blending=rl,this.side=po,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ES,this.blendDst=MS,this.blendEquation=Wa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Eg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ym,this.stencilZFail=Ym,this.stencilZPass=Ym,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==rl&&(r.blending=this.blending),this.side!==po&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const r3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fi={h:0,s:0,l:0},zp={h:0,s:0,l:0};function Ay(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ne=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=vt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=yi.workingColorSpace){return this.r=e,this.g=t,this.b=r,yi.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=yi.workingColorSpace){if(e=kS(e,1),t=xn(t,0,1),r=xn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=Ay(o,s,e+1/3),this.g=Ay(o,s,e),this.b=Ay(o,s,e-1/3)}return yi.toWorkingColorSpace(this,i),this}setStyle(e,t=vt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=vt){const r=r3[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xc(e.r),this.g=Xc(e.g),this.b=Xc(e.b),this}copyLinearToSRGB(e){return this.r=my(e.r),this.g=my(e.g),this.b=my(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vt){return yi.fromWorkingColorSpace(dr.copy(this),e),Math.round(xn(dr.r*255,0,255))*65536+Math.round(xn(dr.g*255,0,255))*256+Math.round(xn(dr.b*255,0,255))}getHexString(e=vt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yi.workingColorSpace){yi.fromWorkingColorSpace(dr.copy(this),t);const r=dr.r,i=dr.g,s=dr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const d=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=d<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,t=yi.workingColorSpace){return yi.fromWorkingColorSpace(dr.copy(this),t),e.r=dr.r,e.g=dr.g,e.b=dr.b,e}getStyle(e=vt){yi.fromWorkingColorSpace(dr.copy(this),e);const t=dr.r,r=dr.g,i=dr.b;return e!==vt?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Fi),Fi.h+=e,Fi.s+=t,Fi.l+=r,this.setHSL(Fi.h,Fi.s,Fi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Fi),e.getHSL(zp);const r=jf(Fi.h,zp.h,t),i=jf(Fi.s,zp.s,t),s=jf(Fi.l,zp.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const dr=new Ne;Ne.NAMES=r3;class _o extends nr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$d,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zs=cF();function cF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Dr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=xn(n,-65504,65504),Zs.floatView[0]=n;const e=Zs.uint32View[0],t=e>>23&511;return Zs.baseTable[t]+((e&8388607)>>Zs.shiftTable[t])}function If(n){const e=n>>10;return Zs.uint32View[0]=Zs.mantissaTable[Zs.offsetTable[e]+(n&1023)]+Zs.exponentTable[e],Zs.floatView[0]}const uF={toHalfFloat:Dr,fromHalfFloat:If},Dn=new U,Bp=new ve;class $t{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Md,this.updateRange={offset:0,count:-1},this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Bp.fromBufferAttribute(this,t),Bp.applyMatrix3(e),this.setXY(t,Bp.x,Bp.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix3(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ni(t,this.array)),t}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ni(t,this.array)),t}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ni(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ni(t,this.array)),t}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Md&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class fF extends $t{constructor(e,t,r){super(new Int8Array(e),t,r)}}class dF extends $t{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class hF extends $t{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class pF extends $t{constructor(e,t,r){super(new Int16Array(e),t,r)}}class g0 extends $t{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class mF extends $t{constructor(e,t,r){super(new Int32Array(e),t,r)}}class FS extends $t{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class gF extends $t{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=If(this.array[e*this.itemSize]);return this.normalized&&(t=ni(t,this.array)),t}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize]=Dr(t),this}getY(e){let t=If(this.array[e*this.itemSize+1]);return this.normalized&&(t=ni(t,this.array)),t}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+1]=Dr(t),this}getZ(e){let t=If(this.array[e*this.itemSize+2]);return this.normalized&&(t=ni(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+2]=Dr(t),this}getW(e){let t=If(this.array[e*this.itemSize+3]);return this.normalized&&(t=ni(t,this.array)),t}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+3]=Dr(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(r),this.array[e+2]=Dr(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(r),this.array[e+2]=Dr(i),this.array[e+3]=Dr(s),this}}class Ge extends $t{constructor(e,t,r){super(new Float32Array(e),t,r)}}class vF extends $t{constructor(e,t,r){super(new Float64Array(e),t,r)}}let yF=0;const vi=new qe,Cy=new Lt,tc=new U,Qr=new Ps,pf=new Ps,$n=new U;class dt extends Rs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yF++}),this.uuid=si(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(n3(e)?FS:g0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new _t().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vi.makeRotationFromQuaternion(e),this.applyMatrix4(vi),this}rotateX(e){return vi.makeRotationX(e),this.applyMatrix4(vi),this}rotateY(e){return vi.makeRotationY(e),this.applyMatrix4(vi),this}rotateZ(e){return vi.makeRotationZ(e),this.applyMatrix4(vi),this}translate(e,t,r){return vi.makeTranslation(e,t,r),this.applyMatrix4(vi),this}scale(e,t,r){return vi.makeScale(e,t,r),this.applyMatrix4(vi),this}lookAt(e){return Cy.lookAt(e),Cy.updateMatrix(),this.applyMatrix4(Cy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tc).negate(),this.translate(tc.x,tc.y,tc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ps);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Qr.setFromBufferAttribute(s),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,Qr.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,Qr.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(Qr.min),this.boundingBox.expandByPoint(Qr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(e){const r=this.boundingSphere.center;if(Qr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];pf.setFromBufferAttribute(a),this.morphTargetsRelative?($n.addVectors(Qr.min,pf.min),Qr.expandByPoint($n),$n.addVectors(Qr.max,pf.max),Qr.expandByPoint($n)):(Qr.expandByPoint(pf.min),Qr.expandByPoint(pf.max))}Qr.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)$n.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared($n));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,d=a.count;u<d;u++)$n.fromBufferAttribute(a,u),l&&(tc.fromBufferAttribute(e,u),$n.add(tc)),i=Math.max(i,r.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $t(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let P=0;P<a;P++)u[P]=new U,d[P]=new U;const h=new U,p=new U,m=new U,v=new ve,S=new ve,_=new ve,g=new U,x=new U;function w(P,k,V){h.fromArray(i,P*3),p.fromArray(i,k*3),m.fromArray(i,V*3),v.fromArray(o,P*2),S.fromArray(o,k*2),_.fromArray(o,V*2),p.sub(h),m.sub(h),S.sub(v),_.sub(v);const H=1/(S.x*_.y-_.x*S.y);isFinite(H)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-S.y).multiplyScalar(H),x.copy(m).multiplyScalar(S.x).addScaledVector(p,-_.x).multiplyScalar(H),u[P].add(g),u[k].add(g),u[V].add(g),d[P].add(x),d[k].add(x),d[V].add(x))}let M=this.groups;M.length===0&&(M=[{start:0,count:r.length}]);for(let P=0,k=M.length;P<k;++P){const V=M[P],H=V.start,j=V.count;for(let q=H,Z=H+j;q<Z;q+=3)w(r[q+0],r[q+1],r[q+2])}const A=new U,b=new U,I=new U,L=new U;function R(P){I.fromArray(s,P*3),L.copy(I);const k=u[P];A.copy(k),A.sub(I.multiplyScalar(I.dot(k))).normalize(),b.crossVectors(L,k);const H=b.dot(d[P])<0?-1:1;l[P*4]=A.x,l[P*4+1]=A.y,l[P*4+2]=A.z,l[P*4+3]=H}for(let P=0,k=M.length;P<k;++P){const V=M[P],H=V.start,j=V.count;for(let q=H,Z=H+j;q<Z;q+=3)R(r[q+0]),R(r[q+1]),R(r[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new $t(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new U,s=new U,o=new U,a=new U,l=new U,u=new U,d=new U,h=new U;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),S=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,_),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,S),u.fromBufferAttribute(r,_),a.add(d),l.add(d),u.add(d),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)$n.fromBufferAttribute(e,t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)}toNonIndexed(){function e(a,l){const u=a.array,d=a.itemSize,h=a.normalized,p=new u.constructor(l.length*d);let m=0,v=0;for(let S=0,_=l.length;S<_;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*d;for(let g=0;g<d;g++)p[v++]=u[m++]}return new $t(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let d=0,h=u.length;d<h;d++){const p=u[d],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let h=0,p=u.length;h<p;h++){const m=u[h];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(t))}const s=e.morphAttributes;for(const u in s){const d=[],h=s[u];for(let p=0,m=h.length;p<m;p++)d.push(h[p].clone(t));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UT=new qe,Da=new Eu,Hp=new ts,FT=new U,nc=new U,rc=new U,ic=new U,Ry=new U,Vp=new U,Gp=new ve,Wp=new ve,$p=new ve,zT=new U,BT=new U,HT=new U,jp=new U,Xp=new U;class qn extends Lt{constructor(e=new dt,t=new _o){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Vp.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const d=a[l],h=s[l];d!==0&&(Ry.fromBufferAttribute(h,e),o?Vp.addScaledVector(Ry,d):Vp.addScaledVector(Ry.sub(t),d))}t.add(Vp)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Hp.copy(r.boundingSphere),Hp.applyMatrix4(s),Da.copy(e.ray).recast(e.near),!(Hp.containsPoint(Da.origin)===!1&&(Da.intersectSphere(Hp,FT)===null||Da.origin.distanceToSquared(FT)>(e.far-e.near)**2))&&(UT.copy(s).invert(),Da.copy(e.ray).applyMatrix4(UT),!(r.boundingBox!==null&&Da.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Da)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),w=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let M=x,A=w;M<A;M+=3){const b=a.getX(M),I=a.getX(M+1),L=a.getX(M+2);i=Yp(this,g,e,r,u,d,h,b,I,L),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),S=Math.min(a.count,m.start+m.count);for(let _=v,g=S;_<g;_+=3){const x=a.getX(_),w=a.getX(_+1),M=a.getX(_+2);i=Yp(this,o,e,r,u,d,h,x,w,M),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),w=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let M=x,A=w;M<A;M+=3){const b=M,I=M+1,L=M+2;i=Yp(this,g,e,r,u,d,h,b,I,L),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),S=Math.min(l.count,m.start+m.count);for(let _=v,g=S;_<g;_+=3){const x=_,w=_+1,M=_+2;i=Yp(this,o,e,r,u,d,h,x,w,M),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function _F(n,e,t,r,i,s,o,a){let l;if(e.side===Ar?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===po,a),l===null)return null;Xp.copy(a),Xp.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Xp);return u<t.near||u>t.far?null:{distance:u,point:Xp.clone(),object:n}}function Yp(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,nc),n.getVertexPosition(l,rc),n.getVertexPosition(u,ic);const d=_F(n,e,t,r,nc,rc,ic,jp);if(d){i&&(Gp.fromBufferAttribute(i,a),Wp.fromBufferAttribute(i,l),$p.fromBufferAttribute(i,u),d.uv=Ur.getInterpolation(jp,nc,rc,ic,Gp,Wp,$p,new ve)),s&&(Gp.fromBufferAttribute(s,a),Wp.fromBufferAttribute(s,l),$p.fromBufferAttribute(s,u),d.uv1=Ur.getInterpolation(jp,nc,rc,ic,Gp,Wp,$p,new ve),d.uv2=d.uv1),o&&(zT.fromBufferAttribute(o,a),BT.fromBufferAttribute(o,l),HT.fromBufferAttribute(o,u),d.normal=Ur.getInterpolation(jp,nc,rc,ic,zT,BT,HT,new U),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new U,materialIndex:0};Ur.getNormal(nc,rc,ic,h.normal),d.face=h}return d}class xa extends dt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],d=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ge(u,3)),this.setAttribute("normal",new Ge(d,3)),this.setAttribute("uv",new Ge(h,2));function v(S,_,g,x,w,M,A,b,I,L,R){const P=M/I,k=A/L,V=M/2,H=A/2,j=b/2,q=I+1,Z=L+1;let ee=0,F=0;const K=new U;for(let X=0;X<Z;X++){const oe=X*k-H;for(let W=0;W<q;W++){const he=W*P-V;K[S]=he*x,K[_]=oe*w,K[g]=j,u.push(K.x,K.y,K.z),K[S]=0,K[_]=0,K[g]=b>0?1:-1,d.push(K.x,K.y,K.z),h.push(W/I),h.push(1-X/L),ee+=1}}for(let X=0;X<L;X++)for(let oe=0;oe<I;oe++){const W=p+oe+q*X,he=p+oe+q*(X+1),le=p+(oe+1)+q*(X+1),Te=p+(oe+1)+q*X;l.push(W,he,Te),l.push(he,le,Te),F+=6}a.addGroup(m,F,R),m+=F,p+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function lu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function wr(n){const e={};for(let t=0;t<n.length;t++){const r=lu(n[t]);for(const i in r)e[i]=r[i]}return e}function xF(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function i3(n){return n.getRenderTarget()===null?n.outputColorSpace:Zi}const s3={clone:lu,merge:wr};var SF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ts extends nr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=SF,this.fragmentShader=wF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=lu(e.uniforms),this.uniformsGroups=xF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class jd extends Lt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qe,this.projectionMatrix=new qe,this.projectionMatrixInverse=new qe,this.coordinateSystem=_s}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Sn extends jd{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=au*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(il*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return au*2*Math.atan(Math.tan(il*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(il*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const sc=-90,oc=1;class o3 extends Lt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new Sn(sc,oc,e,t);i.layers=this.layers,this.add(i);const s=new Sn(sc,oc,e,t);s.layers=this.layers,this.add(s);const o=new Sn(sc,oc,e,t);o.layers=this.layers,this.add(o);const a=new Sn(sc,oc,e,t);a.layers=this.layers,this.add(a);const l=new Sn(sc,oc,e,t);l.layers=this.layers,this.add(l);const u=new Sn(sc,oc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===_s)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Td)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,u]=this.children,d=e.getRenderTarget(),h=e.toneMapping,p=e.xr.enabled;e.toneMapping=Yi,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Xd extends rn{constructor(e,t,r,i,s,o,a,l,u,d){e=e!==void 0?e:[],t=t!==void 0?t:ua,super(e,t,r,i,s,o,a,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class a3 extends Ji{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Xf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===oa?vt:aa),this.texture=new Xd(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new xa(5,5,5),s=new Ts({name:"CubemapFromEquirect",uniforms:lu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ar,blending:ro});s.uniforms.tEquirect.value=t;const o=new qn(i,s),a=t.minFilter;return t.minFilter===da&&(t.minFilter=Rn),new o3(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const Py=new U,EF=new U,MF=new _t;class Vo{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Py.subVectors(r,t).cross(EF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Py),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||MF.getNormalMatrix(e),i=this.coplanarPoint(Py).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Oa=new ts,qp=new U;class v0{constructor(e=new Vo,t=new Vo,r=new Vo,i=new Vo,s=new Vo,o=new Vo){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=_s){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],d=i[5],h=i[6],p=i[7],m=i[8],v=i[9],S=i[10],_=i[11],g=i[12],x=i[13],w=i[14],M=i[15];if(r[0].setComponents(l-s,p-u,_-m,M-g).normalize(),r[1].setComponents(l+s,p+u,_+m,M+g).normalize(),r[2].setComponents(l+o,p+d,_+v,M+x).normalize(),r[3].setComponents(l-o,p-d,_-v,M-x).normalize(),r[4].setComponents(l-a,p-h,_-S,M-w).normalize(),t===_s)r[5].setComponents(l+a,p+h,_+S,M+w).normalize();else if(t===Td)r[5].setComponents(a,h,S,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Oa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Oa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Oa)}intersectsSprite(e){return Oa.center.set(0,0,0),Oa.radius=.7071067811865476,Oa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Oa)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(qp.x=i.normal.x>0?e.max.x:e.min.x,qp.y=i.normal.y>0?e.max.y:e.min.y,qp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(qp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function l3(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function TF(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,d){const h=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(d,m),n.bufferData(d,h,p),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,h){const p=d.array,m=d.updateRange;n.bindBuffer(h,u),m.count===-1?n.bufferSubData(h,0,p):(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d&&(n.deleteBuffer(d.buffer),r.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,d)):h.version<u.version&&(s(h.buffer,u,d),h.version=u.version)}return{get:o,remove:a,update:l}}class Mu extends dt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,d=l+1,h=e/a,p=t/l,m=[],v=[],S=[],_=[];for(let g=0;g<d;g++){const x=g*p-o;for(let w=0;w<u;w++){const M=w*h-s;v.push(M,-x,0),S.push(0,0,1),_.push(w/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const w=x+u*g,M=x+u*(g+1),A=x+1+u*(g+1),b=x+1+u*g;m.push(w,M,b),m.push(M,A,b)}this.setIndex(m),this.setAttribute("position",new Ge(v,3)),this.setAttribute("normal",new Ge(S,3)),this.setAttribute("uv",new Ge(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.width,e.height,e.widthSegments,e.heightSegments)}}var bF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,AF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CF=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,RF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,PF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,LF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IF="vec3 transformed = vec3( position );",DF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,UF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,FF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,BF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,HF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,VF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,WF=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,$F=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,XF=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,YF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,KF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZF=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,JF="gl_FragColor = linearToOutputTexel( gl_FragColor );",QF=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ez=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,az=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uz=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_z=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Sz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wz=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ez=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Mz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Tz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Az=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Cz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Rz=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,Pz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Lz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Iz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Oz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kz=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Nz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Uz=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Fz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Bz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Hz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Wz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$z=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,jz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Xz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Yz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Kz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Zz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Jz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Qz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,iB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sB=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oB=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lB=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vB=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yB=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_B=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const SB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,wB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,TB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,AB=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,RB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,PB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kB=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,BB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,VB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$B=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,KB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZB=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,QB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,e4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wt={alphamap_fragment:bF,alphamap_pars_fragment:AF,alphatest_fragment:CF,alphatest_pars_fragment:RF,aomap_fragment:PF,aomap_pars_fragment:LF,begin_vertex:IF,beginnormal_vertex:DF,bsdfs:OF,iridescence_fragment:kF,bumpmap_pars_fragment:NF,clipping_planes_fragment:UF,clipping_planes_pars_fragment:FF,clipping_planes_pars_vertex:zF,clipping_planes_vertex:BF,color_fragment:HF,color_pars_fragment:VF,color_pars_vertex:GF,color_vertex:WF,common:$F,cube_uv_reflection_fragment:jF,defaultnormal_vertex:XF,displacementmap_pars_vertex:YF,displacementmap_vertex:qF,emissivemap_fragment:KF,emissivemap_pars_fragment:ZF,encodings_fragment:JF,encodings_pars_fragment:QF,envmap_fragment:ez,envmap_common_pars_fragment:tz,envmap_pars_fragment:nz,envmap_pars_vertex:rz,envmap_physical_pars_fragment:mz,envmap_vertex:iz,fog_vertex:sz,fog_pars_vertex:oz,fog_fragment:az,fog_pars_fragment:lz,gradientmap_pars_fragment:cz,lightmap_fragment:uz,lightmap_pars_fragment:fz,lights_lambert_fragment:dz,lights_lambert_pars_fragment:hz,lights_pars_begin:pz,lights_toon_fragment:gz,lights_toon_pars_fragment:vz,lights_phong_fragment:yz,lights_phong_pars_fragment:_z,lights_physical_fragment:xz,lights_physical_pars_fragment:Sz,lights_fragment_begin:wz,lights_fragment_maps:Ez,lights_fragment_end:Mz,logdepthbuf_fragment:Tz,logdepthbuf_pars_fragment:bz,logdepthbuf_pars_vertex:Az,logdepthbuf_vertex:Cz,map_fragment:Rz,map_pars_fragment:Pz,map_particle_fragment:Lz,map_particle_pars_fragment:Iz,metalnessmap_fragment:Dz,metalnessmap_pars_fragment:Oz,morphcolor_vertex:kz,morphnormal_vertex:Nz,morphtarget_pars_vertex:Uz,morphtarget_vertex:Fz,normal_fragment_begin:zz,normal_fragment_maps:Bz,normal_pars_fragment:Hz,normal_pars_vertex:Vz,normal_vertex:Gz,normalmap_pars_fragment:Wz,clearcoat_normal_fragment_begin:$z,clearcoat_normal_fragment_maps:jz,clearcoat_pars_fragment:Xz,iridescence_pars_fragment:Yz,output_fragment:qz,packing:Kz,premultiplied_alpha_fragment:Zz,project_vertex:Jz,dithering_fragment:Qz,dithering_pars_fragment:eB,roughnessmap_fragment:tB,roughnessmap_pars_fragment:nB,shadowmap_pars_fragment:rB,shadowmap_pars_vertex:iB,shadowmap_vertex:sB,shadowmask_pars_fragment:oB,skinbase_vertex:aB,skinning_pars_vertex:lB,skinning_vertex:cB,skinnormal_vertex:uB,specularmap_fragment:fB,specularmap_pars_fragment:dB,tonemapping_fragment:hB,tonemapping_pars_fragment:pB,transmission_fragment:mB,transmission_pars_fragment:gB,uv_pars_fragment:vB,uv_pars_vertex:yB,uv_vertex:_B,worldpos_vertex:xB,background_vert:SB,background_frag:wB,backgroundCube_vert:EB,backgroundCube_frag:MB,cube_vert:TB,cube_frag:bB,depth_vert:AB,depth_frag:CB,distanceRGBA_vert:RB,distanceRGBA_frag:PB,equirect_vert:LB,equirect_frag:IB,linedashed_vert:DB,linedashed_frag:OB,meshbasic_vert:kB,meshbasic_frag:NB,meshlambert_vert:UB,meshlambert_frag:FB,meshmatcap_vert:zB,meshmatcap_frag:BB,meshnormal_vert:HB,meshnormal_frag:VB,meshphong_vert:GB,meshphong_frag:WB,meshphysical_vert:$B,meshphysical_frag:jB,meshtoon_vert:XB,meshtoon_frag:YB,points_vert:qB,points_frag:KB,shadow_vert:ZB,shadow_frag:JB,sprite_vert:QB,sprite_frag:e4},ke={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _t},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _t}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _t},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0},uvTransform:{value:new _t}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _t},alphaMap:{value:null},alphaMapTransform:{value:new _t},alphaTest:{value:0}}},Wi={basic:{uniforms:wr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:wr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:wr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:wr([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:wr([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new Ne(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:wr([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:wr([ke.points,ke.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:wr([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:wr([ke.common,ke.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:wr([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:wt.meshnormal_vert,fragmentShader:wt.meshnormal_frag},sprite:{uniforms:wr([ke.sprite,ke.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new _t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:wt.backgroundCube_vert,fragmentShader:wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:wr([ke.common,ke.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:wr([ke.lights,ke.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};Wi.physical={uniforms:wr([Wi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _t},clearcoatNormalScale:{value:new ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _t},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _t},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _t},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _t},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _t},anisotropyVector:{value:new ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _t}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};const Kp={r:0,b:0,g:0};function t4(n,e,t,r,i,s,o){const a=new Ne(0);let l=s===!0?0:1,u,d,h=null,p=0,m=null;function v(_,g){let x=!1,w=g.isScene===!0?g.background:null;switch(w&&w.isTexture&&(w=(g.backgroundBlurriness>0?t:e).get(w)),w===null?S(a,l):w&&w.isColor&&(S(w,1),x=!0),n.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),x=!0;break}(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===wu)?(d===void 0&&(d=new qn(new xa(1,1,1),new Ts({name:"BackgroundCubeMaterial",uniforms:lu(Wi.backgroundCube.uniforms),vertexShader:Wi.backgroundCube.vertexShader,fragmentShader:Wi.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(b,I,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=w.colorSpace!==vt,(h!==w||p!==w.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,h=w,p=w.version,m=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new qn(new Mu(2,2),new Ts({name:"BackgroundMaterial",uniforms:lu(Wi.background.uniforms),vertexShader:Wi.background.vertexShader,fragmentShader:Wi.background.fragmentShader,side:po,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=w.colorSpace!==vt,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||p!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=w,p=w.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function S(_,g){_.getRGB(Kp,i3(n)),r.buffers.color.setClear(Kp.r,Kp.g,Kp.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,S(a,l)},render:v}}function n4(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let u=l,d=!1;function h(j,q,Z,ee,F){let K=!1;if(o){const X=S(ee,Z,q);u!==X&&(u=X,m(u.object)),K=g(j,ee,Z,F),K&&x(j,ee,Z,F)}else{const X=q.wireframe===!0;(u.geometry!==ee.id||u.program!==Z.id||u.wireframe!==X)&&(u.geometry=ee.id,u.program=Z.id,u.wireframe=X,K=!0)}F!==null&&t.update(F,n.ELEMENT_ARRAY_BUFFER),(K||d)&&(d=!1,L(j,q,Z,ee),F!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(j){return r.isWebGL2?n.bindVertexArray(j):s.bindVertexArrayOES(j)}function v(j){return r.isWebGL2?n.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function S(j,q,Z){const ee=Z.wireframe===!0;let F=a[j.id];F===void 0&&(F={},a[j.id]=F);let K=F[q.id];K===void 0&&(K={},F[q.id]=K);let X=K[ee];return X===void 0&&(X=_(p()),K[ee]=X),X}function _(j){const q=[],Z=[],ee=[];for(let F=0;F<i;F++)q[F]=0,Z[F]=0,ee[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:Z,attributeDivisors:ee,object:j,attributes:{},index:null}}function g(j,q,Z,ee){const F=u.attributes,K=q.attributes;let X=0;const oe=Z.getAttributes();for(const W in oe)if(oe[W].location>=0){const le=F[W];let Te=K[W];if(Te===void 0&&(W==="instanceMatrix"&&j.instanceMatrix&&(Te=j.instanceMatrix),W==="instanceColor"&&j.instanceColor&&(Te=j.instanceColor)),le===void 0||le.attribute!==Te||Te&&le.data!==Te.data)return!0;X++}return u.attributesNum!==X||u.index!==ee}function x(j,q,Z,ee){const F={},K=q.attributes;let X=0;const oe=Z.getAttributes();for(const W in oe)if(oe[W].location>=0){let le=K[W];le===void 0&&(W==="instanceMatrix"&&j.instanceMatrix&&(le=j.instanceMatrix),W==="instanceColor"&&j.instanceColor&&(le=j.instanceColor));const Te={};Te.attribute=le,le&&le.data&&(Te.data=le.data),F[W]=Te,X++}u.attributes=F,u.attributesNum=X,u.index=ee}function w(){const j=u.newAttributes;for(let q=0,Z=j.length;q<Z;q++)j[q]=0}function M(j){A(j,0)}function A(j,q){const Z=u.newAttributes,ee=u.enabledAttributes,F=u.attributeDivisors;Z[j]=1,ee[j]===0&&(n.enableVertexAttribArray(j),ee[j]=1),F[j]!==q&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,q),F[j]=q)}function b(){const j=u.newAttributes,q=u.enabledAttributes;for(let Z=0,ee=q.length;Z<ee;Z++)q[Z]!==j[Z]&&(n.disableVertexAttribArray(Z),q[Z]=0)}function I(j,q,Z,ee,F,K,X){X===!0?n.vertexAttribIPointer(j,q,Z,F,K):n.vertexAttribPointer(j,q,Z,ee,F,K)}function L(j,q,Z,ee){if(r.isWebGL2===!1&&(j.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const F=ee.attributes,K=Z.getAttributes(),X=q.defaultAttributeValues;for(const oe in K){const W=K[oe];if(W.location>=0){let he=F[oe];if(he===void 0&&(oe==="instanceMatrix"&&j.instanceMatrix&&(he=j.instanceMatrix),oe==="instanceColor"&&j.instanceColor&&(he=j.instanceColor)),he!==void 0){const le=he.normalized,Te=he.itemSize,we=t.get(he);if(we===void 0)continue;const Re=we.buffer,Ze=we.type,Qe=we.bytesPerElement,xt=r.isWebGL2===!0&&(Ze===n.INT||Ze===n.UNSIGNED_INT||he.gpuType===bS);if(he.isInterleavedBufferAttribute){const Ke=he.data,G=Ke.stride,_e=he.offset;if(Ke.isInstancedInterleavedBuffer){for(let pe=0;pe<W.locationSize;pe++)A(W.location+pe,Ke.meshPerAttribute);j.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Ke.meshPerAttribute*Ke.count)}else for(let pe=0;pe<W.locationSize;pe++)M(W.location+pe);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let pe=0;pe<W.locationSize;pe++)I(W.location+pe,Te/W.locationSize,Ze,le,G*Qe,(_e+Te/W.locationSize*pe)*Qe,xt)}else{if(he.isInstancedBufferAttribute){for(let Ke=0;Ke<W.locationSize;Ke++)A(W.location+Ke,he.meshPerAttribute);j.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ke=0;Ke<W.locationSize;Ke++)M(W.location+Ke);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Ke=0;Ke<W.locationSize;Ke++)I(W.location+Ke,Te/W.locationSize,Ze,le,Te*Qe,Te/W.locationSize*Ke*Qe,xt)}}else if(X!==void 0){const le=X[oe];if(le!==void 0)switch(le.length){case 2:n.vertexAttrib2fv(W.location,le);break;case 3:n.vertexAttrib3fv(W.location,le);break;case 4:n.vertexAttrib4fv(W.location,le);break;default:n.vertexAttrib1fv(W.location,le)}}}}b()}function R(){V();for(const j in a){const q=a[j];for(const Z in q){const ee=q[Z];for(const F in ee)v(ee[F].object),delete ee[F];delete q[Z]}delete a[j]}}function P(j){if(a[j.id]===void 0)return;const q=a[j.id];for(const Z in q){const ee=q[Z];for(const F in ee)v(ee[F].object),delete ee[F];delete q[Z]}delete a[j.id]}function k(j){for(const q in a){const Z=a[q];if(Z[j.id]===void 0)continue;const ee=Z[j.id];for(const F in ee)v(ee[F].object),delete ee[F];delete Z[j.id]}}function V(){H(),d=!0,u!==l&&(u=l,m(u.object))}function H(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:V,resetDefaultState:H,dispose:R,releaseStatesOfGeometry:P,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:M,disableUnusedAttributes:b}}function r4(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){n.drawArrays(s,u,d),t.update(d,s,1)}function l(u,d,h){if(h===0)return;let p,m;if(i)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,d,h),t.update(d,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function i4(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=p>0,M=o||e.has("OES_texture_float"),A=w&&M,b=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:S,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:w,floatFragmentTextures:M,floatVertexTextures:A,maxSamples:b}}function s4(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Vo,a=new _t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||r!==0||i;return i=p,r=h.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=d(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,S=h.clipIntersection,_=h.clipShadows,g=n.get(h);if(!i||v===null||v.length===0||s&&!_)s?d(null):u();else{const x=s?0:r,w=x*4;let M=g.clippingState||null;l.value=M,M=d(v,p,w,m);for(let A=0;A!==w;++A)M[A]=t[A];g.clippingState=M,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(h,p,m,v){const S=h!==null?h.length:0;let _=null;if(S!==0){if(_=l.value,v!==!0||_===null){const g=m+S*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(_===null||_.length<g)&&(_=new Float32Array(g));for(let w=0,M=m;w!==S;++w,M+=4)o.copy(h[w]).applyMatrix4(x,a),o.normal.toArray(_,M),_[M+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,_}}function o4(n){let e=new WeakMap;function t(o,a){return a===su?o.mapping=ua:a===_d&&(o.mapping=fa),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===su||a===_d)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new a3(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class io extends jd{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Nc=4,VT=[.125,.215,.35,.446,.526,.582],$a=20,Ly=new io,GT=new Ne;let Iy=null;const Va=(1+Math.sqrt(5))/2,ac=1/Va,WT=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,Va,ac),new U(0,Va,-ac),new U(ac,0,Va),new U(-ac,0,Va),new U(Va,ac,0),new U(-Va,ac,0)];class Vx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Iy=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Iy),e.scissorTest=!1,Zp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ua||e.mapping===fa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Iy=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Rn,minFilter:Rn,generateMipmaps:!1,type:ou,format:Fr,colorSpace:Zi,depthBuffer:!1},i=$T(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$T(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=a4(s)),this._blurMaterial=l4(s,e,t)}return i}_compileMaterial(e){const t=new qn(this._lodPlanes[0],e);this._renderer.compile(t,Ly)}_sceneToCubeUV(e,t,r,i){const a=new Sn(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(GT),d.toneMapping=Yi,d.autoClear=!1;const m=new _o({name:"PMREM.Background",side:Ar,depthWrite:!1,depthTest:!1}),v=new qn(new xa,m);let S=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,S=!0):(m.color.copy(GT),S=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const w=this._cubeSize;Zp(i,x*w,g>2?w:0,w,w),d.setRenderTarget(i),S&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ua||e.mapping===fa;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=XT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Zp(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Ly)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=WT[(i-1)%WT.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new qn(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*$a-1),S=s/v,_=isFinite(s)?1+Math.floor(d*S):$a;_>$a&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${$a}`);const g=[];let x=0;for(let I=0;I<$a;++I){const L=I/S,R=Math.exp(-L*L/2);g.push(R),I===0?x+=R:I<_&&(x+=2*R)}for(let I=0;I<g.length;I++)g[I]=g[I]/x;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=v,p.mipInt.value=w-r;const M=this._sizeLods[i],A=3*M*(i>w-Nc?i-w+Nc:0),b=4*(this._cubeSize-M);Zp(t,A,b,3*M,2*M),l.setRenderTarget(t),l.render(h,Ly)}}function a4(n){const e=[],t=[],r=[];let i=n;const s=n-Nc+1+VT.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Nc?l=VT[o-n+Nc-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),d=-u,h=1+u,p=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,v=6,S=3,_=2,g=1,x=new Float32Array(S*v*m),w=new Float32Array(_*v*m),M=new Float32Array(g*v*m);for(let b=0;b<m;b++){const I=b%3*2/3-1,L=b>2?0:-1,R=[I,L,0,I+2/3,L,0,I+2/3,L+1,0,I,L,0,I+2/3,L+1,0,I,L+1,0];x.set(R,S*v*b),w.set(p,_*v*b);const P=[b,b,b,b,b,b];M.set(P,g*v*b)}const A=new dt;A.setAttribute("position",new $t(x,S)),A.setAttribute("uv",new $t(w,_)),A.setAttribute("faceIndex",new $t(M,g)),e.push(A),i>Nc&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function $T(n,e,t){const r=new Ji(n,e,t);return r.texture.mapping=wu,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Zp(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function l4(n,e,t){const r=new Float32Array($a),i=new U(0,1,0);return new Ts({name:"SphericalGaussianBlur",defines:{n:$a,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:zS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function jT(){return new Ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function XT(){return new Ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function zS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function c4(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===su||l===_d,d=l===ua||l===fa;if(u||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new Vx(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||d&&h&&i(h)){t===null&&(t=new Vx(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let d=0;d<u;d++)a[d]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function u4(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function f4(n,e,t,r){const i={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const S=p.morphAttributes[v];for(let _=0,g=S.length;_<g;_++)e.remove(S[_])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const S=m[v];for(let _=0,g=S.length;_<g;_++)e.update(S[_],n.ARRAY_BUFFER)}}function u(h){const p=[],m=h.index,v=h.attributes.position;let S=0;if(m!==null){const x=m.array;S=m.version;for(let w=0,M=x.length;w<M;w+=3){const A=x[w+0],b=x[w+1],I=x[w+2];p.push(A,b,b,I,I,A)}}else{const x=v.array;S=v.version;for(let w=0,M=x.length/3-1;w<M;w+=3){const A=w+0,b=w+1,I=w+2;p.push(A,b,b,I,I,A)}}const _=new(n3(p)?FS:g0)(p,1);_.version=S;const g=s.get(h);g&&e.remove(g),s.set(h,_)}function d(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:d}}function d4(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function d(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function h(p,m,v){if(v===0)return;let S,_;if(i)S=n,_="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[_](s,m,a,p*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=u,this.render=d,this.renderInstances=h}function h4(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function p4(n,e){return n[0]-e[0]}function m4(n,e){return Math.abs(e[1])-Math.abs(n[1])}function g4(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new It,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,d,h){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,S=v!==void 0?v.length:0;let _=s.get(d);if(_===void 0||_.count!==S){let q=function(){H.dispose(),s.delete(d),d.removeEventListener("dispose",q)};var m=q;_!==void 0&&_.texture.dispose();const w=d.morphAttributes.position!==void 0,M=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,b=d.morphAttributes.position||[],I=d.morphAttributes.normal||[],L=d.morphAttributes.color||[];let R=0;w===!0&&(R=1),M===!0&&(R=2),A===!0&&(R=3);let P=d.attributes.position.count*R,k=1;P>e.maxTextureSize&&(k=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const V=new Float32Array(P*k*4*S),H=new m0(V,P,k,S);H.type=ys,H.needsUpdate=!0;const j=R*4;for(let Z=0;Z<S;Z++){const ee=b[Z],F=I[Z],K=L[Z],X=P*k*4*Z;for(let oe=0;oe<ee.count;oe++){const W=oe*j;w===!0&&(o.fromBufferAttribute(ee,oe),V[X+W+0]=o.x,V[X+W+1]=o.y,V[X+W+2]=o.z,V[X+W+3]=0),M===!0&&(o.fromBufferAttribute(F,oe),V[X+W+4]=o.x,V[X+W+5]=o.y,V[X+W+6]=o.z,V[X+W+7]=0),A===!0&&(o.fromBufferAttribute(K,oe),V[X+W+8]=o.x,V[X+W+9]=o.y,V[X+W+10]=o.z,V[X+W+11]=K.itemSize===4?o.w:1)}}_={count:S,texture:H,size:new ve(P,k)},s.set(d,_),d.addEventListener("dispose",q)}let g=0;for(let w=0;w<p.length;w++)g+=p[w];const x=d.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",p),h.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let S=r[d.id];if(S===void 0||S.length!==v){S=[];for(let M=0;M<v;M++)S[M]=[M,0];r[d.id]=S}for(let M=0;M<v;M++){const A=S[M];A[0]=M,A[1]=p[M]}S.sort(m4);for(let M=0;M<8;M++)M<v&&S[M][1]?(a[M][0]=S[M][0],a[M][1]=S[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(p4);const _=d.morphAttributes.position,g=d.morphAttributes.normal;let x=0;for(let M=0;M<8;M++){const A=a[M],b=A[0],I=A[1];b!==Number.MAX_SAFE_INTEGER&&I?(_&&d.getAttribute("morphTarget"+M)!==_[b]&&d.setAttribute("morphTarget"+M,_[b]),g&&d.getAttribute("morphNormal"+M)!==g[b]&&d.setAttribute("morphNormal"+M,g[b]),i[M]=I,x+=I):(_&&d.hasAttribute("morphTarget"+M)===!0&&d.deleteAttribute("morphTarget"+M),g&&d.hasAttribute("morphNormal"+M)===!0&&d.deleteAttribute("morphNormal"+M),i[M]=0)}const w=d.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",w),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function v4(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,d=l.geometry,h=e.get(l,d);return i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER)),h}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const c3=new rn,u3=new m0,f3=new US,d3=new Xd,YT=[],qT=[],KT=new Float32Array(16),ZT=new Float32Array(9),JT=new Float32Array(4);function Tu(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=YT[i];if(s===void 0&&(s=new Float32Array(i),YT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Bn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Hn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function y0(n,e){let t=qT[e];t===void 0&&(t=new Int32Array(e),qT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function y4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2fv(this.addr,e),Hn(t,e)}}function x4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bn(t,e))return;n.uniform3fv(this.addr,e),Hn(t,e)}}function S4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4fv(this.addr,e),Hn(t,e)}}function w4(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Hn(t,e)}else{if(Bn(t,r))return;JT.set(r),n.uniformMatrix2fv(this.addr,!1,JT),Hn(t,r)}}function E4(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Hn(t,e)}else{if(Bn(t,r))return;ZT.set(r),n.uniformMatrix3fv(this.addr,!1,ZT),Hn(t,r)}}function M4(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Hn(t,e)}else{if(Bn(t,r))return;KT.set(r),n.uniformMatrix4fv(this.addr,!1,KT),Hn(t,r)}}function T4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function b4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2iv(this.addr,e),Hn(t,e)}}function A4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bn(t,e))return;n.uniform3iv(this.addr,e),Hn(t,e)}}function C4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4iv(this.addr,e),Hn(t,e)}}function R4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function P4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2uiv(this.addr,e),Hn(t,e)}}function L4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bn(t,e))return;n.uniform3uiv(this.addr,e),Hn(t,e)}}function I4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4uiv(this.addr,e),Hn(t,e)}}function D4(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||c3,i)}function O4(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||f3,i)}function k4(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||d3,i)}function N4(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||u3,i)}function U4(n){switch(n){case 5126:return y4;case 35664:return _4;case 35665:return x4;case 35666:return S4;case 35674:return w4;case 35675:return E4;case 35676:return M4;case 5124:case 35670:return T4;case 35667:case 35671:return b4;case 35668:case 35672:return A4;case 35669:case 35673:return C4;case 5125:return R4;case 36294:return P4;case 36295:return L4;case 36296:return I4;case 35678:case 36198:case 36298:case 36306:case 35682:return D4;case 35679:case 36299:case 36307:return O4;case 35680:case 36300:case 36308:case 36293:return k4;case 36289:case 36303:case 36311:case 36292:return N4}}function F4(n,e){n.uniform1fv(this.addr,e)}function z4(n,e){const t=Tu(e,this.size,2);n.uniform2fv(this.addr,t)}function B4(n,e){const t=Tu(e,this.size,3);n.uniform3fv(this.addr,t)}function H4(n,e){const t=Tu(e,this.size,4);n.uniform4fv(this.addr,t)}function V4(n,e){const t=Tu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function G4(n,e){const t=Tu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function W4(n,e){const t=Tu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $4(n,e){n.uniform1iv(this.addr,e)}function j4(n,e){n.uniform2iv(this.addr,e)}function X4(n,e){n.uniform3iv(this.addr,e)}function Y4(n,e){n.uniform4iv(this.addr,e)}function q4(n,e){n.uniform1uiv(this.addr,e)}function K4(n,e){n.uniform2uiv(this.addr,e)}function Z4(n,e){n.uniform3uiv(this.addr,e)}function J4(n,e){n.uniform4uiv(this.addr,e)}function Q4(n,e,t){const r=this.cache,i=e.length,s=y0(t,i);Bn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||c3,s[o])}function e5(n,e,t){const r=this.cache,i=e.length,s=y0(t,i);Bn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||f3,s[o])}function t5(n,e,t){const r=this.cache,i=e.length,s=y0(t,i);Bn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||d3,s[o])}function n5(n,e,t){const r=this.cache,i=e.length,s=y0(t,i);Bn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||u3,s[o])}function r5(n){switch(n){case 5126:return F4;case 35664:return z4;case 35665:return B4;case 35666:return H4;case 35674:return V4;case 35675:return G4;case 35676:return W4;case 5124:case 35670:return $4;case 35667:case 35671:return j4;case 35668:case 35672:return X4;case 35669:case 35673:return Y4;case 5125:return q4;case 36294:return K4;case 36295:return Z4;case 36296:return J4;case 35678:case 36198:case 36298:case 36306:case 35682:return Q4;case 35679:case 36299:case 36307:return e5;case 35680:case 36300:case 36308:case 36293:return t5;case 36289:case 36303:case 36311:case 36292:return n5}}class i5{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=U4(t.type)}}class s5{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=r5(t.type)}}class o5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Dy=/(\w+)(\])?(\[|\.)?/g;function QT(n,e){n.seq.push(e),n.map[e.id]=e}function a5(n,e,t){const r=n.name,i=r.length;for(Dy.lastIndex=0;;){const s=Dy.exec(r),o=Dy.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){QT(t,u===void 0?new i5(a,n,e):new s5(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new o5(a),QT(t,h)),t=h}}}class qm{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);a5(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function eb(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let l5=0;function c5(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function u5(n){switch(n){case Zi:return["Linear","( value )"];case vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function tb(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+c5(n.getShaderSource(e),o)}else return i}function f5(n,e){const t=u5(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function d5(n,e){let t;switch(e){case AP:t="Linear";break;case CP:t="Reinhard";break;case RP:t="OptimizedCineon";break;case f0:t="ACESFilmic";break;case PP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function h5(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Df).join(`
`)}function p5(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function m5(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Df(n){return n!==""}function nb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const g5=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gx(n){return n.replace(g5,v5)}function v5(n,e){const t=wt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Gx(t)}const y5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ib(n){return n.replace(y5,_5)}function _5(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function sb(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function x5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===u0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Hi&&(e="SHADOWMAP_TYPE_VSM"),e}function S5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ua:case fa:e="ENVMAP_TYPE_CUBE";break;case wu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function w5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case fa:e="ENVMAP_MODE_REFRACTION";break}return e}function E5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $d:e="ENVMAP_BLENDING_MULTIPLY";break;case TP:e="ENVMAP_BLENDING_MIX";break;case bP:e="ENVMAP_BLENDING_ADD";break}return e}function M5(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function T5(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=x5(t),u=S5(t),d=w5(t),h=E5(t),p=M5(t),m=t.isWebGL2?"":h5(t),v=p5(s),S=i.createProgram();let _,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Df).join(`
`),_.length>0&&(_+=`
`),g=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Df).join(`
`),g.length>0&&(g+=`
`)):(_=[sb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Df).join(`
`),g=[m,sb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Yi?"#define TONE_MAPPING":"",t.toneMapping!==Yi?wt.tonemapping_pars_fragment:"",t.toneMapping!==Yi?d5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",wt.encodings_pars_fragment,f5("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Df).join(`
`)),o=Gx(o),o=nb(o,t),o=rb(o,t),a=Gx(a),a=nb(a,t),a=rb(a,t),o=ib(o),a=ib(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["#define varying in",t.glslVersion===Bx?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Bx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=x+_+o,M=x+g+a,A=eb(i,i.VERTEX_SHADER,w),b=eb(i,i.FRAGMENT_SHADER,M);if(i.attachShader(S,A),i.attachShader(S,b),t.index0AttributeName!==void 0?i.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S),n.debug.checkShaderErrors){const R=i.getProgramInfoLog(S).trim(),P=i.getShaderInfoLog(A).trim(),k=i.getShaderInfoLog(b).trim();let V=!0,H=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(V=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,S,A,b);else{const j=tb(i,A,"vertex"),q=tb(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+j+`
`+q)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(P===""||k==="")&&(H=!1);H&&(this.diagnostics={runnable:V,programLog:R,vertexShader:{log:P,prefix:_},fragmentShader:{log:k,prefix:g}})}i.deleteShader(A),i.deleteShader(b);let I;this.getUniforms=function(){return I===void 0&&(I=new qm(i,S)),I};let L;return this.getAttributes=function(){return L===void 0&&(L=m5(i,S)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=l5++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=A,this.fragmentShader=b,this}let b5=0;class A5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new C5(e),t.set(e,r)),r}}class C5{constructor(e){this.id=b5++,this.code=e,this.usedTimes=0}}function R5(n,e,t,r,i,s,o){const a=new sl,l=new A5,u=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(R){return R===0?"uv":`uv${R}`}function _(R,P,k,V,H){const j=V.fog,q=H.geometry,Z=R.isMeshStandardMaterial?V.environment:null,ee=(R.isMeshStandardMaterial?t:e).get(R.envMap||Z),F=ee&&ee.mapping===wu?ee.image.height:null,K=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const X=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,oe=X!==void 0?X.length:0;let W=0;q.morphAttributes.position!==void 0&&(W=1),q.morphAttributes.normal!==void 0&&(W=2),q.morphAttributes.color!==void 0&&(W=3);let he,le,Te,we;if(K){const pn=Wi[K];he=pn.vertexShader,le=pn.fragmentShader}else he=R.vertexShader,le=R.fragmentShader,l.update(R),Te=l.getVertexShaderID(R),we=l.getFragmentShaderID(R);const Re=n.getRenderTarget(),Ze=H.isInstancedMesh===!0,Qe=!!R.map,xt=!!R.matcap,Ke=!!ee,G=!!R.aoMap,_e=!!R.lightMap,pe=!!R.bumpMap,be=!!R.normalMap,ye=!!R.displacementMap,$e=!!R.emissiveMap,Ue=!!R.metalnessMap,ze=!!R.roughnessMap,Je=R.anisotropy>0,yt=R.clearcoat>0,Bt=R.iridescence>0,N=R.sheen>0,O=R.transmission>0,ae=Je&&!!R.anisotropyMap,xe=yt&&!!R.clearcoatMap,Se=yt&&!!R.clearcoatNormalMap,Le=yt&&!!R.clearcoatRoughnessMap,Ve=Bt&&!!R.iridescenceMap,Ie=Bt&&!!R.iridescenceThicknessMap,fe=N&&!!R.sheenColorMap,Y=N&&!!R.sheenRoughnessMap,ue=!!R.specularMap,Ee=!!R.specularColorMap,Me=!!R.specularIntensityMap,De=O&&!!R.transmissionMap,nt=O&&!!R.thicknessMap,Rt=!!R.gradientMap,J=!!R.alphaMap,Pe=R.alphaTest>0,se=!!R.extensions,Oe=!!q.attributes.uv1,Be=!!q.attributes.uv2,Pt=!!q.attributes.uv3;return{isWebGL2:d,shaderID:K,shaderType:R.type,shaderName:R.name,vertexShader:he,fragmentShader:le,defines:R.defines,customVertexShaderID:Te,customFragmentShaderID:we,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,instancing:Ze,instancingColor:Ze&&H.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:Zi,map:Qe,matcap:xt,envMap:Ke,envMapMode:Ke&&ee.mapping,envMapCubeUVHeight:F,aoMap:G,lightMap:_e,bumpMap:pe,normalMap:be,displacementMap:p&&ye,emissiveMap:$e,normalMapObjectSpace:be&&R.normalMapType===$P,normalMapTangentSpace:be&&R.normalMapType===_a,metalnessMap:Ue,roughnessMap:ze,anisotropy:Je,anisotropyMap:ae,clearcoat:yt,clearcoatMap:xe,clearcoatNormalMap:Se,clearcoatRoughnessMap:Le,iridescence:Bt,iridescenceMap:Ve,iridescenceThicknessMap:Ie,sheen:N,sheenColorMap:fe,sheenRoughnessMap:Y,specularMap:ue,specularColorMap:Ee,specularIntensityMap:Me,transmission:O,transmissionMap:De,thicknessMap:nt,gradientMap:Rt,opaque:R.transparent===!1&&R.blending===rl,alphaMap:J,alphaTest:Pe,combine:R.combine,mapUv:Qe&&S(R.map.channel),aoMapUv:G&&S(R.aoMap.channel),lightMapUv:_e&&S(R.lightMap.channel),bumpMapUv:pe&&S(R.bumpMap.channel),normalMapUv:be&&S(R.normalMap.channel),displacementMapUv:ye&&S(R.displacementMap.channel),emissiveMapUv:$e&&S(R.emissiveMap.channel),metalnessMapUv:Ue&&S(R.metalnessMap.channel),roughnessMapUv:ze&&S(R.roughnessMap.channel),anisotropyMapUv:ae&&S(R.anisotropyMap.channel),clearcoatMapUv:xe&&S(R.clearcoatMap.channel),clearcoatNormalMapUv:Se&&S(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&S(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Ve&&S(R.iridescenceMap.channel),iridescenceThicknessMapUv:Ie&&S(R.iridescenceThicknessMap.channel),sheenColorMapUv:fe&&S(R.sheenColorMap.channel),sheenRoughnessMapUv:Y&&S(R.sheenRoughnessMap.channel),specularMapUv:ue&&S(R.specularMap.channel),specularColorMapUv:Ee&&S(R.specularColorMap.channel),specularIntensityMapUv:Me&&S(R.specularIntensityMap.channel),transmissionMapUv:De&&S(R.transmissionMap.channel),thicknessMapUv:nt&&S(R.thicknessMap.channel),alphaMapUv:J&&S(R.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(be||Je),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,vertexUv1s:Oe,vertexUv2s:Be,vertexUv3s:Pt,pointsUvs:H.isPoints===!0&&!!q.attributes.uv&&(Qe||J),fog:!!j,useFog:R.fog===!0,fogExp2:j&&j.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:H.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:W,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:Yi,useLegacyLights:n.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===vs,flipSided:R.side===Ar,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:se&&R.extensions.derivatives===!0,extensionFragDepth:se&&R.extensions.fragDepth===!0,extensionDrawBuffers:se&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:se&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const P=[];if(R.shaderID?P.push(R.shaderID):(P.push(R.customVertexShaderID),P.push(R.customFragmentShaderID)),R.defines!==void 0)for(const k in R.defines)P.push(k),P.push(R.defines[k]);return R.isRawShaderMaterial===!1&&(x(P,R),w(P,R),P.push(n.outputColorSpace)),P.push(R.customProgramCacheKey),P.join()}function x(R,P){R.push(P.precision),R.push(P.outputColorSpace),R.push(P.envMapMode),R.push(P.envMapCubeUVHeight),R.push(P.mapUv),R.push(P.alphaMapUv),R.push(P.lightMapUv),R.push(P.aoMapUv),R.push(P.bumpMapUv),R.push(P.normalMapUv),R.push(P.displacementMapUv),R.push(P.emissiveMapUv),R.push(P.metalnessMapUv),R.push(P.roughnessMapUv),R.push(P.anisotropyMapUv),R.push(P.clearcoatMapUv),R.push(P.clearcoatNormalMapUv),R.push(P.clearcoatRoughnessMapUv),R.push(P.iridescenceMapUv),R.push(P.iridescenceThicknessMapUv),R.push(P.sheenColorMapUv),R.push(P.sheenRoughnessMapUv),R.push(P.specularMapUv),R.push(P.specularColorMapUv),R.push(P.specularIntensityMapUv),R.push(P.transmissionMapUv),R.push(P.thicknessMapUv),R.push(P.combine),R.push(P.fogExp2),R.push(P.sizeAttenuation),R.push(P.morphTargetsCount),R.push(P.morphAttributeCount),R.push(P.numDirLights),R.push(P.numPointLights),R.push(P.numSpotLights),R.push(P.numSpotLightMaps),R.push(P.numHemiLights),R.push(P.numRectAreaLights),R.push(P.numDirLightShadows),R.push(P.numPointLightShadows),R.push(P.numSpotLightShadows),R.push(P.numSpotLightShadowsWithMaps),R.push(P.shadowMapType),R.push(P.toneMapping),R.push(P.numClippingPlanes),R.push(P.numClipIntersection),R.push(P.depthPacking)}function w(R,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),R.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.skinning&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.useLegacyLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),R.push(a.mask)}function M(R){const P=v[R.type];let k;if(P){const V=Wi[P];k=s3.clone(V.uniforms)}else k=R.uniforms;return k}function A(R,P){let k;for(let V=0,H=u.length;V<H;V++){const j=u[V];if(j.cacheKey===P){k=j,++k.usedTimes;break}}return k===void 0&&(k=new T5(n,P,R,s),u.push(k)),k}function b(R){if(--R.usedTimes===0){const P=u.indexOf(R);u[P]=u[u.length-1],u.pop(),R.destroy()}}function I(R){l.remove(R)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:M,acquireProgram:A,releaseProgram:b,releaseShaderCache:I,programs:u,dispose:L}}function P5(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function L5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function ob(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ab(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,p,m,v,S,_){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:S,group:_},n[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=S,g.group=_),e++,g}function a(h,p,m,v,S,_){const g=o(h,p,m,v,S,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(h,p,m,v,S,_){const g=o(h,p,m,v,S,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,p){t.length>1&&t.sort(h||L5),r.length>1&&r.sort(p||ob),i.length>1&&i.sort(p||ob)}function d(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:u}}function I5(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new ab,n.set(r,[o])):i>=s.length?(o=new ab,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function D5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new Ne};break;case"SpotLight":t={position:new U,direction:new U,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function O5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let k5=0;function N5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function U5(n,e){const t=new D5,r=O5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new U);const s=new U,o=new qe,a=new qe;function l(d,h){let p=0,m=0,v=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let S=0,_=0,g=0,x=0,w=0,M=0,A=0,b=0,I=0,L=0;d.sort(N5);const R=h===!0?Math.PI:1;for(let k=0,V=d.length;k<V;k++){const H=d[k],j=H.color,q=H.intensity,Z=H.distance,ee=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=j.r*q*R,m+=j.g*q*R,v+=j.b*q*R;else if(H.isLightProbe)for(let F=0;F<9;F++)i.probe[F].addScaledVector(H.sh.coefficients[F],q);else if(H.isDirectionalLight){const F=t.get(H);if(F.color.copy(H.color).multiplyScalar(H.intensity*R),H.castShadow){const K=H.shadow,X=r.get(H);X.shadowBias=K.bias,X.shadowNormalBias=K.normalBias,X.shadowRadius=K.radius,X.shadowMapSize=K.mapSize,i.directionalShadow[S]=X,i.directionalShadowMap[S]=ee,i.directionalShadowMatrix[S]=H.shadow.matrix,M++}i.directional[S]=F,S++}else if(H.isSpotLight){const F=t.get(H);F.position.setFromMatrixPosition(H.matrixWorld),F.color.copy(j).multiplyScalar(q*R),F.distance=Z,F.coneCos=Math.cos(H.angle),F.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),F.decay=H.decay,i.spot[g]=F;const K=H.shadow;if(H.map&&(i.spotLightMap[I]=H.map,I++,K.updateMatrices(H),H.castShadow&&L++),i.spotLightMatrix[g]=K.matrix,H.castShadow){const X=r.get(H);X.shadowBias=K.bias,X.shadowNormalBias=K.normalBias,X.shadowRadius=K.radius,X.shadowMapSize=K.mapSize,i.spotShadow[g]=X,i.spotShadowMap[g]=ee,b++}g++}else if(H.isRectAreaLight){const F=t.get(H);F.color.copy(j).multiplyScalar(q),F.halfWidth.set(H.width*.5,0,0),F.halfHeight.set(0,H.height*.5,0),i.rectArea[x]=F,x++}else if(H.isPointLight){const F=t.get(H);if(F.color.copy(H.color).multiplyScalar(H.intensity*R),F.distance=H.distance,F.decay=H.decay,H.castShadow){const K=H.shadow,X=r.get(H);X.shadowBias=K.bias,X.shadowNormalBias=K.normalBias,X.shadowRadius=K.radius,X.shadowMapSize=K.mapSize,X.shadowCameraNear=K.camera.near,X.shadowCameraFar=K.camera.far,i.pointShadow[_]=X,i.pointShadowMap[_]=ee,i.pointShadowMatrix[_]=H.shadow.matrix,A++}i.point[_]=F,_++}else if(H.isHemisphereLight){const F=t.get(H);F.skyColor.copy(H.color).multiplyScalar(q*R),F.groundColor.copy(H.groundColor).multiplyScalar(q*R),i.hemi[w]=F,w++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_FLOAT_1,i.rectAreaLTC2=ke.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_HALF_1,i.rectAreaLTC2=ke.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const P=i.hash;(P.directionalLength!==S||P.pointLength!==_||P.spotLength!==g||P.rectAreaLength!==x||P.hemiLength!==w||P.numDirectionalShadows!==M||P.numPointShadows!==A||P.numSpotShadows!==b||P.numSpotMaps!==I)&&(i.directional.length=S,i.spot.length=g,i.rectArea.length=x,i.point.length=_,i.hemi.length=w,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=b+I-L,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=L,P.directionalLength=S,P.pointLength=_,P.spotLength=g,P.rectAreaLength=x,P.hemiLength=w,P.numDirectionalShadows=M,P.numPointShadows=A,P.numSpotShadows=b,P.numSpotMaps=I,i.version=k5++)}function u(d,h){let p=0,m=0,v=0,S=0,_=0;const g=h.matrixWorldInverse;for(let x=0,w=d.length;x<w;x++){const M=d[x];if(M.isDirectionalLight){const A=i.directional[p];A.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),p++}else if(M.isSpotLight){const A=i.spot[v];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(g),A.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),v++}else if(M.isRectAreaLight){const A=i.rectArea[S];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(g),a.identity(),o.copy(M.matrixWorld),o.premultiply(g),a.extractRotation(o),A.halfWidth.set(M.width*.5,0,0),A.halfHeight.set(0,M.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),S++}else if(M.isPointLight){const A=i.point[m];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(g),m++}else if(M.isHemisphereLight){const A=i.hemi[_];A.direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(g),_++}}}return{setup:l,setupView:u,state:i}}function lb(n,e){const t=new U5(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function F5(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new lb(n,e),t.set(s,[l])):o>=a.length?(l=new lb(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class BS extends nr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class HS extends nr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const z5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,B5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function H5(n,e,t){let r=new v0;const i=new ve,s=new ve,o=new It,a=new BS({depthPacking:WP}),l=new HS,u={},d=t.maxTextureSize,h={[po]:Ar,[Ar]:po,[vs]:vs},p=new Ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:z5,fragmentShader:B5}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new dt;v.setAttribute("position",new $t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new qn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u0;let g=this.type;this.render=function(A,b,I){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const L=n.getRenderTarget(),R=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),k=n.state;k.setBlending(ro),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const V=g!==Hi&&this.type===Hi,H=g===Hi&&this.type!==Hi;for(let j=0,q=A.length;j<q;j++){const Z=A[j],ee=Z.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;i.copy(ee.mapSize);const F=ee.getFrameExtents();if(i.multiply(F),s.copy(ee.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/F.x),i.x=s.x*F.x,ee.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/F.y),i.y=s.y*F.y,ee.mapSize.y=s.y)),ee.map===null||V===!0||H===!0){const X=this.type!==Hi?{minFilter:An,magFilter:An}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Ji(i.x,i.y,X),ee.map.texture.name=Z.name+".shadowMap",ee.camera.updateProjectionMatrix()}n.setRenderTarget(ee.map),n.clear();const K=ee.getViewportCount();for(let X=0;X<K;X++){const oe=ee.getViewport(X);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),k.viewport(o),ee.updateMatrices(Z,X),r=ee.getFrustum(),M(b,I,ee.camera,Z,this.type)}ee.isPointLightShadow!==!0&&this.type===Hi&&x(ee,I),ee.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(L,R,P)};function x(A,b){const I=e.update(S);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Ji(i.x,i.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(b,null,I,p,S,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(b,null,I,m,S,null)}function w(A,b,I,L){let R=null;const P=I.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(P!==void 0)R=P;else if(R=I.isPointLight===!0?l:a,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const k=R.uuid,V=b.uuid;let H=u[k];H===void 0&&(H={},u[k]=H);let j=H[V];j===void 0&&(j=R.clone(),H[V]=j),R=j}if(R.visible=b.visible,R.wireframe=b.wireframe,L===Hi?R.side=b.shadowSide!==null?b.shadowSide:b.side:R.side=b.shadowSide!==null?b.shadowSide:h[b.side],R.alphaMap=b.alphaMap,R.alphaTest=b.alphaTest,R.map=b.map,R.clipShadows=b.clipShadows,R.clippingPlanes=b.clippingPlanes,R.clipIntersection=b.clipIntersection,R.displacementMap=b.displacementMap,R.displacementScale=b.displacementScale,R.displacementBias=b.displacementBias,R.wireframeLinewidth=b.wireframeLinewidth,R.linewidth=b.linewidth,I.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const k=n.properties.get(R);k.light=I}return R}function M(A,b,I,L,R){if(A.visible===!1)return;if(A.layers.test(b.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&R===Hi)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,A.matrixWorld);const V=e.update(A),H=A.material;if(Array.isArray(H)){const j=V.groups;for(let q=0,Z=j.length;q<Z;q++){const ee=j[q],F=H[ee.materialIndex];if(F&&F.visible){const K=w(A,F,L,R);n.renderBufferDirect(I,null,V,K,A,ee)}}}else if(H.visible){const j=w(A,H,L,R);n.renderBufferDirect(I,null,V,j,A,null)}}const k=A.children;for(let V=0,H=k.length;V<H;V++)M(k[V],b,I,L,R)}}function V5(n,e,t){const r=t.isWebGL2;function i(){let J=!1;const Pe=new It;let se=null;const Oe=new It(0,0,0,0);return{setMask:function(Be){se!==Be&&!J&&(n.colorMask(Be,Be,Be,Be),se=Be)},setLocked:function(Be){J=Be},setClear:function(Be,Pt,Yt,pn,is){is===!0&&(Be*=pn,Pt*=pn,Yt*=pn),Pe.set(Be,Pt,Yt,pn),Oe.equals(Pe)===!1&&(n.clearColor(Be,Pt,Yt,pn),Oe.copy(Pe))},reset:function(){J=!1,se=null,Oe.set(-1,0,0,0)}}}function s(){let J=!1,Pe=null,se=null,Oe=null;return{setTest:function(Be){Be?Re(n.DEPTH_TEST):Ze(n.DEPTH_TEST)},setMask:function(Be){Pe!==Be&&!J&&(n.depthMask(Be),Pe=Be)},setFunc:function(Be){if(se!==Be){switch(Be){case yP:n.depthFunc(n.NEVER);break;case _P:n.depthFunc(n.ALWAYS);break;case xP:n.depthFunc(n.LESS);break;case Eg:n.depthFunc(n.LEQUAL);break;case SP:n.depthFunc(n.EQUAL);break;case wP:n.depthFunc(n.GEQUAL);break;case EP:n.depthFunc(n.GREATER);break;case MP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}se=Be}},setLocked:function(Be){J=Be},setClear:function(Be){Oe!==Be&&(n.clearDepth(Be),Oe=Be)},reset:function(){J=!1,Pe=null,se=null,Oe=null}}}function o(){let J=!1,Pe=null,se=null,Oe=null,Be=null,Pt=null,Yt=null,pn=null,is=null;return{setTest:function(qt){J||(qt?Re(n.STENCIL_TEST):Ze(n.STENCIL_TEST))},setMask:function(qt){Pe!==qt&&!J&&(n.stencilMask(qt),Pe=qt)},setFunc:function(qt,$r,Zn){(se!==qt||Oe!==$r||Be!==Zn)&&(n.stencilFunc(qt,$r,Zn),se=qt,Oe=$r,Be=Zn)},setOp:function(qt,$r,Zn){(Pt!==qt||Yt!==$r||pn!==Zn)&&(n.stencilOp(qt,$r,Zn),Pt=qt,Yt=$r,pn=Zn)},setLocked:function(qt){J=qt},setClear:function(qt){is!==qt&&(n.clearStencil(qt),is=qt)},reset:function(){J=!1,Pe=null,se=null,Oe=null,Be=null,Pt=null,Yt=null,pn=null,is=null}}}const a=new i,l=new s,u=new o,d=new WeakMap,h=new WeakMap;let p={},m={},v=new WeakMap,S=[],_=null,g=!1,x=null,w=null,M=null,A=null,b=null,I=null,L=null,R=!1,P=null,k=null,V=null,H=null,j=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,ee=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(F)[1]),Z=ee>=1):F.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Z=ee>=2);let K=null,X={};const oe=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),he=new It().fromArray(oe),le=new It().fromArray(W);function Te(J,Pe,se,Oe){const Be=new Uint8Array(4),Pt=n.createTexture();n.bindTexture(J,Pt),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Yt=0;Yt<se;Yt++)r&&(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)?n.texImage3D(Pe,0,n.RGBA,1,1,Oe,0,n.RGBA,n.UNSIGNED_BYTE,Be):n.texImage2D(Pe+Yt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Be);return Pt}const we={};we[n.TEXTURE_2D]=Te(n.TEXTURE_2D,n.TEXTURE_2D,1),we[n.TEXTURE_CUBE_MAP]=Te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(we[n.TEXTURE_2D_ARRAY]=Te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),we[n.TEXTURE_3D]=Te(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Re(n.DEPTH_TEST),l.setFunc(Eg),ye(!1),$e(fx),Re(n.CULL_FACE),pe(ro);function Re(J){p[J]!==!0&&(n.enable(J),p[J]=!0)}function Ze(J){p[J]!==!1&&(n.disable(J),p[J]=!1)}function Qe(J,Pe){return m[J]!==Pe?(n.bindFramebuffer(J,Pe),m[J]=Pe,r&&(J===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Pe),J===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Pe)),!0):!1}function xt(J,Pe){let se=S,Oe=!1;if(J)if(se=v.get(Pe),se===void 0&&(se=[],v.set(Pe,se)),J.isWebGLMultipleRenderTargets){const Be=J.texture;if(se.length!==Be.length||se[0]!==n.COLOR_ATTACHMENT0){for(let Pt=0,Yt=Be.length;Pt<Yt;Pt++)se[Pt]=n.COLOR_ATTACHMENT0+Pt;se.length=Be.length,Oe=!0}}else se[0]!==n.COLOR_ATTACHMENT0&&(se[0]=n.COLOR_ATTACHMENT0,Oe=!0);else se[0]!==n.BACK&&(se[0]=n.BACK,Oe=!0);Oe&&(t.isWebGL2?n.drawBuffers(se):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(se))}function Ke(J){return _!==J?(n.useProgram(J),_=J,!0):!1}const G={[Wa]:n.FUNC_ADD,[aP]:n.FUNC_SUBTRACT,[lP]:n.FUNC_REVERSE_SUBTRACT};if(r)G[mx]=n.MIN,G[gx]=n.MAX;else{const J=e.get("EXT_blend_minmax");J!==null&&(G[mx]=J.MIN_EXT,G[gx]=J.MAX_EXT)}const _e={[cP]:n.ZERO,[uP]:n.ONE,[fP]:n.SRC_COLOR,[ES]:n.SRC_ALPHA,[vP]:n.SRC_ALPHA_SATURATE,[mP]:n.DST_COLOR,[hP]:n.DST_ALPHA,[dP]:n.ONE_MINUS_SRC_COLOR,[MS]:n.ONE_MINUS_SRC_ALPHA,[gP]:n.ONE_MINUS_DST_COLOR,[pP]:n.ONE_MINUS_DST_ALPHA};function pe(J,Pe,se,Oe,Be,Pt,Yt,pn){if(J===ro){g===!0&&(Ze(n.BLEND),g=!1);return}if(g===!1&&(Re(n.BLEND),g=!0),J!==oP){if(J!==x||pn!==R){if((w!==Wa||b!==Wa)&&(n.blendEquation(n.FUNC_ADD),w=Wa,b=Wa),pn)switch(J){case rl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dx:n.blendFunc(n.ONE,n.ONE);break;case hx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case px:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case rl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case hx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case px:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}M=null,A=null,I=null,L=null,x=J,R=pn}return}Be=Be||Pe,Pt=Pt||se,Yt=Yt||Oe,(Pe!==w||Be!==b)&&(n.blendEquationSeparate(G[Pe],G[Be]),w=Pe,b=Be),(se!==M||Oe!==A||Pt!==I||Yt!==L)&&(n.blendFuncSeparate(_e[se],_e[Oe],_e[Pt],_e[Yt]),M=se,A=Oe,I=Pt,L=Yt),x=J,R=!1}function be(J,Pe){J.side===vs?Ze(n.CULL_FACE):Re(n.CULL_FACE);let se=J.side===Ar;Pe&&(se=!se),ye(se),J.blending===rl&&J.transparent===!1?pe(ro):pe(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),a.setMask(J.colorWrite);const Oe=J.stencilWrite;u.setTest(Oe),Oe&&(u.setMask(J.stencilWriteMask),u.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),u.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),ze(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):Ze(n.SAMPLE_ALPHA_TO_COVERAGE)}function ye(J){P!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),P=J)}function $e(J){J!==rP?(Re(n.CULL_FACE),J!==k&&(J===fx?n.cullFace(n.BACK):J===iP?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ze(n.CULL_FACE),k=J}function Ue(J){J!==V&&(Z&&n.lineWidth(J),V=J)}function ze(J,Pe,se){J?(Re(n.POLYGON_OFFSET_FILL),(H!==Pe||j!==se)&&(n.polygonOffset(Pe,se),H=Pe,j=se)):Ze(n.POLYGON_OFFSET_FILL)}function Je(J){J?Re(n.SCISSOR_TEST):Ze(n.SCISSOR_TEST)}function yt(J){J===void 0&&(J=n.TEXTURE0+q-1),K!==J&&(n.activeTexture(J),K=J)}function Bt(J,Pe,se){se===void 0&&(K===null?se=n.TEXTURE0+q-1:se=K);let Oe=X[se];Oe===void 0&&(Oe={type:void 0,texture:void 0},X[se]=Oe),(Oe.type!==J||Oe.texture!==Pe)&&(K!==se&&(n.activeTexture(se),K=se),n.bindTexture(J,Pe||we[J]),Oe.type=J,Oe.texture=Pe)}function N(){const J=X[K];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function O(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function xe(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Se(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ie(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function fe(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Y(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ue(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ee(J){he.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),he.copy(J))}function Me(J){le.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),le.copy(J))}function De(J,Pe){let se=h.get(Pe);se===void 0&&(se=new WeakMap,h.set(Pe,se));let Oe=se.get(J);Oe===void 0&&(Oe=n.getUniformBlockIndex(Pe,J.name),se.set(J,Oe))}function nt(J,Pe){const Oe=h.get(Pe).get(J);d.get(Pe)!==Oe&&(n.uniformBlockBinding(Pe,Oe,J.__bindingPointIndex),d.set(Pe,Oe))}function Rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},K=null,X={},m={},v=new WeakMap,S=[],_=null,g=!1,x=null,w=null,M=null,A=null,b=null,I=null,L=null,R=!1,P=null,k=null,V=null,H=null,j=null,he.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Re,disable:Ze,bindFramebuffer:Qe,drawBuffers:xt,useProgram:Ke,setBlending:pe,setMaterial:be,setFlipSided:ye,setCullFace:$e,setLineWidth:Ue,setPolygonOffset:ze,setScissorTest:Je,activeTexture:yt,bindTexture:Bt,unbindTexture:N,compressedTexImage2D:O,compressedTexImage3D:ae,texImage2D:Y,texImage3D:ue,updateUBOMapping:De,uniformBlockBinding:nt,texStorage2D:Ie,texStorage3D:fe,texSubImage2D:xe,texSubImage3D:Se,compressedTexSubImage2D:Le,compressedTexSubImage3D:Ve,scissor:Ee,viewport:Me,reset:Rt}}function G5(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,h=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let S;const _=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(N,O){return g?new OffscreenCanvas(N,O):bd("canvas")}function w(N,O,ae,xe){let Se=1;if((N.width>xe||N.height>xe)&&(Se=xe/Math.max(N.width,N.height)),Se<1||O===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const Le=O?bg:Math.floor,Ve=Le(Se*N.width),Ie=Le(Se*N.height);S===void 0&&(S=x(Ve,Ie));const fe=ae?x(Ve,Ie):S;return fe.width=Ve,fe.height=Ie,fe.getContext("2d").drawImage(N,0,0,Ve,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Ve+"x"+Ie+")."),fe}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function M(N){return Hx(N.width)&&Hx(N.height)}function A(N){return a?!1:N.wrapS!==Yn||N.wrapT!==Yn||N.minFilter!==An&&N.minFilter!==Rn}function b(N,O){return N.generateMipmaps&&O&&N.minFilter!==An&&N.minFilter!==Rn}function I(N){n.generateMipmap(N)}function L(N,O,ae,xe,Se=!1){if(a===!1)return O;if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Le=O;return O===n.RED&&(ae===n.FLOAT&&(Le=n.R32F),ae===n.HALF_FLOAT&&(Le=n.R16F),ae===n.UNSIGNED_BYTE&&(Le=n.R8)),O===n.RG&&(ae===n.FLOAT&&(Le=n.RG32F),ae===n.HALF_FLOAT&&(Le=n.RG16F),ae===n.UNSIGNED_BYTE&&(Le=n.RG8)),O===n.RGBA&&(ae===n.FLOAT&&(Le=n.RGBA32F),ae===n.HALF_FLOAT&&(Le=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(Le=xe===vt&&Se===!1?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)),(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function R(N,O,ae){return b(N,ae)===!0||N.isFramebufferTexture&&N.minFilter!==An&&N.minFilter!==Rn?Math.log2(Math.max(O.width,O.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?O.mipmaps.length:1}function P(N){return N===An||N===Mg||N===$f?n.NEAREST:n.LINEAR}function k(N){const O=N.target;O.removeEventListener("dispose",k),H(O),O.isVideoTexture&&v.delete(O)}function V(N){const O=N.target;O.removeEventListener("dispose",V),q(O)}function H(N){const O=r.get(N);if(O.__webglInit===void 0)return;const ae=N.source,xe=_.get(ae);if(xe){const Se=xe[O.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&j(N),Object.keys(xe).length===0&&_.delete(ae)}r.remove(N)}function j(N){const O=r.get(N);n.deleteTexture(O.__webglTexture);const ae=N.source,xe=_.get(ae);delete xe[O.__cacheKey],o.memory.textures--}function q(N){const O=N.texture,ae=r.get(N),xe=r.get(O);if(xe.__webglTexture!==void 0&&(n.deleteTexture(xe.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)n.deleteFramebuffer(ae.__webglFramebuffer[Se]),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[Se]);else{if(n.deleteFramebuffer(ae.__webglFramebuffer),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let Se=0;Se<ae.__webglColorRenderbuffer.length;Se++)ae.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[Se]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Se=0,Le=O.length;Se<Le;Se++){const Ve=r.get(O[Se]);Ve.__webglTexture&&(n.deleteTexture(Ve.__webglTexture),o.memory.textures--),r.remove(O[Se])}r.remove(O),r.remove(N)}let Z=0;function ee(){Z=0}function F(){const N=Z;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),Z+=1,N}function K(N){const O=[];return O.push(N.wrapS),O.push(N.wrapT),O.push(N.wrapR||0),O.push(N.magFilter),O.push(N.minFilter),O.push(N.anisotropy),O.push(N.internalFormat),O.push(N.format),O.push(N.type),O.push(N.generateMipmaps),O.push(N.premultiplyAlpha),O.push(N.flipY),O.push(N.unpackAlignment),O.push(N.colorSpace),O.join()}function X(N,O){const ae=r.get(N);if(N.isVideoTexture&&yt(N),N.isRenderTargetTexture===!1&&N.version>0&&ae.__version!==N.version){const xe=N.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Qe(ae,N,O);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+O)}function oe(N,O){const ae=r.get(N);if(N.version>0&&ae.__version!==N.version){Qe(ae,N,O);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+O)}function W(N,O){const ae=r.get(N);if(N.version>0&&ae.__version!==N.version){Qe(ae,N,O);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+O)}function he(N,O){const ae=r.get(N);if(N.version>0&&ae.__version!==N.version){xt(ae,N,O);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+O)}const le={[pl]:n.REPEAT,[Yn]:n.CLAMP_TO_EDGE,[xd]:n.MIRRORED_REPEAT},Te={[An]:n.NEAREST,[Mg]:n.NEAREST_MIPMAP_NEAREST,[$f]:n.NEAREST_MIPMAP_LINEAR,[Rn]:n.LINEAR,[TS]:n.LINEAR_MIPMAP_NEAREST,[da]:n.LINEAR_MIPMAP_LINEAR},we={[XP]:n.NEVER,[e3]:n.ALWAYS,[YP]:n.LESS,[KP]:n.LEQUAL,[qP]:n.EQUAL,[QP]:n.GEQUAL,[ZP]:n.GREATER,[JP]:n.NOTEQUAL};function Re(N,O,ae){if(ae?(n.texParameteri(N,n.TEXTURE_WRAP_S,le[O.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,le[O.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,le[O.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Te[O.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Te[O.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(O.wrapS!==Yn||O.wrapT!==Yn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,P(O.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,P(O.minFilter)),O.minFilter!==An&&O.minFilter!==Rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),O.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,we[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===An||O.minFilter!==$f&&O.minFilter!==da||O.type===ys&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===ou&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf(N,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function Ze(N,O){let ae=!1;N.__webglInit===void 0&&(N.__webglInit=!0,O.addEventListener("dispose",k));const xe=O.source;let Se=_.get(xe);Se===void 0&&(Se={},_.set(xe,Se));const Le=K(O);if(Le!==N.__cacheKey){Se[Le]===void 0&&(Se[Le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),Se[Le].usedTimes++;const Ve=Se[N.__cacheKey];Ve!==void 0&&(Se[N.__cacheKey].usedTimes--,Ve.usedTimes===0&&j(O)),N.__cacheKey=Le,N.__webglTexture=Se[Le].texture}return ae}function Qe(N,O,ae){let xe=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(xe=n.TEXTURE_3D);const Se=Ze(N,O),Le=O.source;t.bindTexture(xe,N.__webglTexture,n.TEXTURE0+ae);const Ve=r.get(Le);if(Le.version!==Ve.__version||Se===!0){t.activeTexture(n.TEXTURE0+ae),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ie=A(O)&&M(O.image)===!1;let fe=w(O.image,Ie,!1,d);fe=Bt(O,fe);const Y=M(fe)||a,ue=s.convert(O.format,O.colorSpace);let Ee=s.convert(O.type),Me=L(O.internalFormat,ue,Ee,O.colorSpace);Re(xe,O,Y);let De;const nt=O.mipmaps,Rt=a&&O.isVideoTexture!==!0,J=Ve.__version===void 0||Se===!0,Pe=R(O,fe,Y);if(O.isDepthTexture)Me=n.DEPTH_COMPONENT,a?O.type===ys?Me=n.DEPTH_COMPONENT32F:O.type===to?Me=n.DEPTH_COMPONENT24:O.type===ia?Me=n.DEPTH24_STENCIL8:Me=n.DEPTH_COMPONENT16:O.type===ys&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===sa&&Me===n.DEPTH_COMPONENT&&O.type!==h0&&O.type!==to&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=to,Ee=s.convert(O.type)),O.format===ml&&Me===n.DEPTH_COMPONENT&&(Me=n.DEPTH_STENCIL,O.type!==ia&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=ia,Ee=s.convert(O.type))),J&&(Rt?t.texStorage2D(n.TEXTURE_2D,1,Me,fe.width,fe.height):t.texImage2D(n.TEXTURE_2D,0,Me,fe.width,fe.height,0,ue,Ee,null));else if(O.isDataTexture)if(nt.length>0&&Y){Rt&&J&&t.texStorage2D(n.TEXTURE_2D,Pe,Me,nt[0].width,nt[0].height);for(let se=0,Oe=nt.length;se<Oe;se++)De=nt[se],Rt?t.texSubImage2D(n.TEXTURE_2D,se,0,0,De.width,De.height,ue,Ee,De.data):t.texImage2D(n.TEXTURE_2D,se,Me,De.width,De.height,0,ue,Ee,De.data);O.generateMipmaps=!1}else Rt?(J&&t.texStorage2D(n.TEXTURE_2D,Pe,Me,fe.width,fe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,fe.width,fe.height,ue,Ee,fe.data)):t.texImage2D(n.TEXTURE_2D,0,Me,fe.width,fe.height,0,ue,Ee,fe.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){Rt&&J&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Pe,Me,nt[0].width,nt[0].height,fe.depth);for(let se=0,Oe=nt.length;se<Oe;se++)De=nt[se],O.format!==Fr?ue!==null?Rt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,De.width,De.height,fe.depth,ue,De.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,se,Me,De.width,De.height,fe.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,De.width,De.height,fe.depth,ue,Ee,De.data):t.texImage3D(n.TEXTURE_2D_ARRAY,se,Me,De.width,De.height,fe.depth,0,ue,Ee,De.data)}else{Rt&&J&&t.texStorage2D(n.TEXTURE_2D,Pe,Me,nt[0].width,nt[0].height);for(let se=0,Oe=nt.length;se<Oe;se++)De=nt[se],O.format!==Fr?ue!==null?Rt?t.compressedTexSubImage2D(n.TEXTURE_2D,se,0,0,De.width,De.height,ue,De.data):t.compressedTexImage2D(n.TEXTURE_2D,se,Me,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rt?t.texSubImage2D(n.TEXTURE_2D,se,0,0,De.width,De.height,ue,Ee,De.data):t.texImage2D(n.TEXTURE_2D,se,Me,De.width,De.height,0,ue,Ee,De.data)}else if(O.isDataArrayTexture)Rt?(J&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Pe,Me,fe.width,fe.height,fe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,fe.width,fe.height,fe.depth,ue,Ee,fe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Me,fe.width,fe.height,fe.depth,0,ue,Ee,fe.data);else if(O.isData3DTexture)Rt?(J&&t.texStorage3D(n.TEXTURE_3D,Pe,Me,fe.width,fe.height,fe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,fe.width,fe.height,fe.depth,ue,Ee,fe.data)):t.texImage3D(n.TEXTURE_3D,0,Me,fe.width,fe.height,fe.depth,0,ue,Ee,fe.data);else if(O.isFramebufferTexture){if(J)if(Rt)t.texStorage2D(n.TEXTURE_2D,Pe,Me,fe.width,fe.height);else{let se=fe.width,Oe=fe.height;for(let Be=0;Be<Pe;Be++)t.texImage2D(n.TEXTURE_2D,Be,Me,se,Oe,0,ue,Ee,null),se>>=1,Oe>>=1}}else if(nt.length>0&&Y){Rt&&J&&t.texStorage2D(n.TEXTURE_2D,Pe,Me,nt[0].width,nt[0].height);for(let se=0,Oe=nt.length;se<Oe;se++)De=nt[se],Rt?t.texSubImage2D(n.TEXTURE_2D,se,0,0,ue,Ee,De):t.texImage2D(n.TEXTURE_2D,se,Me,ue,Ee,De);O.generateMipmaps=!1}else Rt?(J&&t.texStorage2D(n.TEXTURE_2D,Pe,Me,fe.width,fe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ue,Ee,fe)):t.texImage2D(n.TEXTURE_2D,0,Me,ue,Ee,fe);b(O,Y)&&I(xe),Ve.__version=Le.version,O.onUpdate&&O.onUpdate(O)}N.__version=O.version}function xt(N,O,ae){if(O.image.length!==6)return;const xe=Ze(N,O),Se=O.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+ae);const Le=r.get(Se);if(Se.version!==Le.__version||xe===!0){t.activeTexture(n.TEXTURE0+ae),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ve=O.isCompressedTexture||O.image[0].isCompressedTexture,Ie=O.image[0]&&O.image[0].isDataTexture,fe=[];for(let se=0;se<6;se++)!Ve&&!Ie?fe[se]=w(O.image[se],!1,!0,u):fe[se]=Ie?O.image[se].image:O.image[se],fe[se]=Bt(O,fe[se]);const Y=fe[0],ue=M(Y)||a,Ee=s.convert(O.format,O.colorSpace),Me=s.convert(O.type),De=L(O.internalFormat,Ee,Me,O.colorSpace),nt=a&&O.isVideoTexture!==!0,Rt=Le.__version===void 0||xe===!0;let J=R(O,Y,ue);Re(n.TEXTURE_CUBE_MAP,O,ue);let Pe;if(Ve){nt&&Rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,J,De,Y.width,Y.height);for(let se=0;se<6;se++){Pe=fe[se].mipmaps;for(let Oe=0;Oe<Pe.length;Oe++){const Be=Pe[Oe];O.format!==Fr?Ee!==null?nt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe,0,0,Be.width,Be.height,Ee,Be.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe,De,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe,0,0,Be.width,Be.height,Ee,Me,Be.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe,De,Be.width,Be.height,0,Ee,Me,Be.data)}}}else{Pe=O.mipmaps,nt&&Rt&&(Pe.length>0&&J++,t.texStorage2D(n.TEXTURE_CUBE_MAP,J,De,fe[0].width,fe[0].height));for(let se=0;se<6;se++)if(Ie){nt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,fe[se].width,fe[se].height,Ee,Me,fe[se].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,De,fe[se].width,fe[se].height,0,Ee,Me,fe[se].data);for(let Oe=0;Oe<Pe.length;Oe++){const Pt=Pe[Oe].image[se].image;nt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe+1,0,0,Pt.width,Pt.height,Ee,Me,Pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe+1,De,Pt.width,Pt.height,0,Ee,Me,Pt.data)}}else{nt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,Ee,Me,fe[se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,De,Ee,Me,fe[se]);for(let Oe=0;Oe<Pe.length;Oe++){const Be=Pe[Oe];nt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe+1,0,0,Ee,Me,Be.image[se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+se,Oe+1,De,Ee,Me,Be.image[se])}}}b(O,ue)&&I(n.TEXTURE_CUBE_MAP),Le.__version=Se.version,O.onUpdate&&O.onUpdate(O)}N.__version=O.version}function Ke(N,O,ae,xe,Se){const Le=s.convert(ae.format,ae.colorSpace),Ve=s.convert(ae.type),Ie=L(ae.internalFormat,Le,Ve,ae.colorSpace);r.get(O).__hasExternalTextures||(Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?t.texImage3D(Se,0,Ie,O.width,O.height,O.depth,0,Le,Ve,null):t.texImage2D(Se,0,Ie,O.width,O.height,0,Le,Ve,null)),t.bindFramebuffer(n.FRAMEBUFFER,N),Je(O)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,Se,r.get(ae).__webglTexture,0,ze(O)):(Se===n.TEXTURE_2D||Se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,Se,r.get(ae).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function G(N,O,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,N),O.depthBuffer&&!O.stencilBuffer){let xe=n.DEPTH_COMPONENT16;if(ae||Je(O)){const Se=O.depthTexture;Se&&Se.isDepthTexture&&(Se.type===ys?xe=n.DEPTH_COMPONENT32F:Se.type===to&&(xe=n.DEPTH_COMPONENT24));const Le=ze(O);Je(O)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Le,xe,O.width,O.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,xe,O.width,O.height)}else n.renderbufferStorage(n.RENDERBUFFER,xe,O.width,O.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(O.depthBuffer&&O.stencilBuffer){const xe=ze(O);ae&&Je(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,O.width,O.height):Je(O)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const xe=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Se=0;Se<xe.length;Se++){const Le=xe[Se],Ve=s.convert(Le.format,Le.colorSpace),Ie=s.convert(Le.type),fe=L(Le.internalFormat,Ve,Ie,Le.colorSpace),Y=ze(O);ae&&Je(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Y,fe,O.width,O.height):Je(O)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Y,fe,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,fe,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function _e(N,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),X(O.depthTexture,0);const xe=r.get(O.depthTexture).__webglTexture,Se=ze(O);if(O.depthTexture.format===sa)Je(O)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,Se):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(O.depthTexture.format===ml)Je(O)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,Se):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function pe(N){const O=r.get(N),ae=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!O.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");_e(O.__webglFramebuffer,N)}else if(ae){O.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[xe]),O.__webglDepthbuffer[xe]=n.createRenderbuffer(),G(O.__webglDepthbuffer[xe],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),G(O.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function be(N,O,ae){const xe=r.get(N);O!==void 0&&Ke(xe.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),ae!==void 0&&pe(N)}function ye(N){const O=N.texture,ae=r.get(N),xe=r.get(O);N.addEventListener("dispose",V),N.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=O.version,o.memory.textures++);const Se=N.isWebGLCubeRenderTarget===!0,Le=N.isWebGLMultipleRenderTargets===!0,Ve=M(N)||a;if(Se){ae.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)ae.__webglFramebuffer[Ie]=n.createFramebuffer()}else{if(ae.__webglFramebuffer=n.createFramebuffer(),Le)if(i.drawBuffers){const Ie=N.texture;for(let fe=0,Y=Ie.length;fe<Y;fe++){const ue=r.get(Ie[fe]);ue.__webglTexture===void 0&&(ue.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&Je(N)===!1){const Ie=Le?O:[O];ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let fe=0;fe<Ie.length;fe++){const Y=Ie[fe];ae.__webglColorRenderbuffer[fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[fe]);const ue=s.convert(Y.format,Y.colorSpace),Ee=s.convert(Y.type),Me=L(Y.internalFormat,ue,Ee,Y.colorSpace,N.isXRRenderTarget===!0),De=ze(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,De,Me,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fe,n.RENDERBUFFER,ae.__webglColorRenderbuffer[fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),G(ae.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Se){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),Re(n.TEXTURE_CUBE_MAP,O,Ve);for(let Ie=0;Ie<6;Ie++)Ke(ae.__webglFramebuffer[Ie],N,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie);b(O,Ve)&&I(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){const Ie=N.texture;for(let fe=0,Y=Ie.length;fe<Y;fe++){const ue=Ie[fe],Ee=r.get(ue);t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture),Re(n.TEXTURE_2D,ue,Ve),Ke(ae.__webglFramebuffer,N,ue,n.COLOR_ATTACHMENT0+fe,n.TEXTURE_2D),b(ue,Ve)&&I(n.TEXTURE_2D)}t.unbindTexture()}else{let Ie=n.TEXTURE_2D;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Ie=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ie,xe.__webglTexture),Re(Ie,O,Ve),Ke(ae.__webglFramebuffer,N,O,n.COLOR_ATTACHMENT0,Ie),b(O,Ve)&&I(Ie),t.unbindTexture()}N.depthBuffer&&pe(N)}function $e(N){const O=M(N)||a,ae=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let xe=0,Se=ae.length;xe<Se;xe++){const Le=ae[xe];if(b(Le,O)){const Ve=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ie=r.get(Le).__webglTexture;t.bindTexture(Ve,Ie),I(Ve),t.unbindTexture()}}}function Ue(N){if(a&&N.samples>0&&Je(N)===!1){const O=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],ae=N.width,xe=N.height;let Se=n.COLOR_BUFFER_BIT;const Le=[],Ve=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=r.get(N),fe=N.isWebGLMultipleRenderTargets===!0;if(fe)for(let Y=0;Y<O.length;Y++)t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Y,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Y,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ie.__webglFramebuffer);for(let Y=0;Y<O.length;Y++){Le.push(n.COLOR_ATTACHMENT0+Y),N.depthBuffer&&Le.push(Ve);const ue=Ie.__ignoreDepthValues!==void 0?Ie.__ignoreDepthValues:!1;if(ue===!1&&(N.depthBuffer&&(Se|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(Se|=n.STENCIL_BUFFER_BIT)),fe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ie.__webglColorRenderbuffer[Y]),ue===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ve]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ve])),fe){const Ee=r.get(O[Y]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ee,0)}n.blitFramebuffer(0,0,ae,xe,0,0,ae,xe,Se,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Le)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),fe)for(let Y=0;Y<O.length;Y++){t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Y,n.RENDERBUFFER,Ie.__webglColorRenderbuffer[Y]);const ue=r.get(O[Y]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Y,n.TEXTURE_2D,ue,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer)}}function ze(N){return Math.min(h,N.samples)}function Je(N){const O=r.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function yt(N){const O=o.render.frame;v.get(N)!==O&&(v.set(N,O),N.update())}function Bt(N,O){const ae=N.colorSpace,xe=N.format,Se=N.type;return N.isCompressedTexture===!0||N.format===Tg||ae!==Zi&&ae!==aa&&(ae===vt?a===!1?e.has("EXT_sRGB")===!0&&xe===Fr?(N.format=Tg,N.minFilter=Rn,N.generateMipmaps=!1):O=NS.sRGBToLinear(O):(xe!==Fr||Se!==Es)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),O}this.allocateTextureUnit=F,this.resetTextureUnits=ee,this.setTexture2D=X,this.setTexture2DArray=oe,this.setTexture3D=W,this.setTextureCube=he,this.rebindTextures=be,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=$e,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=Ke,this.useMultisampledRTT=Je}function h3(n,e,t){const r=t.isWebGL2;function i(s,o=aa){let a;if(s===Es)return n.UNSIGNED_BYTE;if(s===AS)return n.UNSIGNED_SHORT_4_4_4_4;if(s===CS)return n.UNSIGNED_SHORT_5_5_5_1;if(s===LP)return n.BYTE;if(s===IP)return n.SHORT;if(s===h0)return n.UNSIGNED_SHORT;if(s===bS)return n.INT;if(s===to)return n.UNSIGNED_INT;if(s===ys)return n.FLOAT;if(s===ou)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===DP)return n.ALPHA;if(s===Fr)return n.RGBA;if(s===OP)return n.LUMINANCE;if(s===kP)return n.LUMINANCE_ALPHA;if(s===sa)return n.DEPTH_COMPONENT;if(s===ml)return n.DEPTH_STENCIL;if(s===Tg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===NP)return n.RED;if(s===RS)return n.RED_INTEGER;if(s===UP)return n.RG;if(s===PS)return n.RG_INTEGER;if(s===LS)return n.RGBA_INTEGER;if(s===Vm||s===Gm||s===Wm||s===$m)if(o===vt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Vm)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Gm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Wm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$m)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Vm)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Gm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Wm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$m)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===vx||s===yx||s===_x||s===xx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===vx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===yx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===_x)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===xx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===FP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Sx||s===wx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Sx)return o===vt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===wx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Ex||s===Mx||s===Tx||s===bx||s===Ax||s===Cx||s===Rx||s===Px||s===Lx||s===Ix||s===Dx||s===Ox||s===kx||s===Nx)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Ex)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Mx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Tx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===bx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Ax)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Cx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Rx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Px)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Lx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Ix)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Dx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Ox)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===kx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Nx)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===jm)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===jm)return o===vt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===zP||s===Ux||s===Fx||s===zx)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===jm)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Ux)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Fx)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===zx)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ia?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class p3 extends Sn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yo extends Lt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const W5={type:"move"};class Oy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const _=t.getJointPose(S,r),g=this._getHandJoint(u,S);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const d=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=d.position.distanceTo(h.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(W5)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Yo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class m3 extends rn{constructor(e,t,r,i,s,o,a,l,u,d){if(d=d!==void 0?d:sa,d!==sa&&d!==ml)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===sa&&(r=to),r===void 0&&d===ml&&(r=ia),super(null,i,s,o,a,l,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:An,this.minFilter=l!==void 0?l:An,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class $5 extends Rs{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,d=null,h=null,p=null,m=null,v=null;const S=t.getContextAttributes();let _=null,g=null;const x=[],w=[];let M=null;const A=new Sn;A.layers.enable(1),A.viewport=new It;const b=new Sn;b.layers.enable(2),b.viewport=new It;const I=[A,b],L=new p3;L.layers.enable(1),L.layers.enable(2);let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(W){M=W},this.getController=function(W){let he=x[W];return he===void 0&&(he=new Oy,x[W]=he),he.getTargetRaySpace()},this.getControllerGrip=function(W){let he=x[W];return he===void 0&&(he=new Oy,x[W]=he),he.getGripSpace()},this.getHand=function(W){let he=x[W];return he===void 0&&(he=new Oy,x[W]=he),he.getHandSpace()};function k(W){const he=w.indexOf(W.inputSource);if(he===-1)return;const le=x[he];le!==void 0&&(le.update(W.inputSource,W.frame,u||o),le.dispatchEvent({type:W.type,data:W.inputSource}))}function V(){i.removeEventListener("select",k),i.removeEventListener("selectstart",k),i.removeEventListener("selectend",k),i.removeEventListener("squeeze",k),i.removeEventListener("squeezestart",k),i.removeEventListener("squeezeend",k),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",H);for(let W=0;W<x.length;W++){const he=w[W];he!==null&&(w[W]=null,x[W].disconnect(he))}R=null,P=null,e.setRenderTarget(_),m=null,p=null,h=null,i=null,g=null,oe.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){a=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(W){u=W},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(W){if(i=W,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",k),i.addEventListener("selectstart",k),i.addEventListener("selectend",k),i.addEventListener("squeeze",k),i.addEventListener("squeezestart",k),i.addEventListener("squeezeend",k),i.addEventListener("end",V),i.addEventListener("inputsourceschange",H),S.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:i.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,he),i.updateRenderState({baseLayer:m}),g=new Ji(m.framebufferWidth,m.framebufferHeight,{format:Fr,type:Es,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let he=null,le=null,Te=null;S.depth&&(Te=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=S.stencil?ml:sa,le=S.stencil?ia:to);const we={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:s};h=new XRWebGLBinding(i,t),p=h.createProjectionLayer(we),i.updateRenderState({layers:[p]}),g=new Ji(p.textureWidth,p.textureHeight,{format:Fr,type:Es,depthTexture:new m3(p.textureWidth,p.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const Re=e.properties.get(g);Re.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),oe.setContext(i),oe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function H(W){for(let he=0;he<W.removed.length;he++){const le=W.removed[he],Te=w.indexOf(le);Te>=0&&(w[Te]=null,x[Te].disconnect(le))}for(let he=0;he<W.added.length;he++){const le=W.added[he];let Te=w.indexOf(le);if(Te===-1){for(let Re=0;Re<x.length;Re++)if(Re>=w.length){w.push(le),Te=Re;break}else if(w[Re]===null){w[Re]=le,Te=Re;break}if(Te===-1)break}const we=x[Te];we&&we.connect(le)}}const j=new U,q=new U;function Z(W,he,le){j.setFromMatrixPosition(he.matrixWorld),q.setFromMatrixPosition(le.matrixWorld);const Te=j.distanceTo(q),we=he.projectionMatrix.elements,Re=le.projectionMatrix.elements,Ze=we[14]/(we[10]-1),Qe=we[14]/(we[10]+1),xt=(we[9]+1)/we[5],Ke=(we[9]-1)/we[5],G=(we[8]-1)/we[0],_e=(Re[8]+1)/Re[0],pe=Ze*G,be=Ze*_e,ye=Te/(-G+_e),$e=ye*-G;he.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX($e),W.translateZ(ye),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Ue=Ze+ye,ze=Qe+ye,Je=pe-$e,yt=be+(Te-$e),Bt=xt*Qe/ze*Ue,N=Ke*Qe/ze*Ue;W.projectionMatrix.makePerspective(Je,yt,Bt,N,Ue,ze),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}function ee(W,he){he===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(he.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCameraXR=function(W){if(i===null)return W;M&&(W=M),L.near=b.near=A.near=W.near,L.far=b.far=A.far=W.far,(R!==L.near||P!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),R=L.near,P=L.far);const he=W.parent,le=L.cameras;ee(L,he);for(let Te=0;Te<le.length;Te++)ee(le[Te],he);return le.length===2?Z(L,A,b):L.projectionMatrix.copy(A.projectionMatrix),M&&F(L,he),L};function F(W,he){const le=M;he===null?le.matrix.copy(W.matrixWorld):(le.matrix.copy(he.matrixWorld),le.matrix.invert(),le.matrix.multiply(W.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0);const Te=le.children;for(let we=0,Re=Te.length;we<Re;we++)Te[we].updateMatrixWorld(!0);le.projectionMatrix.copy(W.projectionMatrix),le.projectionMatrixInverse.copy(W.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=au*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(W){l=W,p!==null&&(p.fixedFoveation=W),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=W)};let K=null;function X(W,he){if(d=he.getViewerPose(u||o),v=he,d!==null){const le=d.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Te=!1;le.length!==L.cameras.length&&(L.cameras.length=0,Te=!0);for(let we=0;we<le.length;we++){const Re=le[we];let Ze=null;if(m!==null)Ze=m.getViewport(Re);else{const xt=h.getViewSubImage(p,Re);Ze=xt.viewport,we===0&&(e.setRenderTargetTextures(g,xt.colorTexture,p.ignoreDepthValues?void 0:xt.depthStencilTexture),e.setRenderTarget(g))}let Qe=I[we];Qe===void 0&&(Qe=new Sn,Qe.layers.enable(we),Qe.viewport=new It,I[we]=Qe),Qe.matrix.fromArray(Re.transform.matrix),Qe.matrix.decompose(Qe.position,Qe.quaternion,Qe.scale),Qe.projectionMatrix.fromArray(Re.projectionMatrix),Qe.projectionMatrixInverse.copy(Qe.projectionMatrix).invert(),Qe.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),we===0&&(L.matrix.copy(Qe.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),Te===!0&&L.cameras.push(Qe)}}for(let le=0;le<x.length;le++){const Te=w[le],we=x[le];Te!==null&&we!==void 0&&we.update(Te,he,u||o)}K&&K(W,he),he.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:he}),v=null}const oe=new l3;oe.setAnimationLoop(X),this.setAnimationLoop=function(W){K=W},this.dispose=function(){}}}function j5(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,i3(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,x,w,M){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),h(_,g)):g.isMeshPhongMaterial?(s(_,g),d(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,M)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),S(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,x,w):g.isSpriteMaterial?u(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Ar&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Ar&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(_.envMap.value=x,_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const w=n.useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*w,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,x,w){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*x,_.scale.value=w*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function d(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function h(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,x){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ar&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=x.texture,_.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function S(_,g){const x=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(x.matrixWorld),_.nearDistance.value=x.shadow.camera.near,_.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function X5(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,w){const M=w.program;r.uniformBlockBinding(x,M)}function u(x,w){let M=i[x.id];M===void 0&&(v(x),M=d(x),i[x.id]=M,x.addEventListener("dispose",_));const A=w.program;r.updateUBOMapping(x,A);const b=e.render.frame;s[x.id]!==b&&(p(x),s[x.id]=b)}function d(x){const w=h();x.__bindingPointIndex=w;const M=n.createBuffer(),A=x.__size,b=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,A,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,M),M}function h(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const w=i[x.id],M=x.uniforms,A=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let b=0,I=M.length;b<I;b++){const L=M[b];if(m(L,b,A)===!0){const R=L.__offset,P=Array.isArray(L.value)?L.value:[L.value];let k=0;for(let V=0;V<P.length;V++){const H=P[V],j=S(H);typeof H=="number"?(L.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,R+k,L.__data)):H.isMatrix3?(L.__data[0]=H.elements[0],L.__data[1]=H.elements[1],L.__data[2]=H.elements[2],L.__data[3]=H.elements[0],L.__data[4]=H.elements[3],L.__data[5]=H.elements[4],L.__data[6]=H.elements[5],L.__data[7]=H.elements[0],L.__data[8]=H.elements[6],L.__data[9]=H.elements[7],L.__data[10]=H.elements[8],L.__data[11]=H.elements[0]):(H.toArray(L.__data,k),k+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,L.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,w,M){const A=x.value;if(M[w]===void 0){if(typeof A=="number")M[w]=A;else{const b=Array.isArray(A)?A:[A],I=[];for(let L=0;L<b.length;L++)I.push(b[L].clone());M[w]=I}return!0}else if(typeof A=="number"){if(M[w]!==A)return M[w]=A,!0}else{const b=Array.isArray(M[w])?M[w]:[M[w]],I=Array.isArray(A)?A:[A];for(let L=0;L<b.length;L++){const R=b[L];if(R.equals(I[L])===!1)return R.copy(I[L]),!0}}return!1}function v(x){const w=x.uniforms;let M=0;const A=16;let b=0;for(let I=0,L=w.length;I<L;I++){const R=w[I],P={boundary:0,storage:0},k=Array.isArray(R.value)?R.value:[R.value];for(let V=0,H=k.length;V<H;V++){const j=k[V],q=S(j);P.boundary+=q.boundary,P.storage+=q.storage}if(R.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=M,I>0){b=M%A;const V=A-b;b!==0&&V-P.boundary<0&&(M+=A-b,R.__offset=M)}M+=P.storage}return b=M%A,b>0&&(M+=A-b),x.__size=M,x.__cache={},this}function S(x){const w={boundary:0,storage:0};return typeof x=="number"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function _(x){const w=x.target;w.removeEventListener("dispose",_);const M=o.indexOf(w.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function g(){for(const x in i)n.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}function Y5(){const n=bd("canvas");return n.style.display="block",n}class VS{constructor(e={}){const{canvas:t=Y5(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let S=null,_=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=vt,this.useLegacyLights=!0,this.toneMapping=Yi,this.toneMappingExposure=1;const w=this;let M=!1,A=0,b=0,I=null,L=-1,R=null;const P=new It,k=new It;let V=null;const H=new Ne(0);let j=0,q=t.width,Z=t.height,ee=1,F=null,K=null;const X=new It(0,0,q,Z),oe=new It(0,0,q,Z);let W=!1;const he=new v0;let le=!1,Te=!1,we=null;const Re=new qe,Ze=new ve,Qe=new U,xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ke(){return I===null?ee:1}let G=r;function _e(z,ie){for(let me=0;me<z.length;me++){const ne=z[me],ge=t.getContext(ne,ie);if(ge!==null)return ge}return null}try{const z={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${c0}`),t.addEventListener("webglcontextlost",Pe,!1),t.addEventListener("webglcontextrestored",se,!1),t.addEventListener("webglcontextcreationerror",Oe,!1),G===null){const ie=["webgl2","webgl","experimental-webgl"];if(w.isWebGL1Renderer===!0&&ie.shift(),G=_e(ie,z),G===null)throw _e(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}G instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let pe,be,ye,$e,Ue,ze,Je,yt,Bt,N,O,ae,xe,Se,Le,Ve,Ie,fe,Y,ue,Ee,Me,De,nt;function Rt(){pe=new u4(G),be=new i4(G,pe,e),pe.init(be),Me=new h3(G,pe,be),ye=new V5(G,pe,be),$e=new h4(G),Ue=new P5,ze=new G5(G,pe,ye,Ue,be,Me,$e),Je=new o4(w),yt=new c4(w),Bt=new TF(G,be),De=new n4(G,pe,Bt,be),N=new f4(G,Bt,$e,De),O=new v4(G,N,Bt,$e),Y=new g4(G,be,ze),Ve=new s4(Ue),ae=new R5(w,Je,yt,pe,be,De,Ve),xe=new j5(w,Ue),Se=new I5,Le=new F5(pe,be),fe=new t4(w,Je,yt,ye,O,p,l),Ie=new H5(w,O,be),nt=new X5(G,$e,be,ye),ue=new r4(G,pe,$e,be),Ee=new d4(G,pe,$e,be),$e.programs=ae.programs,w.capabilities=be,w.extensions=pe,w.properties=Ue,w.renderLists=Se,w.shadowMap=Ie,w.state=ye,w.info=$e}Rt();const J=new $5(w,G);this.xr=J,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const z=pe.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=pe.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(z){z!==void 0&&(ee=z,this.setSize(q,Z,!1))},this.getSize=function(z){return z.set(q,Z)},this.setSize=function(z,ie,me=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=z,Z=ie,t.width=Math.floor(z*ee),t.height=Math.floor(ie*ee),me===!0&&(t.style.width=z+"px",t.style.height=ie+"px"),this.setViewport(0,0,z,ie)},this.getDrawingBufferSize=function(z){return z.set(q*ee,Z*ee).floor()},this.setDrawingBufferSize=function(z,ie,me){q=z,Z=ie,ee=me,t.width=Math.floor(z*me),t.height=Math.floor(ie*me),this.setViewport(0,0,z,ie)},this.getCurrentViewport=function(z){return z.copy(P)},this.getViewport=function(z){return z.copy(X)},this.setViewport=function(z,ie,me,ne){z.isVector4?X.set(z.x,z.y,z.z,z.w):X.set(z,ie,me,ne),ye.viewport(P.copy(X).multiplyScalar(ee).floor())},this.getScissor=function(z){return z.copy(oe)},this.setScissor=function(z,ie,me,ne){z.isVector4?oe.set(z.x,z.y,z.z,z.w):oe.set(z,ie,me,ne),ye.scissor(k.copy(oe).multiplyScalar(ee).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(z){ye.setScissorTest(W=z)},this.setOpaqueSort=function(z){F=z},this.setTransparentSort=function(z){K=z},this.getClearColor=function(z){return z.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(z=!0,ie=!0,me=!0){let ne=0;if(z){let ge=!1;if(I!==null){const je=I.texture.format;ge=je===LS||je===PS||je===RS}if(ge){const je=I.texture.type,rt=je===Es||je===to||je===h0||je===ia||je===AS||je===CS,at=fe.getClearColor(),lt=fe.getClearAlpha(),Mt=at.r,ct=at.g,ut=at.b,Ut=Ue.get(I).__webglFramebuffer;rt?(m[0]=Mt,m[1]=ct,m[2]=ut,m[3]=lt,G.clearBufferuiv(G.COLOR,Ut,m)):(v[0]=Mt,v[1]=ct,v[2]=ut,v[3]=lt,G.clearBufferiv(G.COLOR,Ut,v))}else ne|=G.COLOR_BUFFER_BIT}ie&&(ne|=G.DEPTH_BUFFER_BIT),me&&(ne|=G.STENCIL_BUFFER_BIT),G.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pe,!1),t.removeEventListener("webglcontextrestored",se,!1),t.removeEventListener("webglcontextcreationerror",Oe,!1),Se.dispose(),Le.dispose(),Ue.dispose(),Je.dispose(),yt.dispose(),O.dispose(),De.dispose(),nt.dispose(),ae.dispose(),J.dispose(),J.removeEventListener("sessionstart",qt),J.removeEventListener("sessionend",$r),we&&(we.dispose(),we=null),Zn.stop()};function Pe(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const z=$e.autoReset,ie=Ie.enabled,me=Ie.autoUpdate,ne=Ie.needsUpdate,ge=Ie.type;Rt(),$e.autoReset=z,Ie.enabled=ie,Ie.autoUpdate=me,Ie.needsUpdate=ne,Ie.type=ge}function Oe(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function Be(z){const ie=z.target;ie.removeEventListener("dispose",Be),Pt(ie)}function Pt(z){Yt(z),Ue.remove(z)}function Yt(z){const ie=Ue.get(z).programs;ie!==void 0&&(ie.forEach(function(me){ae.releaseProgram(me)}),z.isShaderMaterial&&ae.releaseShaderCache(z))}this.renderBufferDirect=function(z,ie,me,ne,ge,je){ie===null&&(ie=xt);const rt=ge.isMesh&&ge.matrixWorld.determinant()<0,at=k0(z,ie,me,ne,ge);ye.setMaterial(ne,rt);let lt=me.index,Mt=1;ne.wireframe===!0&&(lt=N.getWireframeAttribute(me),Mt=2);const ct=me.drawRange,ut=me.attributes.position;let Ut=ct.start*Mt,Kt=(ct.start+ct.count)*Mt;je!==null&&(Ut=Math.max(Ut,je.start*Mt),Kt=Math.min(Kt,(je.start+je.count)*Mt)),lt!==null?(Ut=Math.max(Ut,0),Kt=Math.min(Kt,lt.count)):ut!=null&&(Ut=Math.max(Ut,0),Kt=Math.min(Kt,ut.count));const jr=Kt-Ut;if(jr<0||jr===1/0)return;De.setup(ge,ne,at,me,lt);let Xr,Gt=ue;if(lt!==null&&(Xr=Bt.get(lt),Gt=Ee,Gt.setIndex(Xr)),ge.isMesh)ne.wireframe===!0?(ye.setLineWidth(ne.wireframeLinewidth*Ke()),Gt.setMode(G.LINES)):Gt.setMode(G.TRIANGLES);else if(ge.isLine){let ht=ne.linewidth;ht===void 0&&(ht=1),ye.setLineWidth(ht*Ke()),ge.isLineSegments?Gt.setMode(G.LINES):ge.isLineLoop?Gt.setMode(G.LINE_LOOP):Gt.setMode(G.LINE_STRIP)}else ge.isPoints?Gt.setMode(G.POINTS):ge.isSprite&&Gt.setMode(G.TRIANGLES);if(ge.isInstancedMesh)Gt.renderInstances(Ut,jr,ge.count);else if(me.isInstancedBufferGeometry){const ht=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,Ft=Math.min(me.instanceCount,ht);Gt.renderInstances(Ut,jr,Ft)}else Gt.render(Ut,jr)},this.compile=function(z,ie){function me(ne,ge,je){ne.transparent===!0&&ne.side===vs&&ne.forceSinglePass===!1?(ne.side=Ar,ne.needsUpdate=!0,ss(ne,ge,je),ne.side=po,ne.needsUpdate=!0,ss(ne,ge,je),ne.side=vs):ss(ne,ge,je)}_=Le.get(z),_.init(),x.push(_),z.traverseVisible(function(ne){ne.isLight&&ne.layers.test(ie.layers)&&(_.pushLight(ne),ne.castShadow&&_.pushShadow(ne))}),_.setupLights(w.useLegacyLights),z.traverse(function(ne){const ge=ne.material;if(ge)if(Array.isArray(ge))for(let je=0;je<ge.length;je++){const rt=ge[je];me(rt,z,ne)}else me(ge,z,ne)}),x.pop(),_=null};let pn=null;function is(z){pn&&pn(z)}function qt(){Zn.stop()}function $r(){Zn.start()}const Zn=new l3;Zn.setAnimationLoop(is),typeof self<"u"&&Zn.setContext(self),this.setAnimationLoop=function(z){pn=z,J.setAnimationLoop(z),z===null?Zn.stop():Zn.start()},J.addEventListener("sessionstart",qt),J.addEventListener("sessionend",$r),this.render=function(z,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(ie=J.updateCameraXR(ie)),z.isScene===!0&&z.onBeforeRender(w,z,ie,I),_=Le.get(z,x.length),_.init(),x.push(_),Re.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),he.setFromProjectionMatrix(Re),Te=this.localClippingEnabled,le=Ve.init(this.clippingPlanes,Te),S=Se.get(z,g.length),S.init(),g.push(S),yh(z,ie,0,w.sortObjects),S.finish(),w.sortObjects===!0&&S.sort(F,K),le===!0&&Ve.beginShadows();const me=_.state.shadowsArray;if(Ie.render(me,z,ie),le===!0&&Ve.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,fe.render(S,z),_.setupLights(w.useLegacyLights),ie.isArrayCamera){const ne=ie.cameras;for(let ge=0,je=ne.length;ge<je;ge++){const rt=ne[ge];_h(S,z,rt,rt.viewport)}}else _h(S,z,ie);I!==null&&(ze.updateMultisampleRenderTarget(I),ze.updateRenderTargetMipmap(I)),z.isScene===!0&&z.onAfterRender(w,z,ie),De.resetDefaultState(),L=-1,R=null,x.pop(),x.length>0?_=x[x.length-1]:_=null,g.pop(),g.length>0?S=g[g.length-1]:S=null};function yh(z,ie,me,ne){if(z.visible===!1)return;if(z.layers.test(ie.layers)){if(z.isGroup)me=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(ie);else if(z.isLight)_.pushLight(z),z.castShadow&&_.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||he.intersectsSprite(z)){ne&&Qe.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Re);const rt=O.update(z),at=z.material;at.visible&&S.push(z,rt,at,me,Qe.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||he.intersectsObject(z))){z.isSkinnedMesh&&z.skeleton.frame!==$e.render.frame&&(z.skeleton.update(),z.skeleton.frame=$e.render.frame);const rt=O.update(z),at=z.material;if(ne&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),Qe.copy(z.boundingSphere.center)):(rt.boundingSphere===null&&rt.computeBoundingSphere(),Qe.copy(rt.boundingSphere.center)),Qe.applyMatrix4(z.matrixWorld).applyMatrix4(Re)),Array.isArray(at)){const lt=rt.groups;for(let Mt=0,ct=lt.length;Mt<ct;Mt++){const ut=lt[Mt],Ut=at[ut.materialIndex];Ut&&Ut.visible&&S.push(z,rt,Ut,me,Qe.z,ut)}}else at.visible&&S.push(z,rt,at,me,Qe.z,null)}}const je=z.children;for(let rt=0,at=je.length;rt<at;rt++)yh(je[rt],ie,me,ne)}function _h(z,ie,me,ne){const ge=z.opaque,je=z.transmissive,rt=z.transparent;_.setupLightsView(me),le===!0&&Ve.setGlobalState(w.clippingPlanes,me),je.length>0&&xh(ge,je,ie,me),ne&&ye.viewport(P.copy(ne)),ge.length>0&&wo(ge,ie,me),je.length>0&&wo(je,ie,me),rt.length>0&&wo(rt,ie,me),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function xh(z,ie,me,ne){const ge=be.isWebGL2;we===null&&(we=new Ji(1,1,{generateMipmaps:!0,type:pe.has("EXT_color_buffer_half_float")?ou:Es,minFilter:da,samples:ge&&a===!0?4:0})),w.getDrawingBufferSize(Ze),ge?we.setSize(Ze.x,Ze.y):we.setSize(bg(Ze.x),bg(Ze.y));const je=w.getRenderTarget();w.setRenderTarget(we),w.getClearColor(H),j=w.getClearAlpha(),j<1&&w.setClearColor(16777215,.5),w.clear();const rt=w.toneMapping;w.toneMapping=Yi,wo(z,me,ne),ze.updateMultisampleRenderTarget(we),ze.updateRenderTargetMipmap(we);let at=!1;for(let lt=0,Mt=ie.length;lt<Mt;lt++){const ct=ie[lt],ut=ct.object,Ut=ct.geometry,Kt=ct.material,jr=ct.group;if(Kt.side===vs&&ut.layers.test(ne.layers)){const Xr=Kt.side;Kt.side=Ar,Kt.needsUpdate=!0,Sh(ut,me,ne,Ut,Kt,jr),Kt.side=Xr,Kt.needsUpdate=!0,at=!0}}at===!0&&(ze.updateMultisampleRenderTarget(we),ze.updateRenderTargetMipmap(we)),w.setRenderTarget(je),w.setClearColor(H,j),w.toneMapping=rt}function wo(z,ie,me){const ne=ie.isScene===!0?ie.overrideMaterial:null;for(let ge=0,je=z.length;ge<je;ge++){const rt=z[ge],at=rt.object,lt=rt.geometry,Mt=ne===null?rt.material:ne,ct=rt.group;at.layers.test(me.layers)&&Sh(at,ie,me,lt,Mt,ct)}}function Sh(z,ie,me,ne,ge,je){z.onBeforeRender(w,ie,me,ne,ge,je),z.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),ge.onBeforeRender(w,ie,me,ne,z,je),ge.transparent===!0&&ge.side===vs&&ge.forceSinglePass===!1?(ge.side=Ar,ge.needsUpdate=!0,w.renderBufferDirect(me,ie,ne,ge,z,je),ge.side=po,ge.needsUpdate=!0,w.renderBufferDirect(me,ie,ne,ge,z,je),ge.side=vs):w.renderBufferDirect(me,ie,ne,ge,z,je),z.onAfterRender(w,ie,me,ne,ge,je)}function ss(z,ie,me){ie.isScene!==!0&&(ie=xt);const ne=Ue.get(z),ge=_.state.lights,je=_.state.shadowsArray,rt=ge.state.version,at=ae.getParameters(z,ge.state,je,ie,me),lt=ae.getProgramCacheKey(at);let Mt=ne.programs;ne.environment=z.isMeshStandardMaterial?ie.environment:null,ne.fog=ie.fog,ne.envMap=(z.isMeshStandardMaterial?yt:Je).get(z.envMap||ne.environment),Mt===void 0&&(z.addEventListener("dispose",Be),Mt=new Map,ne.programs=Mt);let ct=Mt.get(lt);if(ct!==void 0){if(ne.currentProgram===ct&&ne.lightsStateVersion===rt)return wh(z,at),ct}else at.uniforms=ae.getUniforms(z),z.onBuild(me,at,w),z.onBeforeCompile(at,w),ct=ae.acquireProgram(at,lt),Mt.set(lt,ct),ne.uniforms=at.uniforms;const ut=ne.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(ut.clippingPlanes=Ve.uniform),wh(z,at),ne.needsLights=U0(z),ne.lightsStateVersion=rt,ne.needsLights&&(ut.ambientLightColor.value=ge.state.ambient,ut.lightProbe.value=ge.state.probe,ut.directionalLights.value=ge.state.directional,ut.directionalLightShadows.value=ge.state.directionalShadow,ut.spotLights.value=ge.state.spot,ut.spotLightShadows.value=ge.state.spotShadow,ut.rectAreaLights.value=ge.state.rectArea,ut.ltc_1.value=ge.state.rectAreaLTC1,ut.ltc_2.value=ge.state.rectAreaLTC2,ut.pointLights.value=ge.state.point,ut.pointLightShadows.value=ge.state.pointShadow,ut.hemisphereLights.value=ge.state.hemi,ut.directionalShadowMap.value=ge.state.directionalShadowMap,ut.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,ut.spotShadowMap.value=ge.state.spotShadowMap,ut.spotLightMatrix.value=ge.state.spotLightMatrix,ut.spotLightMap.value=ge.state.spotLightMap,ut.pointShadowMap.value=ge.state.pointShadowMap,ut.pointShadowMatrix.value=ge.state.pointShadowMatrix);const Ut=ct.getUniforms(),Kt=qm.seqWithValue(Ut.seq,ut);return ne.currentProgram=ct,ne.uniformsList=Kt,ct}function wh(z,ie){const me=Ue.get(z);me.outputColorSpace=ie.outputColorSpace,me.instancing=ie.instancing,me.skinning=ie.skinning,me.morphTargets=ie.morphTargets,me.morphNormals=ie.morphNormals,me.morphColors=ie.morphColors,me.morphTargetsCount=ie.morphTargetsCount,me.numClippingPlanes=ie.numClippingPlanes,me.numIntersection=ie.numClipIntersection,me.vertexAlphas=ie.vertexAlphas,me.vertexTangents=ie.vertexTangents,me.toneMapping=ie.toneMapping}function k0(z,ie,me,ne,ge){ie.isScene!==!0&&(ie=xt),ze.resetTextureUnits();const je=ie.fog,rt=ne.isMeshStandardMaterial?ie.environment:null,at=I===null?w.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Zi,lt=(ne.isMeshStandardMaterial?yt:Je).get(ne.envMap||rt),Mt=ne.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,ct=!!me.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),ut=!!me.morphAttributes.position,Ut=!!me.morphAttributes.normal,Kt=!!me.morphAttributes.color,jr=ne.toneMapped?w.toneMapping:Yi,Xr=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Gt=Xr!==void 0?Xr.length:0,ht=Ue.get(ne),Ft=_.state.lights;if(le===!0&&(Te===!0||z!==R)){const ir=z===R&&ne.id===L;Ve.setState(ne,z,ir)}let ft=!1;ne.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==Ft.state.version||ht.outputColorSpace!==at||ge.isInstancedMesh&&ht.instancing===!1||!ge.isInstancedMesh&&ht.instancing===!0||ge.isSkinnedMesh&&ht.skinning===!1||!ge.isSkinnedMesh&&ht.skinning===!0||ht.envMap!==lt||ne.fog===!0&&ht.fog!==je||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==Ve.numPlanes||ht.numIntersection!==Ve.numIntersection)||ht.vertexAlphas!==Mt||ht.vertexTangents!==ct||ht.morphTargets!==ut||ht.morphNormals!==Ut||ht.morphColors!==Kt||ht.toneMapping!==jr||be.isWebGL2===!0&&ht.morphTargetsCount!==Gt)&&(ft=!0):(ft=!0,ht.__version=ne.version);let rr=ht.currentProgram;ft===!0&&(rr=ss(ne,ie,ge));let Nn=!1,Pn=!1,Li=!1;const mn=rr.getUniforms(),gn=ht.uniforms;if(ye.useProgram(rr.program)&&(Nn=!0,Pn=!0,Li=!0),ne.id!==L&&(L=ne.id,Pn=!0),Nn||R!==z){if(mn.setValue(G,"projectionMatrix",z.projectionMatrix),be.logarithmicDepthBuffer&&mn.setValue(G,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),R!==z&&(R=z,Pn=!0,Li=!0),ne.isShaderMaterial||ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshStandardMaterial||ne.envMap){const ir=mn.map.cameraPosition;ir!==void 0&&ir.setValue(G,Qe.setFromMatrixPosition(z.matrixWorld))}(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&mn.setValue(G,"isOrthographic",z.isOrthographicCamera===!0),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial||ne.isShadowMaterial||ge.isSkinnedMesh)&&mn.setValue(G,"viewMatrix",z.matrixWorldInverse)}if(ge.isSkinnedMesh){mn.setOptional(G,ge,"bindMatrix"),mn.setOptional(G,ge,"bindMatrixInverse");const ir=ge.skeleton;ir&&(be.floatVertexTextures?(ir.boneTexture===null&&ir.computeBoneTexture(),mn.setValue(G,"boneTexture",ir.boneTexture,ze),mn.setValue(G,"boneTextureSize",ir.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Eo=me.morphAttributes;if((Eo.position!==void 0||Eo.normal!==void 0||Eo.color!==void 0&&be.isWebGL2===!0)&&Y.update(ge,me,rr),(Pn||ht.receiveShadow!==ge.receiveShadow)&&(ht.receiveShadow=ge.receiveShadow,mn.setValue(G,"receiveShadow",ge.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(gn.envMap.value=lt,gn.flipEnvMap.value=lt.isCubeTexture&&lt.isRenderTargetTexture===!1?-1:1),Pn&&(mn.setValue(G,"toneMappingExposure",w.toneMappingExposure),ht.needsLights&&N0(gn,Li),je&&ne.fog===!0&&xe.refreshFogUniforms(gn,je),xe.refreshMaterialUniforms(gn,ne,ee,Z,we),qm.upload(G,ht.uniformsList,gn,ze)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(qm.upload(G,ht.uniformsList,gn,ze),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&mn.setValue(G,"center",ge.center),mn.setValue(G,"modelViewMatrix",ge.modelViewMatrix),mn.setValue(G,"normalMatrix",ge.normalMatrix),mn.setValue(G,"modelMatrix",ge.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){const ir=ne.uniformsGroups;for(let Ll=0,Il=ir.length;Ll<Il;Ll++)if(be.isWebGL2){const Nu=ir[Ll];nt.update(Nu,rr),nt.bind(Nu,rr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rr}function N0(z,ie){z.ambientLightColor.needsUpdate=ie,z.lightProbe.needsUpdate=ie,z.directionalLights.needsUpdate=ie,z.directionalLightShadows.needsUpdate=ie,z.pointLights.needsUpdate=ie,z.pointLightShadows.needsUpdate=ie,z.spotLights.needsUpdate=ie,z.spotLightShadows.needsUpdate=ie,z.rectAreaLights.needsUpdate=ie,z.hemisphereLights.needsUpdate=ie}function U0(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(z,ie,me){Ue.get(z.texture).__webglTexture=ie,Ue.get(z.depthTexture).__webglTexture=me;const ne=Ue.get(z);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=me===void 0,ne.__autoAllocateDepthBuffer||pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(z,ie){const me=Ue.get(z);me.__webglFramebuffer=ie,me.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(z,ie=0,me=0){I=z,A=ie,b=me;let ne=!0,ge=null,je=!1,rt=!1;if(z){const lt=Ue.get(z);lt.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(G.FRAMEBUFFER,null),ne=!1):lt.__webglFramebuffer===void 0?ze.setupRenderTarget(z):lt.__hasExternalTextures&&ze.rebindTextures(z,Ue.get(z.texture).__webglTexture,Ue.get(z.depthTexture).__webglTexture);const Mt=z.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(rt=!0);const ct=Ue.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(ge=ct[ie],je=!0):be.isWebGL2&&z.samples>0&&ze.useMultisampledRTT(z)===!1?ge=Ue.get(z).__webglMultisampledFramebuffer:ge=ct,P.copy(z.viewport),k.copy(z.scissor),V=z.scissorTest}else P.copy(X).multiplyScalar(ee).floor(),k.copy(oe).multiplyScalar(ee).floor(),V=W;if(ye.bindFramebuffer(G.FRAMEBUFFER,ge)&&be.drawBuffers&&ne&&ye.drawBuffers(z,ge),ye.viewport(P),ye.scissor(k),ye.setScissorTest(V),je){const lt=Ue.get(z.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ie,lt.__webglTexture,me)}else if(rt){const lt=Ue.get(z.texture),Mt=ie||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,lt.__webglTexture,me||0,Mt)}L=-1},this.readRenderTargetPixels=function(z,ie,me,ne,ge,je,rt){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=Ue.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&rt!==void 0&&(at=at[rt]),at){ye.bindFramebuffer(G.FRAMEBUFFER,at);try{const lt=z.texture,Mt=lt.format,ct=lt.type;if(Mt!==Fr&&Me.convert(Mt)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ut=ct===ou&&(pe.has("EXT_color_buffer_half_float")||be.isWebGL2&&pe.has("EXT_color_buffer_float"));if(ct!==Es&&Me.convert(ct)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===ys&&(be.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=z.width-ne&&me>=0&&me<=z.height-ge&&G.readPixels(ie,me,ne,ge,Me.convert(Mt),Me.convert(ct),je)}finally{const lt=I!==null?Ue.get(I).__webglFramebuffer:null;ye.bindFramebuffer(G.FRAMEBUFFER,lt)}}},this.copyFramebufferToTexture=function(z,ie,me=0){const ne=Math.pow(2,-me),ge=Math.floor(ie.image.width*ne),je=Math.floor(ie.image.height*ne);ze.setTexture2D(ie,0),G.copyTexSubImage2D(G.TEXTURE_2D,me,0,0,z.x,z.y,ge,je),ye.unbindTexture()},this.copyTextureToTexture=function(z,ie,me,ne=0){const ge=ie.image.width,je=ie.image.height,rt=Me.convert(me.format),at=Me.convert(me.type);ze.setTexture2D(me,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,me.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,me.unpackAlignment),ie.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,ne,z.x,z.y,ge,je,rt,at,ie.image.data):ie.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,ne,z.x,z.y,ie.mipmaps[0].width,ie.mipmaps[0].height,rt,ie.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,ne,z.x,z.y,rt,at,ie.image),ne===0&&me.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(z,ie,me,ne,ge=0){if(w.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const je=z.max.x-z.min.x+1,rt=z.max.y-z.min.y+1,at=z.max.z-z.min.z+1,lt=Me.convert(ne.format),Mt=Me.convert(ne.type);let ct;if(ne.isData3DTexture)ze.setTexture3D(ne,0),ct=G.TEXTURE_3D;else if(ne.isDataArrayTexture)ze.setTexture2DArray(ne,0),ct=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ne.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ne.unpackAlignment);const ut=G.getParameter(G.UNPACK_ROW_LENGTH),Ut=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Kt=G.getParameter(G.UNPACK_SKIP_PIXELS),jr=G.getParameter(G.UNPACK_SKIP_ROWS),Xr=G.getParameter(G.UNPACK_SKIP_IMAGES),Gt=me.isCompressedTexture?me.mipmaps[0]:me.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,Gt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Gt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,z.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,z.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,z.min.z),me.isDataTexture||me.isData3DTexture?G.texSubImage3D(ct,ge,ie.x,ie.y,ie.z,je,rt,at,lt,Mt,Gt.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(ct,ge,ie.x,ie.y,ie.z,je,rt,at,lt,Gt.data)):G.texSubImage3D(ct,ge,ie.x,ie.y,ie.z,je,rt,at,lt,Mt,Gt),G.pixelStorei(G.UNPACK_ROW_LENGTH,ut),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Ut),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Kt),G.pixelStorei(G.UNPACK_SKIP_ROWS,jr),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Xr),ge===0&&ne.generateMipmaps&&G.generateMipmap(ct),ye.unbindTexture()},this.initTexture=function(z){z.isCubeTexture?ze.setTextureCube(z,0):z.isData3DTexture?ze.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?ze.setTexture2DArray(z,0):ze.setTexture2D(z,0),ye.unbindTexture()},this.resetState=function(){A=0,b=0,I=null,ye.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _s}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===vt?oa:DS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===oa?vt:Zi}}class g3 extends VS{}g3.prototype.isWebGL1Renderer=!0;class _0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ne(e),this.density=t}clone(){return new _0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class x0{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ne(e),this.near=t,this.far=r}clone(){return new x0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ag extends Lt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class S0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Md,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=si()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=si()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=si()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xr=new U;class gl{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ni(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ni(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ni(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ni(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new $t(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class GS extends nr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lc;const mf=new U,cc=new U,uc=new U,fc=new ve,gf=new ve,v3=new qe,Jp=new U,vf=new U,Qp=new U,cb=new ve,ky=new ve,ub=new ve;class y3 extends Lt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",lc===void 0){lc=new dt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new S0(t,5);lc.setIndex([0,1,2,0,2,3]),lc.setAttribute("position",new gl(r,3,0,!1)),lc.setAttribute("uv",new gl(r,2,3,!1))}this.geometry=lc,this.material=e!==void 0?e:new GS,this.center=new ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cc.setFromMatrixScale(this.matrixWorld),v3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cc.multiplyScalar(-uc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;em(Jp.set(-.5,-.5,0),uc,o,cc,i,s),em(vf.set(.5,-.5,0),uc,o,cc,i,s),em(Qp.set(.5,.5,0),uc,o,cc,i,s),cb.set(0,0),ky.set(1,0),ub.set(1,1);let a=e.ray.intersectTriangle(Jp,vf,Qp,!1,mf);if(a===null&&(em(vf.set(-.5,.5,0),uc,o,cc,i,s),ky.set(0,1),a=e.ray.intersectTriangle(Jp,Qp,vf,!1,mf),a===null))return;const l=e.ray.origin.distanceTo(mf);l<e.near||l>e.far||t.push({distance:l,point:mf.clone(),uv:Ur.getInterpolation(mf,Jp,vf,Qp,cb,ky,ub,new ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function em(n,e,t,r,i,s){fc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(gf.x=s*fc.x-i*fc.y,gf.y=i*fc.x+s*fc.y):gf.copy(fc),n.copy(e),n.x+=gf.x,n.y+=gf.y,n.applyMatrix4(v3)}const tm=new U,fb=new U;class _3 extends Lt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){tm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(tm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){tm.setFromMatrixPosition(e.matrixWorld),fb.setFromMatrixPosition(this.matrixWorld);const r=tm.distanceTo(fb)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const db=new U,hb=new It,pb=new It,q5=new U,mb=new qe,dc=new U,Ny=new ts,gb=new qe,Uy=new Eu;class WS extends qn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qe,this.bindMatrixInverse=new qe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ps),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)dc.fromBufferAttribute(t,r),this.applyBoneTransform(r,dc),this.boundingBox.expandByPoint(dc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)dc.fromBufferAttribute(t,r),this.applyBoneTransform(r,dc),this.boundingSphere.expandByPoint(dc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ny.copy(this.boundingSphere),Ny.applyMatrix4(i),e.ray.intersectsSphere(Ny)!==!1&&(gb.copy(i).invert(),Uy.copy(e.ray).applyMatrix4(gb),!(this.boundingBox!==null&&Uy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Uy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new It,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;hb.fromBufferAttribute(i.attributes.skinIndex,e),pb.fromBufferAttribute(i.attributes.skinWeight,e),db.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=pb.getComponent(s);if(o!==0){const a=hb.getComponent(s);mb.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(q5.copy(db).applyMatrix4(mb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Ad extends Lt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yc extends rn{constructor(e=null,t=1,r=1,i,s,o,a,l,u=An,d=An,h,p){super(null,o,a,l,u,d,i,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vb=new qe,K5=new qe;class Yd{constructor(e=[],t=[]){this.uuid=si(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new qe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:K5;vb.multiplyMatrices(a,t[s]),vb.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Yd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=t3(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Yc(t,e,e,Fr,ys);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Ad),this.bones.push(o),this.boneInverses.push(new qe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class cu extends $t{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hc=new qe,yb=new qe,nm=[],_b=new Ps,Z5=new qe,yf=new qn,_f=new ts;class x3 extends qn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Z5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ps),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,hc),_b.copy(e.boundingBox).applyMatrix4(hc),this.boundingBox.union(_b)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,hc),_f.copy(e.boundingSphere).applyMatrix4(hc),this.boundingSphere.union(_f)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(yf.geometry=this.geometry,yf.material=this.material,yf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_f.copy(this.boundingSphere),_f.applyMatrix4(r),e.ray.intersectsSphere(_f)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,hc),yb.multiplyMatrices(r,hc),yf.matrixWorld=yb,yf.raycast(e,nm);for(let o=0,a=nm.length;o<a;o++){const l=nm[o];l.instanceId=s,l.object=this,t.push(l)}nm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class gr extends nr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const xb=new U,Sb=new U,wb=new qe,Fy=new Eu,rm=new ts;class mo extends Lt{constructor(e=new dt,t=new gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)xb.fromBufferAttribute(t,i-1),Sb.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=xb.distanceTo(Sb);e.setAttribute("lineDistance",new Ge(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rm.copy(r.boundingSphere),rm.applyMatrix4(i),rm.radius+=s,e.ray.intersectsSphere(rm)===!1)return;wb.copy(i).invert(),Fy.copy(e.ray).applyMatrix4(wb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new U,d=new U,h=new U,p=new U,m=this.isLineSegments?2:1,v=r.index,_=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let w=g,M=x-1;w<M;w+=m){const A=v.getX(w),b=v.getX(w+1);if(u.fromBufferAttribute(_,A),d.fromBufferAttribute(_,b),Fy.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let w=g,M=x-1;w<M;w+=m){if(u.fromBufferAttribute(_,w),d.fromBufferAttribute(_,w+1),Fy.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(p);b<e.near||b>e.far||t.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Eb=new U,Mb=new U;class Ls extends mo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)Eb.fromBufferAttribute(t,i),Mb.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+Eb.distanceTo(Mb);e.setAttribute("lineDistance",new Ge(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class S3 extends mo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $S extends nr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Tb=new qe,Wx=new Eu,im=new ts,sm=new U;class w3 extends Lt{constructor(e=new dt,t=new $S){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),im.copy(r.boundingSphere),im.applyMatrix4(i),im.radius+=s,e.ray.intersectsSphere(im)===!1)return;Tb.copy(i).invert(),Wx.copy(e.ray).applyMatrix4(Tb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,S=m;v<S;v++){const _=u.getX(v);sm.fromBufferAttribute(h,_),bb(sm,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,S=m;v<S;v++)sm.fromBufferAttribute(h,v),bb(sm,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function bb(n,e,t,r,i,s,o){const a=Wx.distanceSqToPoint(n);if(a<t){const l=new U;Wx.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class J5 extends rn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Rn,this.magFilter=s!==void 0?s:Rn,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Q5 extends rn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=An,this.minFilter=An,this.generateMipmaps=!1,this.needsUpdate=!0}}class jS extends rn{constructor(e,t,r,i,s,o,a,l,u,d,h,p){super(null,o,a,l,u,d,i,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class eH extends jS{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Yn}}class tH extends rn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ri{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],p=r[i+1]-d,m=(o-d)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ve:new U);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new U,i=[],s=[],o=[],a=new U,l=new qe;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new U)}s[0]=new U,o[0]=new U;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),h=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(xn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(xn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class w0 extends Ri{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new ve,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*d-m*h+this.aX,u=p*h+m*d+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class E3 extends w0{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function XS(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,d,h){let p=(o-s)/u-(a-s)/(u+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,m*=d,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const om=new U,zy=new XS,By=new XS,Hy=new XS;class M3 extends Ri{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new U){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,d;this.closed||a>0?u=i[(a-1)%s]:(om.subVectors(i[0],i[1]).add(i[0]),u=om);const h=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(om.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=om),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),m),S=Math.pow(h.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(d),m);S<1e-4&&(S=1),v<1e-4&&(v=S),_<1e-4&&(_=S),zy.initNonuniformCatmullRom(u.x,h.x,p.x,d.x,v,S,_),By.initNonuniformCatmullRom(u.y,h.y,p.y,d.y,v,S,_),Hy.initNonuniformCatmullRom(u.z,h.z,p.z,d.z,v,S,_)}else this.curveType==="catmullrom"&&(zy.initCatmullRom(u.x,h.x,p.x,d.x,this.tension),By.initCatmullRom(u.y,h.y,p.y,d.y,this.tension),Hy.initCatmullRom(u.z,h.z,p.z,d.z,this.tension));return r.set(zy.calc(l),By.calc(l),Hy.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new U().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ab(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function nH(n,e){const t=1-n;return t*t*e}function rH(n,e){return 2*(1-n)*n*e}function iH(n,e){return n*n*e}function Yf(n,e,t,r){return nH(n,e)+rH(n,t)+iH(n,r)}function sH(n,e){const t=1-n;return t*t*t*e}function oH(n,e){const t=1-n;return 3*t*t*n*e}function aH(n,e){return 3*(1-n)*n*n*e}function lH(n,e){return n*n*n*e}function qf(n,e,t,r,i){return sH(n,e)+oH(n,t)+aH(n,r)+lH(n,i)}class YS extends Ri{constructor(e=new ve,t=new ve,r=new ve,i=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(qf(e,i.x,s.x,o.x,a.x),qf(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class T3 extends Ri{constructor(e=new U,t=new U,r=new U,i=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new U){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(qf(e,i.x,s.x,o.x,a.x),qf(e,i.y,s.y,o.y,a.y),qf(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class E0 extends Ri{constructor(e=new ve,t=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class b3 extends Ri{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new U){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qS extends Ri{constructor(e=new ve,t=new ve,r=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Yf(e,i.x,s.x,o.x),Yf(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KS extends Ri{constructor(e=new U,t=new U,r=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new U){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Yf(e,i.x,s.x,o.x),Yf(e,i.y,s.y,o.y),Yf(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZS extends Ri{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],d=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(Ab(a,l.x,u.x,d.x,h.x),Ab(a,l.y,u.y,d.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this}}var JS=Object.freeze({__proto__:null,ArcCurve:E3,CatmullRomCurve3:M3,CubicBezierCurve:YS,CubicBezierCurve3:T3,EllipseCurve:w0,LineCurve:E0,LineCurve3:b3,QuadraticBezierCurve:qS,QuadraticBezierCurve3:KS,SplineCurve:ZS});class A3 extends Ri{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new E0(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const d=l[u];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new JS[i.type]().fromJSON(i))}return this}}class Cd extends A3{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new E0(this.currentPoint.clone(),new ve(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new qS(this.currentPoint.clone(),new ve(e,t),new ve(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new YS(this.currentPoint.clone(),new ve(e,t),new ve(r,i),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new ZS(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,t+d,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new w0(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bu extends dt{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=xn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],d=1/t,h=new U,p=new ve,m=new U,v=new U,S=new U;let _=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(v)}for(let x=0;x<=t;x++){const w=r+x*d*i,M=Math.sin(w),A=Math.cos(w);for(let b=0;b<=e.length-1;b++){h.x=e[b].x*M,h.y=e[b].y,h.z=e[b].x*A,o.push(h.x,h.y,h.z),p.x=x/t,p.y=b/(e.length-1),a.push(p.x,p.y);const I=l[3*b+0]*M,L=l[3*b+1],R=l[3*b+0]*A;u.push(I,L,R)}}for(let x=0;x<t;x++)for(let w=0;w<e.length-1;w++){const M=w+x*e.length,A=M,b=M+e.length,I=M+e.length+1,L=M+1;s.push(A,b,L),s.push(I,L,b)}this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("uv",new Ge(a,2)),this.setAttribute("normal",new Ge(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bu(e.points,e.segments,e.phiStart,e.phiLength)}}class qd extends bu{constructor(e=1,t=1,r=4,i=8){const s=new Cd;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new qd(e.radius,e.length,e.capSegments,e.radialSegments)}}class Kd extends dt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new U,d=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=r+h/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("normal",new Ge(a,3)),this.setAttribute("uv",new Ge(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kd(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ml extends dt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],h=[],p=[],m=[];let v=0;const S=[],_=r/2;let g=0;x(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new Ge(h,3)),this.setAttribute("normal",new Ge(p,3)),this.setAttribute("uv",new Ge(m,2));function x(){const M=new U,A=new U;let b=0;const I=(t-e)/r;for(let L=0;L<=s;L++){const R=[],P=L/s,k=P*(t-e)+e;for(let V=0;V<=i;V++){const H=V/i,j=H*l+a,q=Math.sin(j),Z=Math.cos(j);A.x=k*q,A.y=-P*r+_,A.z=k*Z,h.push(A.x,A.y,A.z),M.set(q,I,Z).normalize(),p.push(M.x,M.y,M.z),m.push(H,1-P),R.push(v++)}S.push(R)}for(let L=0;L<i;L++)for(let R=0;R<s;R++){const P=S[R][L],k=S[R+1][L],V=S[R+1][L+1],H=S[R][L+1];d.push(P,k,H),d.push(k,V,H),b+=6}u.addGroup(g,b,0),g+=b}function w(M){const A=v,b=new ve,I=new U;let L=0;const R=M===!0?e:t,P=M===!0?1:-1;for(let V=1;V<=i;V++)h.push(0,_*P,0),p.push(0,P,0),m.push(.5,.5),v++;const k=v;for(let V=0;V<=i;V++){const j=V/i*l+a,q=Math.cos(j),Z=Math.sin(j);I.x=R*Z,I.y=_*P,I.z=R*q,h.push(I.x,I.y,I.z),p.push(0,P,0),b.x=q*.5+.5,b.y=Z*.5*P+.5,m.push(b.x,b.y),v++}for(let V=0;V<i;V++){const H=A+V,j=k+V;M===!0?d.push(j,j+1,H):d.push(j+1,j,H),L+=3}u.addGroup(g,L,M===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ml(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zd extends Ml{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Zd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xo extends dt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),d(),this.setAttribute("position",new Ge(s,3)),this.setAttribute("normal",new Ge(s.slice(),3)),this.setAttribute("uv",new Ge(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const w=new U,M=new U,A=new U;for(let b=0;b<t.length;b+=3)m(t[b+0],w),m(t[b+1],M),m(t[b+2],A),l(w,M,A,x)}function l(x,w,M,A){const b=A+1,I=[];for(let L=0;L<=b;L++){I[L]=[];const R=x.clone().lerp(M,L/b),P=w.clone().lerp(M,L/b),k=b-L;for(let V=0;V<=k;V++)V===0&&L===b?I[L][V]=R:I[L][V]=R.clone().lerp(P,V/k)}for(let L=0;L<b;L++)for(let R=0;R<2*(b-L)-1;R++){const P=Math.floor(R/2);R%2===0?(p(I[L][P+1]),p(I[L+1][P]),p(I[L][P])):(p(I[L][P+1]),p(I[L+1][P+1]),p(I[L+1][P]))}}function u(x){const w=new U;for(let M=0;M<s.length;M+=3)w.x=s[M+0],w.y=s[M+1],w.z=s[M+2],w.normalize().multiplyScalar(x),s[M+0]=w.x,s[M+1]=w.y,s[M+2]=w.z}function d(){const x=new U;for(let w=0;w<s.length;w+=3){x.x=s[w+0],x.y=s[w+1],x.z=s[w+2];const M=_(x)/2/Math.PI+.5,A=g(x)/Math.PI+.5;o.push(M,1-A)}v(),h()}function h(){for(let x=0;x<o.length;x+=6){const w=o[x+0],M=o[x+2],A=o[x+4],b=Math.max(w,M,A),I=Math.min(w,M,A);b>.9&&I<.1&&(w<.2&&(o[x+0]+=1),M<.2&&(o[x+2]+=1),A<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,w){const M=x*3;w.x=e[M+0],w.y=e[M+1],w.z=e[M+2]}function v(){const x=new U,w=new U,M=new U,A=new U,b=new ve,I=new ve,L=new ve;for(let R=0,P=0;R<s.length;R+=9,P+=6){x.set(s[R+0],s[R+1],s[R+2]),w.set(s[R+3],s[R+4],s[R+5]),M.set(s[R+6],s[R+7],s[R+8]),b.set(o[P+0],o[P+1]),I.set(o[P+2],o[P+3]),L.set(o[P+4],o[P+5]),A.copy(x).add(w).add(M).divideScalar(3);const k=_(A);S(b,P+0,x,k),S(I,P+2,w,k),S(L,P+4,M,k)}}function S(x,w,M,A){A<0&&x.x===1&&(o[w]=x.x-1),M.x===0&&M.z===0&&(o[w]=A/2/Math.PI+.5)}function _(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xo(e.vertices,e.indices,e.radius,e.details)}}class Jd extends xo{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jd(e.radius,e.detail)}}const am=new U,lm=new U,Vy=new U,cm=new Ur;class C3 extends dt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(il*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:S,b:_,c:g}=cm;if(S.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),cm.getNormal(Vy),h[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,h[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){const w=(x+1)%3,M=h[x],A=h[w],b=cm[d[x]],I=cm[d[w]],L=`${M}_${A}`,R=`${A}_${M}`;R in p&&p[R]?(Vy.dot(p[R].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(I.x,I.y,I.z)),p[R]=null):L in p||(p[L]={index0:u[x],index1:u[w],normal:Vy.clone()})}}for(const v in p)if(p[v]){const{index0:S,index1:_}=p[v];am.fromBufferAttribute(a,S),lm.fromBufferAttribute(a,_),m.push(am.x,am.y,am.z),m.push(lm.x,lm.y,lm.z)}this.setAttribute("position",new Ge(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ol extends Cd{constructor(e){super(e),this.uuid=si(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Cd().fromJSON(i))}return this}}const cH={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=R3(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,d,h,p,m;if(r&&(s=pH(n,e,s,t)),n.length>80*t){a=u=n[0],l=d=n[1];for(let v=t;v<i;v+=t)h=n[v],p=n[v+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>d&&(d=p);m=Math.max(u-a,d-l),m=m!==0?32767/m:0}return Rd(s,o,t,a,l,m,0),o}};function R3(n,e,t,r,i){let s,o;if(i===TH(n,e,t,r)>0)for(s=e;s<t;s+=r)o=Cb(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=Cb(s,n[s],n[s+1],o);return o&&M0(o,o.next)&&(Ld(o),o=o.next),o}function vl(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(M0(t,t.next)||un(t.prev,t,t.next)===0)){if(Ld(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Rd(n,e,t,r,i,s,o){if(!n)return;!o&&s&&_H(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?fH(n,r,i,s):uH(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Ld(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=dH(vl(n),e,t),Rd(n,e,t,r,i,s,2)):o===2&&hH(n,e,t,r,i,s):Rd(vl(n),e,t,r,i,s,1);break}}}function uH(n){const e=n.prev,t=n,r=n.next;if(un(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,d=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=h&&v.y<=m&&Uc(i,a,s,l,o,u,v.x,v.y)&&un(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function fH(n,e,t,r){const i=n.prev,s=n,o=n.next;if(un(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,d=i.y,h=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=d<h?d<p?d:p:h<p?h:p,S=a>l?a>u?a:u:l>u?l:u,_=d>h?d>p?d:p:h>p?h:p,g=$x(m,v,e,t,r),x=$x(S,_,e,t,r);let w=n.prevZ,M=n.nextZ;for(;w&&w.z>=g&&M&&M.z<=x;){if(w.x>=m&&w.x<=S&&w.y>=v&&w.y<=_&&w!==i&&w!==o&&Uc(a,d,l,h,u,p,w.x,w.y)&&un(w.prev,w,w.next)>=0||(w=w.prevZ,M.x>=m&&M.x<=S&&M.y>=v&&M.y<=_&&M!==i&&M!==o&&Uc(a,d,l,h,u,p,M.x,M.y)&&un(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;w&&w.z>=g;){if(w.x>=m&&w.x<=S&&w.y>=v&&w.y<=_&&w!==i&&w!==o&&Uc(a,d,l,h,u,p,w.x,w.y)&&un(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=x;){if(M.x>=m&&M.x<=S&&M.y>=v&&M.y<=_&&M!==i&&M!==o&&Uc(a,d,l,h,u,p,M.x,M.y)&&un(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function dH(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!M0(i,s)&&P3(i,r,r.next,s)&&Pd(i,s)&&Pd(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ld(r),Ld(r.next),r=n=s),r=r.next}while(r!==n);return vl(r)}function hH(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&wH(o,a)){let l=L3(o,a);o=vl(o,o.next),l=vl(l,l.next),Rd(o,e,t,r,i,s,0),Rd(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function pH(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=R3(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(SH(u));for(i.sort(mH),s=0;s<i.length;s++)t=gH(i[s],t);return t}function mH(n,e){return n.x-e.x}function gH(n,e){const t=vH(n,e);if(!t)return e;const r=L3(t,n);return vl(r,r.next),vl(t,t.next)}function vH(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let d=1/0,h;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Uc(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),Pd(t,n)&&(h<d||h===d&&(t.x>i.x||t.x===i.x&&yH(i,t)))&&(i=t,d=h)),t=t.next;while(t!==a);return i}function yH(n,e){return un(n.prev,n,e.prev)<0&&un(e.next,n,n.next)<0}function _H(n,e,t,r){let i=n;do i.z===0&&(i.z=$x(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,xH(i)}function xH(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function $x(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function SH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Uc(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function wH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!EH(n,e)&&(Pd(n,e)&&Pd(e,n)&&MH(n,e)&&(un(n.prev,n,e.prev)||un(n,e.prev,e))||M0(n,e)&&un(n.prev,n,n.next)>0&&un(e.prev,e,e.next)>0)}function un(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function M0(n,e){return n.x===e.x&&n.y===e.y}function P3(n,e,t,r){const i=fm(un(n,e,t)),s=fm(un(n,e,r)),o=fm(un(t,r,n)),a=fm(un(t,r,e));return!!(i!==s&&o!==a||i===0&&um(n,t,e)||s===0&&um(n,r,e)||o===0&&um(t,n,r)||a===0&&um(t,e,r))}function um(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fm(n){return n>0?1:n<0?-1:0}function EH(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&P3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Pd(n,e){return un(n.prev,n,n.next)<0?un(n,e,n.next)>=0&&un(n,n.prev,e)>=0:un(n,e,n.prev)<0||un(n,n.next,e)<0}function MH(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function L3(n,e){const t=new jx(n.i,n.x,n.y),r=new jx(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function Cb(n,e,t,r){const i=new jx(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ld(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function jx(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function TH(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ms{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ms.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];Rb(e),Pb(r,e);let o=e.length;t.forEach(Rb);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,Pb(r,t[l]);const a=cH.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Rb(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Pb(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Qd extends dt{constructor(e=new ol([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ge(i,3)),this.setAttribute("uv",new Ge(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:bH;let w,M=!1,A,b,I,L;g&&(w=g.getSpacedPoints(d),M=!0,p=!1,A=g.computeFrenetFrames(d,!1),b=new U,I=new U,L=new U),p||(_=0,m=0,v=0,S=0);const R=a.extractPoints(u);let P=R.shape;const k=R.holes;if(!Ms.isClockWise(P)){P=P.reverse();for(let G=0,_e=k.length;G<_e;G++){const pe=k[G];Ms.isClockWise(pe)&&(k[G]=pe.reverse())}}const H=Ms.triangulateShape(P,k),j=P;for(let G=0,_e=k.length;G<_e;G++){const pe=k[G];P=P.concat(pe)}function q(G,_e,pe){return _e||console.error("THREE.ExtrudeGeometry: vec does not exist"),G.clone().addScaledVector(_e,pe)}const Z=P.length,ee=H.length;function F(G,_e,pe){let be,ye,$e;const Ue=G.x-_e.x,ze=G.y-_e.y,Je=pe.x-G.x,yt=pe.y-G.y,Bt=Ue*Ue+ze*ze,N=Ue*yt-ze*Je;if(Math.abs(N)>Number.EPSILON){const O=Math.sqrt(Bt),ae=Math.sqrt(Je*Je+yt*yt),xe=_e.x-ze/O,Se=_e.y+Ue/O,Le=pe.x-yt/ae,Ve=pe.y+Je/ae,Ie=((Le-xe)*yt-(Ve-Se)*Je)/(Ue*yt-ze*Je);be=xe+Ue*Ie-G.x,ye=Se+ze*Ie-G.y;const fe=be*be+ye*ye;if(fe<=2)return new ve(be,ye);$e=Math.sqrt(fe/2)}else{let O=!1;Ue>Number.EPSILON?Je>Number.EPSILON&&(O=!0):Ue<-Number.EPSILON?Je<-Number.EPSILON&&(O=!0):Math.sign(ze)===Math.sign(yt)&&(O=!0),O?(be=-ze,ye=Ue,$e=Math.sqrt(Bt)):(be=Ue,ye=ze,$e=Math.sqrt(Bt/2))}return new ve(be/$e,ye/$e)}const K=[];for(let G=0,_e=j.length,pe=_e-1,be=G+1;G<_e;G++,pe++,be++)pe===_e&&(pe=0),be===_e&&(be=0),K[G]=F(j[G],j[pe],j[be]);const X=[];let oe,W=K.concat();for(let G=0,_e=k.length;G<_e;G++){const pe=k[G];oe=[];for(let be=0,ye=pe.length,$e=ye-1,Ue=be+1;be<ye;be++,$e++,Ue++)$e===ye&&($e=0),Ue===ye&&(Ue=0),oe[be]=F(pe[be],pe[$e],pe[Ue]);X.push(oe),W=W.concat(oe)}for(let G=0;G<_;G++){const _e=G/_,pe=m*Math.cos(_e*Math.PI/2),be=v*Math.sin(_e*Math.PI/2)+S;for(let ye=0,$e=j.length;ye<$e;ye++){const Ue=q(j[ye],K[ye],be);Re(Ue.x,Ue.y,-pe)}for(let ye=0,$e=k.length;ye<$e;ye++){const Ue=k[ye];oe=X[ye];for(let ze=0,Je=Ue.length;ze<Je;ze++){const yt=q(Ue[ze],oe[ze],be);Re(yt.x,yt.y,-pe)}}}const he=v+S;for(let G=0;G<Z;G++){const _e=p?q(P[G],W[G],he):P[G];M?(I.copy(A.normals[0]).multiplyScalar(_e.x),b.copy(A.binormals[0]).multiplyScalar(_e.y),L.copy(w[0]).add(I).add(b),Re(L.x,L.y,L.z)):Re(_e.x,_e.y,0)}for(let G=1;G<=d;G++)for(let _e=0;_e<Z;_e++){const pe=p?q(P[_e],W[_e],he):P[_e];M?(I.copy(A.normals[G]).multiplyScalar(pe.x),b.copy(A.binormals[G]).multiplyScalar(pe.y),L.copy(w[G]).add(I).add(b),Re(L.x,L.y,L.z)):Re(pe.x,pe.y,h/d*G)}for(let G=_-1;G>=0;G--){const _e=G/_,pe=m*Math.cos(_e*Math.PI/2),be=v*Math.sin(_e*Math.PI/2)+S;for(let ye=0,$e=j.length;ye<$e;ye++){const Ue=q(j[ye],K[ye],be);Re(Ue.x,Ue.y,h+pe)}for(let ye=0,$e=k.length;ye<$e;ye++){const Ue=k[ye];oe=X[ye];for(let ze=0,Je=Ue.length;ze<Je;ze++){const yt=q(Ue[ze],oe[ze],be);M?Re(yt.x,yt.y+w[d-1].y,w[d-1].x+pe):Re(yt.x,yt.y,h+pe)}}}le(),Te();function le(){const G=i.length/3;if(p){let _e=0,pe=Z*_e;for(let be=0;be<ee;be++){const ye=H[be];Ze(ye[2]+pe,ye[1]+pe,ye[0]+pe)}_e=d+_*2,pe=Z*_e;for(let be=0;be<ee;be++){const ye=H[be];Ze(ye[0]+pe,ye[1]+pe,ye[2]+pe)}}else{for(let _e=0;_e<ee;_e++){const pe=H[_e];Ze(pe[2],pe[1],pe[0])}for(let _e=0;_e<ee;_e++){const pe=H[_e];Ze(pe[0]+Z*d,pe[1]+Z*d,pe[2]+Z*d)}}r.addGroup(G,i.length/3-G,0)}function Te(){const G=i.length/3;let _e=0;we(j,_e),_e+=j.length;for(let pe=0,be=k.length;pe<be;pe++){const ye=k[pe];we(ye,_e),_e+=ye.length}r.addGroup(G,i.length/3-G,1)}function we(G,_e){let pe=G.length;for(;--pe>=0;){const be=pe;let ye=pe-1;ye<0&&(ye=G.length-1);for(let $e=0,Ue=d+_*2;$e<Ue;$e++){const ze=Z*$e,Je=Z*($e+1),yt=_e+be+ze,Bt=_e+ye+ze,N=_e+ye+Je,O=_e+be+Je;Qe(yt,Bt,N,O)}}}function Re(G,_e,pe){l.push(G),l.push(_e),l.push(pe)}function Ze(G,_e,pe){xt(G),xt(_e),xt(pe);const be=i.length/3,ye=x.generateTopUV(r,i,be-3,be-2,be-1);Ke(ye[0]),Ke(ye[1]),Ke(ye[2])}function Qe(G,_e,pe,be){xt(G),xt(_e),xt(be),xt(_e),xt(pe),xt(be);const ye=i.length/3,$e=x.generateSideWallUV(r,i,ye-6,ye-3,ye-2,ye-1);Ke($e[0]),Ke($e[1]),Ke($e[3]),Ke($e[1]),Ke($e[2]),Ke($e[3])}function xt(G){i.push(l[G*3+0]),i.push(l[G*3+1]),i.push(l[G*3+2])}function Ke(G){s.push(G.x),s.push(G.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return AH(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new JS[i.type]().fromJSON(i)),new Qd(r,e.options)}}const bH={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new ve(s,o),new ve(a,l),new ve(u,d)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],d=e[r*3+1],h=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],S=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-u)?[new ve(o,1-l),new ve(u,1-h),new ve(p,1-v),new ve(S,1-g)]:[new ve(a,1-l),new ve(d,1-h),new ve(m,1-v),new ve(_,1-g)]}};function AH(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class eh extends xo{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eh(e.radius,e.detail)}}class Au extends xo{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Au(e.radius,e.detail)}}class th extends dt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],d=[];let h=e;const p=(t-e)/i,m=new U,v=new ve;for(let S=0;S<=i;S++){for(let _=0;_<=r;_++){const g=s+_/r*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y)}h+=p}for(let S=0;S<i;S++){const _=S*(r+1);for(let g=0;g<r;g++){const x=g+_,w=x,M=x+r+1,A=x+r+2,b=x+1;a.push(w,M,b),a.push(M,A,b)}}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new th(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class nh extends dt{constructor(e=new ol([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ge(i,3)),this.setAttribute("normal",new Ge(s,3)),this.setAttribute("uv",new Ge(o,2));function u(d){const h=i.length/3,p=d.extractPoints(t);let m=p.shape;const v=p.holes;Ms.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const x=v[_];Ms.isClockWise(x)===!0&&(v[_]=x.reverse())}const S=Ms.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const x=v[_];m=m.concat(x)}for(let _=0,g=m.length;_<g;_++){const x=m[_];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let _=0,g=S.length;_<g;_++){const x=S[_],w=x[0]+h,M=x[1]+h,A=x[2]+h;r.push(w,M,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return CH(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new nh(r,e.curveSegments)}}function CH(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Cu extends dt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const d=[],h=new U,p=new U,m=[],v=[],S=[],_=[];for(let g=0;g<=r;g++){const x=[],w=g/r;let M=0;g===0&&o===0?M=.5/t:g===r&&l===Math.PI&&(M=-.5/t);for(let A=0;A<=t;A++){const b=A/t;h.x=-e*Math.cos(i+b*s)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(i+b*s)*Math.sin(o+w*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),S.push(p.x,p.y,p.z),_.push(b+M,1-w),x.push(u++)}d.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){const w=d[g][x+1],M=d[g][x],A=d[g+1][x],b=d[g+1][x+1];(g!==0||o>0)&&m.push(w,M,b),(g!==r-1||l<Math.PI)&&m.push(M,A,b)}this.setIndex(m),this.setAttribute("position",new Ge(v,3)),this.setAttribute("normal",new Ge(S,3)),this.setAttribute("uv",new Ge(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class rh extends xo{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rh(e.radius,e.detail)}}class ih extends dt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],d=new U,h=new U,p=new U;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const S=v/i*s,_=m/r*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(S),h.y=(e+t*Math.cos(_))*Math.sin(S),h.z=t*Math.sin(_),a.push(h.x,h.y,h.z),d.x=e*Math.cos(S),d.y=e*Math.sin(S),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const S=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,x=(i+1)*m+v;o.push(S,_,x),o.push(_,g,x)}this.setIndex(o),this.setAttribute("position",new Ge(a,3)),this.setAttribute("normal",new Ge(l,3)),this.setAttribute("uv",new Ge(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ih(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class sh extends dt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],d=[],h=new U,p=new U,m=new U,v=new U,S=new U,_=new U,g=new U;for(let w=0;w<=r;++w){const M=w/r*s*Math.PI*2;x(M,s,o,e,m),x(M+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),S.crossVectors(_,g),g.crossVectors(S,_),S.normalize(),g.normalize();for(let A=0;A<=i;++A){const b=A/i*Math.PI*2,I=-t*Math.cos(b),L=t*Math.sin(b);h.x=m.x+(I*g.x+L*S.x),h.y=m.y+(I*g.y+L*S.y),h.z=m.z+(I*g.z+L*S.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),u.push(p.x,p.y,p.z),d.push(w/r),d.push(A/i)}}for(let w=1;w<=r;w++)for(let M=1;M<=i;M++){const A=(i+1)*(w-1)+(M-1),b=(i+1)*w+(M-1),I=(i+1)*w+M,L=(i+1)*(w-1)+M;a.push(A,b,L),a.push(b,I,L)}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(d,2));function x(w,M,A,b,I){const L=Math.cos(w),R=Math.sin(w),P=A/M*w,k=Math.cos(P);I.x=b*(2+k)*.5*L,I.y=b*(2+k)*R*.5,I.z=b*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class oh extends dt{constructor(e=new KS(new U(-1,-1,0),new U(-1,1,0),new U(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new U,l=new U,u=new ve;let d=new U;const h=[],p=[],m=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new Ge(h,3)),this.setAttribute("normal",new Ge(p,3)),this.setAttribute("uv",new Ge(m,2));function S(){for(let w=0;w<t;w++)_(w);_(s===!1?t:0),x(),g()}function _(w){d=e.getPointAt(w/t,d);const M=o.normals[w],A=o.binormals[w];for(let b=0;b<=i;b++){const I=b/i*Math.PI*2,L=Math.sin(I),R=-Math.cos(I);l.x=R*M.x+L*A.x,l.y=R*M.y+L*A.y,l.z=R*M.z+L*A.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let w=1;w<=t;w++)for(let M=1;M<=i;M++){const A=(i+1)*(w-1)+(M-1),b=(i+1)*w+(M-1),I=(i+1)*w+M,L=(i+1)*(w-1)+M;v.push(A,b,L),v.push(b,I,L)}}function x(){for(let w=0;w<=t;w++)for(let M=0;M<=i;M++)u.x=w/t,u.y=M/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new oh(new JS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class I3 extends dt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new U,s=new U;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const h=l[u],p=h.start,m=h.count;for(let v=p,S=p+m;v<S;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),x=a.getX(v+(_+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),Lb(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const d=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),Lb(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ge(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Lb(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var Ib=Object.freeze({__proto__:null,BoxGeometry:xa,CapsuleGeometry:qd,CircleGeometry:Kd,ConeGeometry:Zd,CylinderGeometry:Ml,DodecahedronGeometry:Jd,EdgesGeometry:C3,ExtrudeGeometry:Qd,IcosahedronGeometry:eh,LatheGeometry:bu,OctahedronGeometry:Au,PlaneGeometry:Mu,PolyhedronGeometry:xo,RingGeometry:th,ShapeGeometry:nh,SphereGeometry:Cu,TetrahedronGeometry:rh,TorusGeometry:ih,TorusKnotGeometry:sh,TubeGeometry:oh,WireframeGeometry:I3});class D3 extends nr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ne(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class O3 extends Ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class QS extends nr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class k3 extends QS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Kf extends nr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$d,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N3 extends nr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ne(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class U3 extends nr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ew extends nr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$d,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class F3 extends nr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ne(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_a,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z3 extends gr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function _i(n,e,t){return tw(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ja(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function tw(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function B3(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Xx(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function nw(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function RH(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],d=u.getValueSize(),h=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){h.push(u.times[m]);for(let S=0;S<d;++S)p.push(u.values[m*d+S])}}h.length!==0&&(u.times=Ja(h,u.times.constructor),u.values=Ja(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function PH(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let S;if(s<=a.times[0]){const g=d,x=h-d;S=_i(a.values,g,x)}else if(s>=a.times[v]){const g=v*h+d,x=g+h-d;S=_i(a.values,g,x)}else{const g=a.createInterpolant(),x=d,w=h-d;g.evaluate(s),S=_i(g.resultBuffer,x,w)}l==="quaternion"&&new kn().fromArray(S).normalize().conjugate().toArray(S);const _=u.times.length;for(let g=0;g<_;++g){const x=g*m+p;if(l==="quaternion")kn.multiplyQuaternionsFlat(u.values,x,S,0,u.values,x);else{const w=m-p*2;for(let M=0;M<w;++M)u.values[x+M]-=S[M]}}}return n.blendMode=IS,n}const LH={arraySlice:_i,convertArray:Ja,isTypedArray:tw,getKeyframeOrder:B3,sortedArray:Xx,flattenJSON:nw,subclip:RH,makeClipAdditive:PH};class ah{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class H3 extends ah{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:qa,endingEnd:qa}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ka:s=e,a=2*t-r;break;case Ed:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Ka:o=e,l=2*r-t;break;case Ed:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,d=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),S=v*v,_=S*v,g=-p*_+2*p*S-p*v,x=(1+p)*_+(-1.5-2*p)*S+(-.5+p)*v+1,w=(-1-m)*_+(1.5+m)*S+.5*v,M=m*_-m*S;for(let A=0;A!==a;++A)s[A]=g*o[d+A]+x*o[u+A]+w*o[l+A]+M*o[h+A];return s}}class rw extends ah{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=(r-t)/(i-t),h=1-d;for(let p=0;p!==a;++p)s[p]=o[u+p]*h+o[l+p]*d;return s}}class V3 extends ah{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ns{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ja(t,this.TimeBufferType),this.values=Ja(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ja(e.times,Array),values:Ja(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new V3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new H3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Sd:t=this.InterpolantFactoryMethodDiscrete;break;case wd:t=this.InterpolantFactoryMethodLinear;break;case Xm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sd;case this.InterpolantFactoryMethodLinear:return wd;case this.InterpolantFactoryMethodSmooth:return Xm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=_i(r,s,o),this.values=_i(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&tw(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=_i(this.times),t=_i(this.values),r=this.getValueSize(),i=this.getInterpolation()===Xm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],d=e[a+1];if(u!==d&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,p=h-r,m=h+r;for(let v=0;v!==r;++v){const S=t[h+v];if(S!==t[p+v]||S!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=_i(e,0,o),this.values=_i(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=_i(this.times,0),t=_i(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ns.prototype.TimeBufferType=Float32Array;ns.prototype.ValueBufferType=Float32Array;ns.prototype.DefaultInterpolation=wd;class Tl extends ns{}Tl.prototype.ValueTypeName="bool";Tl.prototype.ValueBufferType=Array;Tl.prototype.DefaultInterpolation=Sd;Tl.prototype.InterpolantFactoryMethodLinear=void 0;Tl.prototype.InterpolantFactoryMethodSmooth=void 0;class iw extends ns{}iw.prototype.ValueTypeName="color";class uu extends ns{}uu.prototype.ValueTypeName="number";class G3 extends ah{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let d=u+a;u!==d;u+=4)kn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class bl extends ns{InterpolantFactoryMethodLinear(e){return new G3(this.times,this.values,this.getValueSize(),e)}}bl.prototype.ValueTypeName="quaternion";bl.prototype.DefaultInterpolation=wd;bl.prototype.InterpolantFactoryMethodSmooth=void 0;class Al extends ns{}Al.prototype.ValueTypeName="string";Al.prototype.ValueBufferType=Array;Al.prototype.DefaultInterpolation=Sd;Al.prototype.InterpolantFactoryMethodLinear=void 0;Al.prototype.InterpolantFactoryMethodSmooth=void 0;class fu extends ns{}fu.prototype.ValueTypeName="vector";class du{constructor(e,t=-1,r,i=p0){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=si(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(DH(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ns.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const d=B3(l);l=Xx(l,1,d),u=Xx(u,1,d),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new uu(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.name.match(s);if(d&&d.length>1){const h=d[1];let p=i[h];p||(i[h]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,p,m,v,S){if(m.length!==0){const _=[],g=[];nw(m,_,g,v),_.length!==0&&S.push(new h(p,_,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let S=0;S<p[v].morphTargets.length;S++)m[p[v].morphTargets[S]]=-1;for(const S in m){const _=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const w=p[v];_.push(w.time),g.push(w.morphTarget===S?1:0)}i.push(new uu(".morphTargetInfluence["+S+"]",_,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(fu,m+".position",p,"pos",i),r(bl,m+".quaternion",p,"rot",i),r(fu,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function IH(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return uu;case"vector":case"vector2":case"vector3":case"vector4":return fu;case"color":return iw;case"quaternion":return bl;case"bool":case"boolean":return Tl;case"string":return Al}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function DH(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=IH(n.type);if(n.times===void 0){const t=[],r=[];nw(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const yl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sw{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return u.push(d,h),this},this.removeHandler=function(d){const h=u.indexOf(d);return h!==-1&&u.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=u.length;h<p;h+=2){const m=u[h],v=u[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const Fc=new sw;let Wr=class{constructor(e){this.manager=e!==void 0?e:Fc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Ws={};class OH extends Error{constructor(e,t){super(e),this.response=t}}class bs extends Wr{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=yl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ws[e]!==void 0){Ws[e].push({onLoad:t,onProgress:r,onError:i});return}Ws[e]=[],Ws[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Ws[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let S=0;const _=new ReadableStream({start(g){x();function x(){h.read().then(({done:w,value:M})=>{if(w)g.close();else{S+=M.byteLength;const A=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:m});for(let b=0,I=d.length;b<I;b++){const L=d[b];L.onProgress&&L.onProgress(A)}g.enqueue(M),x()}})}}});return new Response(_)}else throw new OH(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{yl.add(e,u);const d=Ws[e];delete Ws[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onLoad&&m.onLoad(u)}}).catch(u=>{const d=Ws[e];if(d===void 0)throw this.manager.itemError(e),u;delete Ws[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class kH extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new bs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=du.parse(e[r]);t.push(i)}return t}}class NH extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new jS,l=new bs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function d(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Rn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+S]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Rn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Id extends Wr{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=bd("img");function l(){d(),yl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){d(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class UH extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=new Xd;s.colorSpace=vt;const o=new Id(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(d){s.images[u]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class FH extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Yc,a=new bs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Yn,o.wrapT=u.wrapT!==void 0?u.wrapT:Yn,o.magFilter=u.magFilter!==void 0?u.magFilter:Rn,o.minFilter=u.minFilter!==void 0?u.minFilter:Rn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=da),u.mipmapCount===1&&(o.minFilter=Rn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class W3 extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=new rn,o=new Id(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Sa extends Lt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class $3 extends Sa{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ne(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Gy=new qe,Db=new U,Ob=new U;class ow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new v0,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new It(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Db.setFromMatrixPosition(e.matrixWorld),t.position.copy(Db),Ob.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ob),t.updateMatrixWorld(),Gy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gy),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Gy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zH extends ow{constructor(){super(new Sn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=au*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class aw extends Sa{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new zH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const kb=new qe,xf=new U,Wy=new U;class BH extends ow{constructor(){super(new Sn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new It(2,1,1,1),new It(0,1,1,1),new It(3,1,1,1),new It(1,1,1,1),new It(3,0,1,1),new It(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),xf.setFromMatrixPosition(e.matrixWorld),r.position.copy(xf),Wy.copy(r.position),Wy.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Wy),r.updateMatrixWorld(),i.makeTranslation(-xf.x,-xf.y,-xf.z),kb.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kb)}}class Cg extends Sa{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new BH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class HH extends ow{constructor(){super(new io(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lw extends Sa{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.shadow=new HH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cw extends Sa{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class j3 extends Sa{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class X3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class T0 extends Sa{constructor(e=new X3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class b0 extends Wr{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new bs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=b0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ne().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ne().setHex(o.value);break;case"v2":i.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":i.uniforms[s].value=new U().fromArray(o.value);break;case"v4":i.uniforms[s].value=new It().fromArray(o.value);break;case"m3":i.uniforms[s].value=new _t().fromArray(o.value);break;case"m4":i.uniforms[s].value=new qe().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:D3,SpriteMaterial:GS,RawShaderMaterial:O3,ShaderMaterial:Ts,PointsMaterial:$S,MeshPhysicalMaterial:k3,MeshStandardMaterial:QS,MeshPhongMaterial:Kf,MeshToonMaterial:N3,MeshNormalMaterial:U3,MeshLambertMaterial:ew,MeshDepthMaterial:BS,MeshDistanceMaterial:HS,MeshBasicMaterial:_o,MeshMatcapMaterial:F3,LineDashedMaterial:z3,LineBasicMaterial:gr,Material:nr};return new t[e]}}class hu{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Y3 extends dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class q3 extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new bs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),x=kc(_.type,g),w=new S0(x,_.stride);return w.uuid=_.uuid,t[v]=w,w}function s(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new Y3:new dt,a=e.data.index;if(a!==void 0){const m=kc(a.type,a.array);o.setIndex(new $t(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let S;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);S=new gl(_,v.itemSize,v.offset,v.normalized)}else{const _=kc(v.type,v.array),g=v.isInstancedBufferAttribute?cu:$t;S=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),v.usage!==void 0&&S.setUsage(v.usage),v.updateRange!==void 0&&(S.updateRange.offset=v.updateRange.offset,S.updateRange.count=v.updateRange.count),o.setAttribute(m,S)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],S=[];for(let _=0,g=v.length;_<g;_++){const x=v[_];let w;if(x.isInterleavedBufferAttribute){const M=i(e.data,x.data);w=new gl(M,x.itemSize,x.offset,x.normalized)}else{const M=kc(x.type,x.array);w=new $t(M,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),S.push(w)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const S=h[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new U;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ts(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class VH extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?hu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new bs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?hu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new bs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new ol().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Yd().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new q3;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in Ib?a=Ib[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new b0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=du.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(d)}else return l.data?{data:kc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new sw(t);s=new Id(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Yc(g.data,g.width,g.height)))}i[h.uuid]=new Za(m)}else{const m=a(h.url);i[h.uuid]=new Za(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:kc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Id(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const d=[];for(let h=0,p=u.length;h<p;h++){const m=u[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Yc(v.data,v.width,v.height)))}r[l.uuid]=new Za(d)}else{const d=await s(l.url);r[l.uuid]=new Za(d)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let d;Array.isArray(u)?(d=new Xd,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Yc:d=new rn,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,GH)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],Nb),d.wrapT=r(a.wrap[1],Nb)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,Ub)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,Ub)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const _=p[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,h;switch(e.type){case"Scene":o=new Ag,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ne(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new x0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new _0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Sn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new io(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cw(e.color,e.intensity);break;case"DirectionalLight":o=new lw(e.color,e.intensity);break;case"PointLight":o=new Cg(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new j3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new aw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new $3(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new T0().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=l(e.material),o=new WS(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=l(e.material),o=new qn(d,h);break;case"InstancedMesh":d=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new x3(d,h,p),o.instanceMatrix=new cu(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new cu(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new _3;break;case"Line":o=new mo(a(e.geometry),l(e.material));break;case"LineLoop":o=new S3(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ls(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new w3(a(e.geometry),l(e.material));break;case"Sprite":o=new y3(l(e.material));break;case"Group":o=new Yo;break;case"Bone":o=new Ad;break;default:o=new Lt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],S=o.getObjectByProperty("uuid",v.object);S!==void 0&&o.addLevel(S,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const GH={UVMapping:d0,CubeReflectionMapping:ua,CubeRefractionMapping:fa,EquirectangularReflectionMapping:su,EquirectangularRefractionMapping:_d,CubeUVReflectionMapping:wu},Nb={RepeatWrapping:pl,ClampToEdgeWrapping:Yn,MirroredRepeatWrapping:xd},Ub={NearestFilter:An,NearestMipmapNearestFilter:Mg,NearestMipmapLinearFilter:$f,LinearFilter:Rn,LinearMipmapNearestFilter:TS,LinearMipmapLinearFilter:da};class WH extends Wr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){yl.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let dm;class uw{static getContext(){return dm===void 0&&(dm=new(window.AudioContext||window.webkitAudioContext)),dm}static setContext(e){dm=e}}class $H extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new bs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);uw.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class jH extends T0{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Ne().set(e),s=new Ne().set(t),o=new U(i.r,i.g,i.b),a=new U(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class XH extends T0{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Ne().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Fb=new qe,zb=new qe,ka=new qe;class YH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ka.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(il*t.fov*.5)/t.zoom;let a,l;zb.elements[12]=-i,Fb.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,ka.elements[0]=2*t.near/(l-a),ka.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ka),a=-o*t.aspect-s,l=o*t.aspect-s,ka.elements[0]=2*t.near/(l-a),ka.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ka)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Fb)}}class fw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Bb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Bb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Bb(){return(typeof performance>"u"?Date:performance).now()}const Na=new U,Hb=new kn,qH=new U,Ua=new U;class KH extends Lt{constructor(){super(),this.type="AudioListener",this.context=uw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Na,Hb,qH),Ua.set(0,0,-1).applyQuaternion(Hb),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Na.x,i),t.positionY.linearRampToValueAtTime(Na.y,i),t.positionZ.linearRampToValueAtTime(Na.z,i),t.forwardX.linearRampToValueAtTime(Ua.x,i),t.forwardY.linearRampToValueAtTime(Ua.y,i),t.forwardZ.linearRampToValueAtTime(Ua.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Na.x,Na.y,Na.z),t.setOrientation(Ua.x,Ua.y,Ua.z,r.x,r.y,r.z)}}class K3 extends Lt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Fa=new U,Vb=new kn,ZH=new U,za=new U;class JH extends K3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Fa,Vb,ZH),za.set(0,0,1).applyQuaternion(Vb);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Fa.x,r),t.positionY.linearRampToValueAtTime(Fa.y,r),t.positionZ.linearRampToValueAtTime(Fa.z,r),t.orientationX.linearRampToValueAtTime(za.x,r),t.orientationY.linearRampToValueAtTime(za.y,r),t.orientationZ.linearRampToValueAtTime(za.z,r)}else t.setPosition(Fa.x,Fa.y,Fa.z),t.setOrientation(za.x,za.y,za.z)}}class QH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class Z3{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){kn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;kn.multiplyQuaternionsFlat(e,o,e,t,e,r),kn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const dw="\\[\\]\\.:\\/",eV=new RegExp("["+dw+"]","g"),hw="[^"+dw+"]",tV="[^"+dw.replace("\\.","")+"]",nV=/((?:WC+[\/:])*)/.source.replace("WC",hw),rV=/(WCOD+)?/.source.replace("WCOD",tV),iV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hw),sV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hw),oV=new RegExp("^"+nV+rV+iV+sV+"$"),aV=["material","materials","bones","map"];class lV{constructor(e,t,r){const i=r||At.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class At{constructor(e,t,r){this.path=t,this.parsedPath=r||At.parseTrackName(t),this.node=At.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new At.Composite(e,t,r):new At(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eV,"")}static parseTrackName(e){const t=oV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);aV.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=At.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}At.Composite=lV;At.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};At.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};At.prototype.GetterByBindingType=[At.prototype._getValue_direct,At.prototype._getValue_array,At.prototype._getValue_arrayElement,At.prototype._getValue_toArray];At.prototype.SetterByBindingTypeAndVersioning=[[At.prototype._setValue_direct,At.prototype._setValue_direct_setNeedsUpdate,At.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[At.prototype._setValue_array,At.prototype._setValue_array_setNeedsUpdate,At.prototype._setValue_array_setMatrixWorldNeedsUpdate],[At.prototype._setValue_arrayElement,At.prototype._setValue_arrayElement_setNeedsUpdate,At.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[At.prototype._setValue_fromArray,At.prototype._setValue_fromArray_setNeedsUpdate,At.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class cV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=si(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let S=0,_=o;S!==_;++S)s[S].push(new At(p,r[S],i[S]))}else if(v<u){a=e[v];const S=--u,_=e[S];t[_.uuid]=v,e[v]=_,t[m]=S,e[S]=p;for(let g=0,x=o;g!==x;++g){const w=s[g],M=w[S];let A=w[v];w[v]=M,A===void 0&&(A=new At(p,r[g],i[g])),w[S]=A}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,d=t[u];if(d!==void 0&&d>=s){const h=s++,p=e[h];t[p.uuid]=d,e[d]=p,t[u]=h,e[h]=l;for(let m=0,v=i;m!==v;++m){const S=r[m],_=S[h],g=S[d];S[d]=_,S[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],d=u.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const p=--s,m=e[p],v=--o,S=e[v];t[m.uuid]=h,e[h]=m,t[S.uuid]=p,e[p]=S,e.pop();for(let _=0,g=i;_!==g;++_){const x=r[_],w=x[p],M=x[v];x[h]=w,x[p]=M,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,S=i;v!==S;++v){const _=r[v];_[h]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,h=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let p=d,m=l.length;p!==m;++p){const v=l[p];h[p]=new At(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class J3{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:qa,endingEnd:qa};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);a[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case IS:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulateAdditive(a);break;case p0:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===VP;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===BP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Ka,i.endingEnd=Ka):(e?i.endingStart=this.zeroSlopeAtStart?Ka:qa:i.endingStart=Ed,t?i.endingEnd=this.zeroSlopeAtEnd?Ka:qa:i.endingEnd=Ed)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const uV=new Float32Array(1);class fV extends Rs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let h=0;h!==s;++h){const p=i[h],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const S=t&&t._propertyBindings[h].binding.parsedPath;v=new Z3(At.create(r,m,S),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new rw(new Float32Array(2),new Float32Array(2),1,uV),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?du.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=p0),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new J3(this,o,t,r);return this._bindAction(d,u),this._addInactiveAction(d,a,s),d}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?du.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const d=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pw{constructor(e){this.value=e}clone(){return new pw(this.value.clone===void 0?this.value:this.value.clone())}}let dV=0;class hV extends Rs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:dV++}),this.name="",this.usage=Md,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class pV extends S0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class mV{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Q3{constructor(e,t,r=0,i=1/0){this.ray=new Eu(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new sl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Yx(e,this,r,t),r.sort(Gb),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Yx(e[i],this,r,t);return r.sort(Gb),r}}function Gb(n,e){return n.distance-e.distance}function Yx(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)Yx(i[s],e,t,!0)}}class qx{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(xn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class gV{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const Wb=new ve;class vV{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Wb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wb).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $b=new U,hm=new U;class yV{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){$b.subVectors(e,this.start),hm.subVectors(this.end,this.start);const r=hm.dot(hm);let s=hm.dot($b)/r;return t&&(s=xn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jb=new U;class _V extends Lt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new dt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new Ge(i,3));const s=new gr({fog:!1,toneMapped:!1});this.cone=new Ls(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Uo=new U,pm=new qe,$y=new qe;class xV extends Ls{constructor(e){const t=eL(e),r=new dt,i=[],s=[],o=new Ne(0,0,1),a=new Ne(0,1,0);for(let u=0;u<t.length;u++){const d=t[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ge(i,3)),r.setAttribute("color",new Ge(s,3));const l=new gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");$y.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(pm.multiplyMatrices($y,a.matrixWorld),Uo.setFromMatrixPosition(pm),i.setXYZ(o,Uo.x,Uo.y,Uo.z),pm.multiplyMatrices($y,a.parent.matrixWorld),Uo.setFromMatrixPosition(pm),i.setXYZ(o+1,Uo.x,Uo.y,Uo.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function eL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,eL(n.children[t]));return e}class SV extends qn{constructor(e,t,r){const i=new Cu(t,4,2),s=new _o({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wV=new U,Xb=new Ne,Yb=new Ne;class EV extends Lt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Au(t);i.rotateY(Math.PI*.5),this.material=new _o({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new $t(o,3)),this.add(new qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Xb.copy(this.light.color),Yb.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?Xb:Yb;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class MV extends Ls{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ne(r),i=new Ne(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const S=p===s?r:i;S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3}const d=new dt;d.setAttribute("position",new Ge(l,3)),d.setAttribute("color",new Ge(u,3));const h=new gr({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class TV extends Ls{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Ne(s),o=new Ne(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const S=h&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let h=0;h<r;h++){const p=h&1?s:o,m=e-e/r*h;for(let v=0;v<i;v++){let S=v/i*(Math.PI*2),_=Math.sin(S)*m,g=Math.cos(S)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),S=(v+1)/i*(Math.PI*2),_=Math.sin(S)*m,g=Math.cos(S)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const u=new dt;u.setAttribute("position",new Ge(a,3)),u.setAttribute("color",new Ge(l,3));const d=new gr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qb=new U,mm=new U,Kb=new U;class bV extends Lt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new dt;i.setAttribute("position",new Ge([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new gr({fog:!1,toneMapped:!1});this.lightPlane=new mo(i,s),this.add(this.lightPlane),i=new dt,i.setAttribute("position",new Ge([0,0,0,0,0,1],3)),this.targetLine=new mo(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qb.setFromMatrixPosition(this.light.matrixWorld),mm.setFromMatrixPosition(this.light.target.matrixWorld),Kb.subVectors(mm,qb),this.lightPlane.lookAt(mm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mm),this.targetLine.scale.z=Kb.length()}}const gm=new U,yn=new jd;class AV extends Ls{constructor(e){const t=new dt,r=new gr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,S){l(v),l(S)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new Ge(i,3)),t.setAttribute("color",new Ge(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ne(16755200),d=new Ne(16711680),h=new Ne(43775),p=new Ne(16777215),m=new Ne(3355443);this.setColors(u,d,h,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Tn("c",t,e,yn,0,0,-1),Tn("t",t,e,yn,0,0,1),Tn("n1",t,e,yn,-r,-i,-1),Tn("n2",t,e,yn,r,-i,-1),Tn("n3",t,e,yn,-r,i,-1),Tn("n4",t,e,yn,r,i,-1),Tn("f1",t,e,yn,-r,-i,1),Tn("f2",t,e,yn,r,-i,1),Tn("f3",t,e,yn,-r,i,1),Tn("f4",t,e,yn,r,i,1),Tn("u1",t,e,yn,r*.7,i*1.1,-1),Tn("u2",t,e,yn,-r*.7,i*1.1,-1),Tn("u3",t,e,yn,0,i*2,-1),Tn("cf1",t,e,yn,-r,0,1),Tn("cf2",t,e,yn,r,0,1),Tn("cf3",t,e,yn,0,-i,1),Tn("cf4",t,e,yn,0,i,1),Tn("cn1",t,e,yn,-r,0,-1),Tn("cn2",t,e,yn,r,0,-1),Tn("cn3",t,e,yn,0,-i,-1),Tn("cn4",t,e,yn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Tn(n,e,t,r,i,s,o){gm.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,d=a.length;u<d;u++)l.setXYZ(a[u],gm.x,gm.y,gm.z)}}const vm=new Ps;class CV extends Ls{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new dt;s.setIndex(new $t(r,1)),s.setAttribute("position",new $t(i,3)),super(s,new gr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vm.setFromObject(this.object),vm.isEmpty())return;const t=vm.min,r=vm.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class RV extends Ls{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new dt;s.setIndex(new $t(r,1)),s.setAttribute("position",new Ge(i,3)),super(s,new gr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PV extends mo{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new dt;o.setAttribute("position",new Ge(s,3)),o.computeBoundingSphere(),super(o,new gr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new dt;l.setAttribute("position",new Ge(a,3)),l.computeBoundingSphere(),this.add(new qn(l,new _o({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Zb=new U;let ym,jy;class LV extends Lt{constructor(e=new U(0,0,1),t=new U(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",ym===void 0&&(ym=new dt,ym.setAttribute("position",new Ge([0,0,0,0,1,0],3)),jy=new Ml(0,.5,1,5,1),jy.translate(0,-.5,0)),this.position.copy(t),this.line=new mo(ym,new gr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qn(jy,new _o({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Zb.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Zb,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class IV extends Ls{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new dt;i.setAttribute("position",new Ge(t,3)),i.setAttribute("color",new Ge(r,3));const s=new gr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ne,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class DV{constructor(){this.type="ShapePath",this.color=new Ne,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Cd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let w=0,M=g.length;w<M;w++){const A=g[w],b=new ol;b.curves=A.curves,x.push(b)}return x}function r(g,x){const w=x.length;let M=!1;for(let A=w-1,b=0;b<w;A=b++){let I=x[A],L=x[b],R=L.x-I.x,P=L.y-I.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(I=x[b],R=-R,L=x[A],P=-P),g.y<I.y||g.y>L.y)continue;if(g.y===I.y){if(g.x===I.x)return!0}else{const k=P*(g.x-I.x)-R*(g.y-I.y);if(k===0)return!0;if(k<0)continue;M=!M}}else{if(g.y!==I.y)continue;if(L.x<=g.x&&g.x<=I.x||I.x<=g.x&&g.x<=L.x)return!0}}return M}const i=Ms.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new ol,l.curves=a.curves,u.push(l),u;let d=!i(s[0].getPoints());d=e?!d:d;const h=[],p=[];let m=[],v=0,S;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],S=a.getPoints(),o=i(S),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new ol,p:S},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:S[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let w=0,M=p.length;w<M;w++)h[w]=[];for(let w=0,M=p.length;w<M;w++){const A=m[w];for(let b=0;b<A.length;b++){const I=A[b];let L=!0;for(let R=0;R<p.length;R++)r(I.p,p[R].p)&&(w!==R&&x++,L?(L=!1,h[R].push(I)):g=!0);L&&h[w].push(I)}}x>0&&g===!1&&(m=h)}let _;for(let g=0,x=p.length;g<x;g++){l=p[g].s,u.push(l),_=m[g];for(let w=0,M=_.length;w<M;w++)l.holes.push(_[w].h)}return u}}class OV extends xa{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class kV extends qd{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class NV extends Kd{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class UV extends Zd{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class FV extends Ml{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class zV extends Jd{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class BV extends Qd{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class HV extends eh{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class VV extends bu{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class GV extends Au{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class WV extends Mu{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class $V extends xo{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class jV extends th{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class XV extends nh{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class YV extends Cu{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class qV extends rh{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class KV extends ih{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class ZV extends sh{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class JV extends oh{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:c0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=c0);const QV=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:f0,AddEquation:Wa,AddOperation:bP,AdditiveAnimationBlendMode:IS,AdditiveBlending:dx,AlphaFormat:DP,AlwaysCompare:e3,AlwaysDepth:_P,AlwaysStencilFunc:jP,AmbientLight:cw,AmbientLightProbe:XH,AnimationAction:J3,AnimationClip:du,AnimationLoader:kH,AnimationMixer:fV,AnimationObjectGroup:cV,AnimationUtils:LH,ArcCurve:E3,ArrayCamera:p3,ArrowHelper:LV,Audio:K3,AudioAnalyser:QH,AudioContext:uw,AudioListener:KH,AudioLoader:$H,AxesHelper:IV,BackSide:Ar,BasicDepthPacking:GP,BasicShadowMap:sP,Bone:Ad,BooleanKeyframeTrack:Tl,Box2:vV,Box3:Ps,Box3Helper:RV,BoxBufferGeometry:OV,BoxGeometry:xa,BoxHelper:CV,BufferAttribute:$t,BufferGeometry:dt,BufferGeometryLoader:q3,ByteType:LP,Cache:yl,Camera:jd,CameraHelper:AV,CanvasTexture:tH,CapsuleBufferGeometry:kV,CapsuleGeometry:qd,CatmullRomCurve3:M3,CineonToneMapping:RP,CircleBufferGeometry:NV,CircleGeometry:Kd,ClampToEdgeWrapping:Yn,Clock:fw,Color:Ne,ColorKeyframeTrack:iw,ColorManagement:yi,CompressedArrayTexture:eH,CompressedTexture:jS,CompressedTextureLoader:NH,ConeBufferGeometry:UV,ConeGeometry:Zd,CubeCamera:o3,CubeReflectionMapping:ua,CubeRefractionMapping:fa,CubeTexture:Xd,CubeTextureLoader:UH,CubeUVReflectionMapping:wu,CubicBezierCurve:YS,CubicBezierCurve3:T3,CubicInterpolant:H3,CullFaceBack:fx,CullFaceFront:iP,CullFaceFrontBack:JN,CullFaceNone:rP,Curve:Ri,CurvePath:A3,CustomBlending:oP,CustomToneMapping:PP,CylinderBufferGeometry:FV,CylinderGeometry:Ml,Cylindrical:gV,Data3DTexture:US,DataArrayTexture:m0,DataTexture:Yc,DataTextureLoader:FH,DataUtils:uF,DecrementStencilOp:uU,DecrementWrapStencilOp:dU,DefaultLoadingManager:Fc,DepthFormat:sa,DepthStencilFormat:ml,DepthTexture:m3,DirectionalLight:lw,DirectionalLightHelper:bV,DiscreteInterpolant:V3,DisplayP3ColorSpace:OS,DodecahedronBufferGeometry:zV,DodecahedronGeometry:Jd,DoubleSide:vs,DstAlphaFactor:hP,DstColorFactor:mP,DynamicCopyUsage:AU,DynamicDrawUsage:SU,DynamicReadUsage:MU,EdgesGeometry:C3,EllipseCurve:w0,EqualCompare:qP,EqualDepth:SP,EqualStencilFunc:gU,EquirectangularReflectionMapping:su,EquirectangularRefractionMapping:_d,Euler:xs,EventDispatcher:Rs,ExtrudeBufferGeometry:BV,ExtrudeGeometry:Qd,FileLoader:bs,Float16BufferAttribute:gF,Float32BufferAttribute:Ge,Float64BufferAttribute:vF,FloatType:ys,Fog:x0,FogExp2:_0,FramebufferTexture:Q5,FrontSide:po,Frustum:v0,GLBufferAttribute:mV,GLSL1:RU,GLSL3:Bx,GreaterCompare:ZP,GreaterDepth:EP,GreaterEqualCompare:QP,GreaterEqualDepth:wP,GreaterEqualStencilFunc:xU,GreaterStencilFunc:yU,GridHelper:MV,Group:Yo,HalfFloatType:ou,HemisphereLight:$3,HemisphereLightHelper:EV,HemisphereLightProbe:jH,IcosahedronBufferGeometry:HV,IcosahedronGeometry:eh,ImageBitmapLoader:WH,ImageLoader:Id,ImageUtils:NS,IncrementStencilOp:cU,IncrementWrapStencilOp:fU,InstancedBufferAttribute:cu,InstancedBufferGeometry:Y3,InstancedInterleavedBuffer:pV,InstancedMesh:x3,Int16BufferAttribute:pF,Int32BufferAttribute:mF,Int8BufferAttribute:fF,IntType:bS,InterleavedBuffer:S0,InterleavedBufferAttribute:gl,Interpolant:ah,InterpolateDiscrete:Sd,InterpolateLinear:wd,InterpolateSmooth:Xm,InvertStencilOp:hU,KeepStencilOp:Ym,KeyframeTrack:ns,LOD:_3,LatheBufferGeometry:VV,LatheGeometry:bu,Layers:sl,LessCompare:YP,LessDepth:xP,LessEqualCompare:KP,LessEqualDepth:Eg,LessEqualStencilFunc:vU,LessStencilFunc:mU,Light:Sa,LightProbe:T0,Line:mo,Line3:yV,LineBasicMaterial:gr,LineCurve:E0,LineCurve3:b3,LineDashedMaterial:z3,LineLoop:S3,LineSegments:Ls,LinearEncoding:DS,LinearFilter:Rn,LinearInterpolant:rw,LinearMipMapLinearFilter:rU,LinearMipMapNearestFilter:nU,LinearMipmapLinearFilter:da,LinearMipmapNearestFilter:TS,LinearSRGBColorSpace:Zi,LinearToneMapping:AP,Loader:Wr,LoaderUtils:hu,LoadingManager:sw,LoopOnce:BP,LoopPingPong:VP,LoopRepeat:HP,LuminanceAlphaFormat:kP,LuminanceFormat:OP,MOUSE:Ys,Material:nr,MaterialLoader:b0,MathUtils:$i,Matrix3:_t,Matrix4:qe,MaxEquation:gx,Mesh:qn,MeshBasicMaterial:_o,MeshDepthMaterial:BS,MeshDistanceMaterial:HS,MeshLambertMaterial:ew,MeshMatcapMaterial:F3,MeshNormalMaterial:U3,MeshPhongMaterial:Kf,MeshPhysicalMaterial:k3,MeshStandardMaterial:QS,MeshToonMaterial:N3,MinEquation:mx,MirroredRepeatWrapping:xd,MixOperation:TP,MultiplyBlending:px,MultiplyOperation:$d,NearestFilter:An,NearestMipMapLinearFilter:tU,NearestMipMapNearestFilter:eU,NearestMipmapLinearFilter:$f,NearestMipmapNearestFilter:Mg,NeverCompare:XP,NeverDepth:yP,NeverStencilFunc:pU,NoBlending:ro,NoColorSpace:aa,NoToneMapping:Yi,NormalAnimationBlendMode:p0,NormalBlending:rl,NotEqualCompare:JP,NotEqualDepth:MP,NotEqualStencilFunc:_U,NumberKeyframeTrack:uu,Object3D:Lt,ObjectLoader:VH,ObjectSpaceNormalMap:$P,OctahedronBufferGeometry:GV,OctahedronGeometry:Au,OneFactor:uP,OneMinusDstAlphaFactor:pP,OneMinusDstColorFactor:gP,OneMinusSrcAlphaFactor:MS,OneMinusSrcColorFactor:dP,OrthographicCamera:io,PCFShadowMap:u0,PCFSoftShadowMap:Wf,PMREMGenerator:Vx,Path:Cd,PerspectiveCamera:Sn,Plane:Vo,PlaneBufferGeometry:WV,PlaneGeometry:Mu,PlaneHelper:PV,PointLight:Cg,PointLightHelper:SV,Points:w3,PointsMaterial:$S,PolarGridHelper:TV,PolyhedronBufferGeometry:$V,PolyhedronGeometry:xo,PositionalAudio:JH,PropertyBinding:At,PropertyMixer:Z3,QuadraticBezierCurve:qS,QuadraticBezierCurve3:KS,Quaternion:kn,QuaternionKeyframeTrack:bl,QuaternionLinearInterpolant:G3,RED_GREEN_RGTC2_Format:Fx,RED_RGTC1_Format:zP,REVISION:c0,RGBADepthPacking:WP,RGBAFormat:Fr,RGBAIntegerFormat:LS,RGBA_ASTC_10x10_Format:Ox,RGBA_ASTC_10x5_Format:Lx,RGBA_ASTC_10x6_Format:Ix,RGBA_ASTC_10x8_Format:Dx,RGBA_ASTC_12x10_Format:kx,RGBA_ASTC_12x12_Format:Nx,RGBA_ASTC_4x4_Format:Ex,RGBA_ASTC_5x4_Format:Mx,RGBA_ASTC_5x5_Format:Tx,RGBA_ASTC_6x5_Format:bx,RGBA_ASTC_6x6_Format:Ax,RGBA_ASTC_8x5_Format:Cx,RGBA_ASTC_8x6_Format:Rx,RGBA_ASTC_8x8_Format:Px,RGBA_BPTC_Format:jm,RGBA_ETC2_EAC_Format:wx,RGBA_PVRTC_2BPPV1_Format:xx,RGBA_PVRTC_4BPPV1_Format:_x,RGBA_S3TC_DXT1_Format:Gm,RGBA_S3TC_DXT3_Format:Wm,RGBA_S3TC_DXT5_Format:$m,RGB_ETC1_Format:FP,RGB_ETC2_Format:Sx,RGB_PVRTC_2BPPV1_Format:yx,RGB_PVRTC_4BPPV1_Format:vx,RGB_S3TC_DXT1_Format:Vm,RGFormat:UP,RGIntegerFormat:PS,RawShaderMaterial:O3,Ray:Eu,Raycaster:Q3,RectAreaLight:j3,RedFormat:NP,RedIntegerFormat:RS,ReinhardToneMapping:CP,RepeatWrapping:pl,ReplaceStencilOp:lU,ReverseSubtractEquation:lP,RingBufferGeometry:jV,RingGeometry:th,SIGNED_RED_GREEN_RGTC2_Format:zx,SIGNED_RED_RGTC1_Format:Ux,SRGBColorSpace:vt,Scene:Ag,ShaderChunk:wt,ShaderLib:Wi,ShaderMaterial:Ts,ShadowMaterial:D3,Shape:ol,ShapeBufferGeometry:XV,ShapeGeometry:nh,ShapePath:DV,ShapeUtils:Ms,ShortType:IP,Skeleton:Yd,SkeletonHelper:xV,SkinnedMesh:WS,Source:Za,Sphere:ts,SphereBufferGeometry:YV,SphereGeometry:Cu,Spherical:qx,SphericalHarmonics3:X3,SplineCurve:ZS,SpotLight:aw,SpotLightHelper:_V,Sprite:y3,SpriteMaterial:GS,SrcAlphaFactor:ES,SrcAlphaSaturateFactor:vP,SrcColorFactor:fP,StaticCopyUsage:bU,StaticDrawUsage:Md,StaticReadUsage:EU,StereoCamera:YH,StreamCopyUsage:CU,StreamDrawUsage:wU,StreamReadUsage:TU,StringKeyframeTrack:Al,SubtractEquation:aP,SubtractiveBlending:hx,TOUCH:qs,TangentSpaceNormalMap:_a,TetrahedronBufferGeometry:qV,TetrahedronGeometry:rh,Texture:rn,TextureLoader:W3,TorusBufferGeometry:KV,TorusGeometry:ih,TorusKnotBufferGeometry:ZV,TorusKnotGeometry:sh,Triangle:Ur,TriangleFanDrawMode:oU,TriangleStripDrawMode:sU,TrianglesDrawMode:iU,TubeBufferGeometry:JV,TubeGeometry:oh,TwoPassDoubleSide:QN,UVMapping:d0,Uint16BufferAttribute:g0,Uint32BufferAttribute:FS,Uint8BufferAttribute:dF,Uint8ClampedBufferAttribute:hF,Uniform:pw,UniformsGroup:hV,UniformsLib:ke,UniformsUtils:s3,UnsignedByteType:Es,UnsignedInt248Type:ia,UnsignedIntType:to,UnsignedShort4444Type:AS,UnsignedShort5551Type:CS,UnsignedShortType:h0,VSMShadowMap:Hi,Vector2:ve,Vector3:U,Vector4:It,VectorKeyframeTrack:fu,VideoTexture:J5,WebGL1Renderer:g3,WebGL3DRenderTarget:QU,WebGLArrayRenderTarget:JU,WebGLCoordinateSystem:_s,WebGLCubeRenderTarget:a3,WebGLMultipleRenderTargets:eF,WebGLRenderTarget:Ji,WebGLRenderer:VS,WebGLUtils:h3,WebGPUCoordinateSystem:Td,WireframeGeometry:I3,WrapAroundEnding:Ed,ZeroCurvatureEnding:qa,ZeroFactor:cP,ZeroSlopeEnding:Ka,ZeroStencilOp:aU,_SRGBAFormat:Tg,sRGBEncoding:oa},Symbol.toStringTag,{value:"Module"}));var tL={exports:{}},Cl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Cl.ConcurrentRoot=1;Cl.ContinuousEventPriority=4;Cl.DefaultEventPriority=16;Cl.DiscreteEventPriority=1;Cl.IdleEventPriority=536870912;Cl.LegacyRoot=0;tL.exports=Cl;var zc=tL.exports;function e6(n){let e;const t=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},i=()=>e,s=(u,d=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!h(p,v)){const S=p;u(p=v,S)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,d,h)=>d||h?s(u,d,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const t6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Jb=t6?D.useEffect:D.useLayoutEffect;function mw(n){const e=typeof n=="function"?e6(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=D.useReducer(_=>_+1,0),o=e.getState(),a=D.useRef(o),l=D.useRef(r),u=D.useRef(i),d=D.useRef(!1),h=D.useRef();h.current===void 0&&(h.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||u.current!==i||d.current)&&(p=r(o),m=!i(h.current,p)),Jb(()=>{m&&(h.current=p),a.current=o,l.current=r,u.current=i,d.current=!1});const v=D.useRef(o);Jb(()=>{const _=()=>{try{const x=e.getState(),w=l.current(x);u.current(h.current,w)||(a.current=x,h.current=w,s())}catch{d.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const S=m?p:h.current;return D.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var nL={exports:{}},rL={exports:{}},iL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,K){var X=F.length;F.push(K);e:for(;0<X;){var oe=X-1>>>1,W=F[oe];if(0<i(W,K))F[oe]=K,F[X]=W,X=oe;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],X=F.pop();if(X!==K){F[0]=X;e:for(var oe=0,W=F.length,he=W>>>1;oe<he;){var le=2*(oe+1)-1,Te=F[le],we=le+1,Re=F[we];if(0>i(Te,X))we<W&&0>i(Re,Te)?(F[oe]=Re,F[we]=X,oe=we):(F[oe]=Te,F[le]=X,oe=le);else if(we<W&&0>i(Re,X))F[oe]=Re,F[we]=X,oe=we;else break e}}return K}function i(F,K){var X=F.sortIndex-K.sortIndex;return X!==0?X:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,m=!1,v=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=F)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function M(F){if(S=!1,w(F),!v)if(t(l)!==null)v=!0,Z(A);else{var K=t(u);K!==null&&ee(M,K.startTime-F)}}function A(F,K){v=!1,S&&(S=!1,g(L),L=-1),m=!0;var X=p;try{for(w(K),h=t(l);h!==null&&(!(h.expirationTime>K)||F&&!k());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,p=h.priorityLevel;var W=oe(h.expirationTime<=K);K=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(l)&&r(l),w(K)}else r(l);h=t(l)}if(h!==null)var he=!0;else{var le=t(u);le!==null&&ee(M,le.startTime-K),he=!1}return he}finally{h=null,p=X,m=!1}}var b=!1,I=null,L=-1,R=5,P=-1;function k(){return!(n.unstable_now()-P<R)}function V(){if(I!==null){var F=n.unstable_now();P=F;var K=!0;try{K=I(!0,F)}finally{K?H():(b=!1,I=null)}}else b=!1}var H;if(typeof x=="function")H=function(){x(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=V,H=function(){q.postMessage(null)}}else H=function(){_(V,0)};function Z(F){I=F,b||(b=!0,H())}function ee(F,K){L=_(function(){F(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Z(A))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var X=p;p=K;try{return F()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=p;p=F;try{return K()}finally{p=X}},n.unstable_scheduleCallback=function(F,K,X){var oe=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?oe+X:oe):X=oe,F){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=X+W,F={id:d++,callback:K,priorityLevel:F,startTime:X,expirationTime:W,sortIndex:-1},X>oe?(F.sortIndex=X,e(u,F),t(l)===null&&F===t(u)&&(S?(g(L),L=-1):S=!0,ee(M,X-oe))):(F.sortIndex=W,e(l,F),v||m||(v=!0,Z(A))),F},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(F){var K=p;return function(){var X=p;p=K;try{return F.apply(this,arguments)}finally{p=X}}}})(iL);rL.exports=iL;var Kx=rL.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n6=function(e){var t={},r=D,i=Kx,s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),A=Symbol.iterator;function b(c){return c===null||typeof c!="object"?null:(c=A&&c[A]||c["@@iterator"],typeof c=="function"?c:null)}function I(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case S:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case x:return f=c.displayName||null,f!==null?f:I(c.type)||"Memo";case w:f=c._payload,c=c._init;try{return I(c(f))}catch{}}return null}function L(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function R(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function P(c){if(R(c)!==c)throw Error(o(188))}function k(c){var f=c.alternate;if(!f){if(f=R(c),f===null)throw Error(o(188));return f!==c?null:c}for(var y=c,E=f;;){var T=y.return;if(T===null)break;var C=T.alternate;if(C===null){if(E=T.return,E!==null){y=E;continue}break}if(T.child===C.child){for(C=T.child;C;){if(C===y)return P(T),c;if(C===E)return P(T),f;C=C.sibling}throw Error(o(188))}if(y.return!==E.return)y=T,E=C;else{for(var B=!1,Q=T.child;Q;){if(Q===y){B=!0,y=T,E=C;break}if(Q===E){B=!0,E=T,y=C;break}Q=Q.sibling}if(!B){for(Q=C.child;Q;){if(Q===y){B=!0,y=C,E=T;break}if(Q===E){B=!0,E=C,y=T;break}Q=Q.sibling}if(!B)throw Error(o(189))}}if(y.alternate!==E)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:f}function V(c){return c=k(c),c!==null?H(c):null}function H(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=H(c);if(f!==null)return f;c=c.sibling}return null}function j(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=j(c);if(f!==null)return f}c=c.sibling}return null}var q=Array.isArray,Z=e.getPublicInstance,ee=e.getRootHostContext,F=e.getChildHostContext,K=e.prepareForCommit,X=e.resetAfterCommit,oe=e.createInstance,W=e.appendInitialChild,he=e.finalizeInitialChildren,le=e.prepareUpdate,Te=e.shouldSetTextContent,we=e.createTextInstance,Re=e.scheduleTimeout,Ze=e.cancelTimeout,Qe=e.noTimeout,xt=e.isPrimaryRenderer,Ke=e.supportsMutation,G=e.supportsPersistence,_e=e.supportsHydration,pe=e.getInstanceFromNode,be=e.preparePortalMount,ye=e.getCurrentEventPriority,$e=e.detachDeletedInstance,Ue=e.supportsMicrotasks,ze=e.scheduleMicrotask,Je=e.supportsTestSelectors,yt=e.findFiberRoot,Bt=e.getBoundingRect,N=e.getTextContent,O=e.isHiddenSubtree,ae=e.matchAccessibilityRole,xe=e.setFocusIfFocusable,Se=e.setupIntersectionObserver,Le=e.appendChild,Ve=e.appendChildToContainer,Ie=e.commitTextUpdate,fe=e.commitMount,Y=e.commitUpdate,ue=e.insertBefore,Ee=e.insertInContainerBefore,Me=e.removeChild,De=e.removeChildFromContainer,nt=e.resetTextContent,Rt=e.hideInstance,J=e.hideTextInstance,Pe=e.unhideInstance,se=e.unhideTextInstance,Oe=e.clearContainer,Be=e.cloneInstance,Pt=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,pn=e.finalizeContainerChildren,is=e.replaceContainerChildren,qt=e.cloneHiddenInstance,$r=e.cloneHiddenTextInstance,Zn=e.canHydrateInstance,yh=e.canHydrateTextInstance,_h=e.canHydrateSuspenseInstance,xh=e.isSuspenseInstancePending,wo=e.isSuspenseInstanceFallback,Sh=e.registerSuspenseInstanceRetry,ss=e.getNextHydratableSibling,wh=e.getFirstHydratableChild,k0=e.getFirstHydratableChildWithinContainer,N0=e.getFirstHydratableChildWithinSuspenseInstance,U0=e.hydrateInstance,z=e.hydrateTextInstance,ie=e.hydrateSuspenseInstance,me=e.getNextHydratableInstanceAfterSuspenseInstance,ne=e.commitHydratedContainer,ge=e.commitHydratedSuspenseInstance,je=e.clearSuspenseBoundary,rt=e.clearSuspenseBoundaryFromContainer,at=e.shouldDeleteUnhydratedTailInstances,lt=e.didNotMatchHydratedContainerTextInstance,Mt=e.didNotMatchHydratedTextInstance,ct;function ut(c){if(ct===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);ct=f&&f[1]||""}return`
`+ct+c}var Ut=!1;function Kt(c,f){if(!c||Ut)return"";Ut=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ce){var E=Ce}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ce){E=Ce}c.call(f.prototype)}else{try{throw Error()}catch(Ce){E=Ce}c()}}catch(Ce){if(Ce&&E&&typeof Ce.stack=="string"){for(var T=Ce.stack.split(`
`),C=E.stack.split(`
`),B=T.length-1,Q=C.length-1;1<=B&&0<=Q&&T[B]!==C[Q];)Q--;for(;1<=B&&0<=Q;B--,Q--)if(T[B]!==C[Q]){if(B!==1||Q!==1)do if(B--,Q--,0>Q||T[B]!==C[Q]){var de=`
`+T[B].replace(" at new "," at ");return c.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",c.displayName)),de}while(1<=B&&0<=Q);break}}}finally{Ut=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?ut(c):""}var jr=Object.prototype.hasOwnProperty,Xr=[],Gt=-1;function ht(c){return{current:c}}function Ft(c){0>Gt||(c.current=Xr[Gt],Xr[Gt]=null,Gt--)}function ft(c,f){Gt++,Xr[Gt]=c.current,c.current=f}var rr={},Nn=ht(rr),Pn=ht(!1),Li=rr;function mn(c,f){var y=c.type.contextTypes;if(!y)return rr;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var T={},C;for(C in y)T[C]=f[C];return E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=T),T}function gn(c){return c=c.childContextTypes,c!=null}function Eo(){Ft(Pn),Ft(Nn)}function ir(c,f,y){if(Nn.current!==rr)throw Error(o(168));ft(Nn,f),ft(Pn,y)}function Ll(c,f,y){var E=c.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return y;E=E.getChildContext();for(var T in E)if(!(T in f))throw Error(o(108,L(c)||"Unknown",T));return s({},y,E)}function Il(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||rr,Li=Nn.current,ft(Nn,c),ft(Pn,Pn.current),!0}function Nu(c,f,y){var E=c.stateNode;if(!E)throw Error(o(169));y?(c=Ll(c,f,Li),E.__reactInternalMemoizedMergedChildContext=c,Ft(Pn),Ft(Nn),ft(Nn,c)):Ft(Pn),ft(Pn,y)}var Ii=Math.clz32?Math.clz32:UD,kD=Math.log,ND=Math.LN2;function UD(c){return c>>>=0,c===0?32:31-(kD(c)/ND|0)|0}var Eh=64,Mh=4194304;function Uu(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Th(c,f){var y=c.pendingLanes;if(y===0)return 0;var E=0,T=c.suspendedLanes,C=c.pingedLanes,B=y&268435455;if(B!==0){var Q=B&~T;Q!==0?E=Uu(Q):(C&=B,C!==0&&(E=Uu(C)))}else B=y&~T,B!==0?E=Uu(B):C!==0&&(E=Uu(C));if(E===0)return 0;if(f!==0&&f!==E&&!(f&T)&&(T=E&-E,C=f&-f,T>=C||T===16&&(C&4194240)!==0))return f;if(E&4&&(E|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=E;0<f;)y=31-Ii(f),T=1<<y,E|=c[y],f&=~T;return E}function FD(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zD(c,f){for(var y=c.suspendedLanes,E=c.pingedLanes,T=c.expirationTimes,C=c.pendingLanes;0<C;){var B=31-Ii(C),Q=1<<B,de=T[B];de===-1?(!(Q&y)||Q&E)&&(T[B]=FD(Q,f)):de<=f&&(c.expiredLanes|=Q),C&=~Q}}function F0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function z0(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function Fu(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Ii(f),c[f]=y}function BD(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var E=c.eventTimes;for(c=c.expirationTimes;0<y;){var T=31-Ii(y),C=1<<T;f[T]=0,E[T]=-1,c[T]=-1,y&=~C}}function B0(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var E=31-Ii(y),T=1<<E;T&f|c[E]&f&&(c[E]|=f),y&=~T}}var Ot=0;function Bw(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var H0=i.unstable_scheduleCallback,Hw=i.unstable_cancelCallback,HD=i.unstable_shouldYield,VD=i.unstable_requestPaint,Vn=i.unstable_now,V0=i.unstable_ImmediatePriority,GD=i.unstable_UserBlockingPriority,G0=i.unstable_NormalPriority,WD=i.unstable_IdlePriority,bh=null,os=null;function $D(c){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(bh,c,void 0,(c.current.flags&128)===128)}catch{}}function jD(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var as=typeof Object.is=="function"?Object.is:jD,Is=null,Ah=!1,W0=!1;function Vw(c){Is===null?Is=[c]:Is.push(c)}function XD(c){Ah=!0,Vw(c)}function ls(){if(!W0&&Is!==null){W0=!0;var c=0,f=Ot;try{var y=Is;for(Ot=1;c<y.length;c++){var E=y[c];do E=E(!0);while(E!==null)}Is=null,Ah=!1}catch(T){throw Is!==null&&(Is=Is.slice(c+1)),H0(V0,ls),T}finally{Ot=f,W0=!1}}return null}var YD=a.ReactCurrentBatchConfig;function Ch(c,f){if(as(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),E=Object.keys(f);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var T=y[E];if(!jr.call(f,T)||!as(c[T],f[T]))return!1}return!0}function qD(c){switch(c.tag){case 5:return ut(c.type);case 16:return ut("Lazy");case 13:return ut("Suspense");case 19:return ut("SuspenseList");case 0:case 2:case 15:return c=Kt(c.type,!1),c;case 11:return c=Kt(c.type.render,!1),c;case 1:return c=Kt(c.type,!0),c;default:return""}}function Di(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}var Rh=ht(null),Ph=null,Dl=null,$0=null;function j0(){$0=Dl=Ph=null}function Gw(c,f,y){xt?(ft(Rh,f._currentValue),f._currentValue=y):(ft(Rh,f._currentValue2),f._currentValue2=y)}function X0(c){var f=Rh.current;Ft(Rh),xt?c._currentValue=f:c._currentValue2=f}function Y0(c,f,y){for(;c!==null;){var E=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),c===y)break;c=c.return}}function Ol(c,f){Ph=c,$0=Dl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Kr=!0),c.firstContext=null)}function ci(c){var f=xt?c._currentValue:c._currentValue2;if($0!==c)if(c={context:c,memoizedValue:f,next:null},Dl===null){if(Ph===null)throw Error(o(308));Dl=c,Ph.dependencies={lanes:0,firstContext:c}}else Dl=Dl.next=c;return f}var cs=null,Mo=!1;function q0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ww(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ds(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function To(c,f){var y=c.updateQueue;y!==null&&(y=y.shared,Ln!==null&&c.mode&1&&!(Tt&2)?(c=y.interleaved,c===null?(f.next=f,cs===null?cs=[y]:cs.push(y)):(f.next=c.next,c.next=f),y.interleaved=f):(c=y.pending,c===null?f.next=f:(f.next=c.next,c.next=f),y.pending=f))}function Lh(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var E=f.lanes;E&=c.pendingLanes,y|=E,f.lanes=y,B0(c,y)}}function $w(c,f){var y=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var T=null,C=null;if(y=y.firstBaseUpdate,y!==null){do{var B={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};C===null?T=C=B:C=C.next=B,y=y.next}while(y!==null);C===null?T=C=f:C=C.next=f}else T=C=f;y={baseState:E.baseState,firstBaseUpdate:T,lastBaseUpdate:C,shared:E.shared,effects:E.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function Ih(c,f,y,E){var T=c.updateQueue;Mo=!1;var C=T.firstBaseUpdate,B=T.lastBaseUpdate,Q=T.shared.pending;if(Q!==null){T.shared.pending=null;var de=Q,Ce=de.next;de.next=null,B===null?C=Ce:B.next=Ce,B=de;var Xe=c.alternate;Xe!==null&&(Xe=Xe.updateQueue,Q=Xe.lastBaseUpdate,Q!==B&&(Q===null?Xe.firstBaseUpdate=Ce:Q.next=Ce,Xe.lastBaseUpdate=de))}if(C!==null){var pt=T.baseState;B=0,Xe=Ce=de=null,Q=C;do{var it=Q.lane,Wt=Q.eventTime;if((E&it)===it){Xe!==null&&(Xe=Xe.next={eventTime:Wt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var tt=c,lr=Q;switch(it=f,Wt=y,lr.tag){case 1:if(tt=lr.payload,typeof tt=="function"){pt=tt.call(Wt,pt,it);break e}pt=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=lr.payload,it=typeof tt=="function"?tt.call(Wt,pt,it):tt,it==null)break e;pt=s({},pt,it);break e;case 2:Mo=!0}}Q.callback!==null&&Q.lane!==0&&(c.flags|=64,it=T.effects,it===null?T.effects=[Q]:it.push(Q))}else Wt={eventTime:Wt,lane:it,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Xe===null?(Ce=Xe=Wt,de=pt):Xe=Xe.next=Wt,B|=it;if(Q=Q.next,Q===null){if(Q=T.shared.pending,Q===null)break;it=Q,Q=it.next,it.next=null,T.lastBaseUpdate=it,T.shared.pending=null}}while(1);if(Xe===null&&(de=pt),T.baseState=de,T.firstBaseUpdate=Ce,T.lastBaseUpdate=Xe,f=T.shared.interleaved,f!==null){T=f;do B|=T.lane,T=T.next;while(T!==f)}else C===null&&(T.shared.lanes=0);Gl|=B,c.lanes=B,c.memoizedState=pt}}function jw(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var E=c[f],T=E.callback;if(T!==null){if(E.callback=null,E=y,typeof T!="function")throw Error(o(191,T));T.call(E)}}}var Xw=new r.Component().refs;function K0(c,f,y,E){f=c.memoizedState,y=y(E,f),y=y==null?f:s({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Dh={isMounted:function(c){return(c=c._reactInternals)?R(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var E=_r(),T=Co(c),C=Ds(E,T);C.payload=f,y!=null&&(C.callback=y),To(c,C),f=pi(c,T,E),f!==null&&Lh(f,c,T)},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var E=_r(),T=Co(c),C=Ds(E,T);C.tag=1,C.payload=f,y!=null&&(C.callback=y),To(c,C),f=pi(c,T,E),f!==null&&Lh(f,c,T)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=_r(),E=Co(c),T=Ds(y,E);T.tag=2,f!=null&&(T.callback=f),To(c,T),f=pi(c,E,y),f!==null&&Lh(f,c,E)}};function Yw(c,f,y,E,T,C,B){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,C,B):f.prototype&&f.prototype.isPureReactComponent?!Ch(y,E)||!Ch(T,C):!0}function qw(c,f,y){var E=!1,T=rr,C=f.contextType;return typeof C=="object"&&C!==null?C=ci(C):(T=gn(f)?Li:Nn.current,E=f.contextTypes,C=(E=E!=null)?mn(c,T):rr),f=new f(y,C),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Dh,c.stateNode=f,f._reactInternals=c,E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=C),f}function Kw(c,f,y,E){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,E),f.state!==c&&Dh.enqueueReplaceState(f,f.state,null)}function Z0(c,f,y,E){var T=c.stateNode;T.props=y,T.state=c.memoizedState,T.refs=Xw,q0(c);var C=f.contextType;typeof C=="object"&&C!==null?T.context=ci(C):(C=gn(f)?Li:Nn.current,T.context=mn(c,C)),T.state=c.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(K0(c,f,C,y),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(f=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),f!==T.state&&Dh.enqueueReplaceState(T,T.state,null),Ih(c,y,T,E),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}var kl=[],Nl=0,Oh=null,kh=0,ui=[],fi=0,wa=null,Os=1,ks="";function Ea(c,f){kl[Nl++]=kh,kl[Nl++]=Oh,Oh=c,kh=f}function Zw(c,f,y){ui[fi++]=Os,ui[fi++]=ks,ui[fi++]=wa,wa=c;var E=Os;c=ks;var T=32-Ii(E)-1;E&=~(1<<T),y+=1;var C=32-Ii(f)+T;if(30<C){var B=T-T%5;C=(E&(1<<B)-1).toString(32),E>>=B,T-=B,Os=1<<32-Ii(f)+T|y<<T|E,ks=C+c}else Os=1<<C|y<<T|E,ks=c}function J0(c){c.return!==null&&(Ea(c,1),Zw(c,1,0))}function Q0(c){for(;c===Oh;)Oh=kl[--Nl],kl[Nl]=null,kh=kl[--Nl],kl[Nl]=null;for(;c===wa;)wa=ui[--fi],ui[fi]=null,ks=ui[--fi],ui[fi]=null,Os=ui[--fi],ui[fi]=null}var Yr=null,qr=null,tn=!1,zu=!1,Oi=null;function Jw(c,f){var y=mi(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function Qw(c,f){switch(c.tag){case 5:return f=Zn(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,Yr=c,qr=wh(f),!0):!1;case 6:return f=yh(f,c.pendingProps),f!==null?(c.stateNode=f,Yr=c,qr=null,!0):!1;case 13:if(f=_h(f),f!==null){var y=wa!==null?{id:Os,overflow:ks}:null;return c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=mi(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,Yr=c,qr=null,!0}return!1;default:return!1}}function ev(c){return(c.mode&1)!==0&&(c.flags&128)===0}function tv(c){if(tn){var f=qr;if(f){var y=f;if(!Qw(c,f)){if(ev(c))throw Error(o(418));f=ss(y);var E=Yr;f&&Qw(c,f)?Jw(E,y):(c.flags=c.flags&-4097|2,tn=!1,Yr=c)}}else{if(ev(c))throw Error(o(418));c.flags=c.flags&-4097|2,tn=!1,Yr=c}}}function eE(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Yr=c}function Bu(c){if(!_e||c!==Yr)return!1;if(!tn)return eE(c),tn=!0,!1;if(c.tag!==3&&(c.tag!==5||at(c.type)&&!Te(c.type,c.memoizedProps))){var f=qr;if(f){if(ev(c)){for(c=qr;c;)c=ss(c);throw Error(o(418))}for(;f;)Jw(c,f),f=ss(f)}}if(eE(c),c.tag===13){if(!_e)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));qr=me(c)}else qr=Yr?ss(c.stateNode):null;return!0}function Ul(){_e&&(qr=Yr=null,zu=tn=!1)}function nv(c){Oi===null?Oi=[c]:Oi.push(c)}function Hu(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var E=y.stateNode}if(!E)throw Error(o(147,c));var T=E,C=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===C?f.ref:(f=function(B){var Q=T.refs;Q===Xw&&(Q=T.refs={}),B===null?delete Q[C]:Q[C]=B},f._stringRef=C,f)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function Nh(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function tE(c){var f=c._init;return f(c._payload)}function nE(c){function f(re,te){if(c){var ce=re.deletions;ce===null?(re.deletions=[te],re.flags|=16):ce.push(te)}}function y(re,te){if(!c)return null;for(;te!==null;)f(re,te),te=te.sibling;return null}function E(re,te){for(re=new Map;te!==null;)te.key!==null?re.set(te.key,te):re.set(te.index,te),te=te.sibling;return re}function T(re,te){return re=Po(re,te),re.index=0,re.sibling=null,re}function C(re,te,ce){return re.index=ce,c?(ce=re.alternate,ce!==null?(ce=ce.index,ce<te?(re.flags|=2,te):ce):(re.flags|=2,te)):(re.flags|=1048576,te)}function B(re){return c&&re.alternate===null&&(re.flags|=2),re}function Q(re,te,ce,He){return te===null||te.tag!==6?(te=zv(ce,re.mode,He),te.return=re,te):(te=T(te,ce),te.return=re,te)}function de(re,te,ce,He){var et=ce.type;return et===d?Xe(re,te,ce.props.children,He,ce.key):te!==null&&(te.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===w&&tE(et)===te.type)?(He=T(te,ce.props),He.ref=Hu(re,te,ce),He.return=re,He):(He=hp(ce.type,ce.key,ce.props,null,re.mode,He),He.ref=Hu(re,te,ce),He.return=re,He)}function Ce(re,te,ce,He){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=Bv(ce,re.mode,He),te.return=re,te):(te=T(te,ce.children||[]),te.return=re,te)}function Xe(re,te,ce,He,et){return te===null||te.tag!==7?(te=Pa(ce,re.mode,He,et),te.return=re,te):(te=T(te,ce),te.return=re,te)}function pt(re,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number")return te=zv(""+te,re.mode,ce),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return ce=hp(te.type,te.key,te.props,null,re.mode,ce),ce.ref=Hu(re,null,te),ce.return=re,ce;case u:return te=Bv(te,re.mode,ce),te.return=re,te;case w:var He=te._init;return pt(re,He(te._payload),ce)}if(q(te)||b(te))return te=Pa(te,re.mode,ce,null),te.return=re,te;Nh(re,te)}return null}function it(re,te,ce,He){var et=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return et!==null?null:Q(re,te,""+ce,He);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===et?de(re,te,ce,He):null;case u:return ce.key===et?Ce(re,te,ce,He):null;case w:return et=ce._init,it(re,te,et(ce._payload),He)}if(q(ce)||b(ce))return et!==null?null:Xe(re,te,ce,He,null);Nh(re,ce)}return null}function Wt(re,te,ce,He,et){if(typeof He=="string"&&He!==""||typeof He=="number")return re=re.get(ce)||null,Q(te,re,""+He,et);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return re=re.get(He.key===null?ce:He.key)||null,de(te,re,He,et);case u:return re=re.get(He.key===null?ce:He.key)||null,Ce(te,re,He,et);case w:var St=He._init;return Wt(re,te,ce,St(He._payload),et)}if(q(He)||b(He))return re=re.get(ce)||null,Xe(te,re,He,et,null);Nh(te,He)}return null}function tt(re,te,ce,He){for(var et=null,St=null,mt=te,kt=te=0,Wn=null;mt!==null&&kt<ce.length;kt++){mt.index>kt?(Wn=mt,mt=null):Wn=mt.sibling;var Nt=it(re,mt,ce[kt],He);if(Nt===null){mt===null&&(mt=Wn);break}c&&mt&&Nt.alternate===null&&f(re,mt),te=C(Nt,te,kt),St===null?et=Nt:St.sibling=Nt,St=Nt,mt=Wn}if(kt===ce.length)return y(re,mt),tn&&Ea(re,kt),et;if(mt===null){for(;kt<ce.length;kt++)mt=pt(re,ce[kt],He),mt!==null&&(te=C(mt,te,kt),St===null?et=mt:St.sibling=mt,St=mt);return tn&&Ea(re,kt),et}for(mt=E(re,mt);kt<ce.length;kt++)Wn=Wt(mt,re,kt,ce[kt],He),Wn!==null&&(c&&Wn.alternate!==null&&mt.delete(Wn.key===null?kt:Wn.key),te=C(Wn,te,kt),St===null?et=Wn:St.sibling=Wn,St=Wn);return c&&mt.forEach(function(Lo){return f(re,Lo)}),tn&&Ea(re,kt),et}function lr(re,te,ce,He){var et=b(ce);if(typeof et!="function")throw Error(o(150));if(ce=et.call(ce),ce==null)throw Error(o(151));for(var St=et=null,mt=te,kt=te=0,Wn=null,Nt=ce.next();mt!==null&&!Nt.done;kt++,Nt=ce.next()){mt.index>kt?(Wn=mt,mt=null):Wn=mt.sibling;var Lo=it(re,mt,Nt.value,He);if(Lo===null){mt===null&&(mt=Wn);break}c&&mt&&Lo.alternate===null&&f(re,mt),te=C(Lo,te,kt),St===null?et=Lo:St.sibling=Lo,St=Lo,mt=Wn}if(Nt.done)return y(re,mt),tn&&Ea(re,kt),et;if(mt===null){for(;!Nt.done;kt++,Nt=ce.next())Nt=pt(re,Nt.value,He),Nt!==null&&(te=C(Nt,te,kt),St===null?et=Nt:St.sibling=Nt,St=Nt);return tn&&Ea(re,kt),et}for(mt=E(re,mt);!Nt.done;kt++,Nt=ce.next())Nt=Wt(mt,re,kt,Nt.value,He),Nt!==null&&(c&&Nt.alternate!==null&&mt.delete(Nt.key===null?kt:Nt.key),te=C(Nt,te,kt),St===null?et=Nt:St.sibling=Nt,St=Nt);return c&&mt.forEach(function(TO){return f(re,TO)}),tn&&Ea(re,kt),et}function gi(re,te,ce,He){if(typeof ce=="object"&&ce!==null&&ce.type===d&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var et=ce.key,St=te;St!==null;){if(St.key===et){if(et=ce.type,et===d){if(St.tag===7){y(re,St.sibling),te=T(St,ce.props.children),te.return=re,re=te;break e}}else if(St.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===w&&tE(et)===St.type){y(re,St.sibling),te=T(St,ce.props),te.ref=Hu(re,St,ce),te.return=re,re=te;break e}y(re,St);break}else f(re,St);St=St.sibling}ce.type===d?(te=Pa(ce.props.children,re.mode,He,ce.key),te.return=re,re=te):(He=hp(ce.type,ce.key,ce.props,null,re.mode,He),He.ref=Hu(re,te,ce),He.return=re,re=He)}return B(re);case u:e:{for(St=ce.key;te!==null;){if(te.key===St)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){y(re,te.sibling),te=T(te,ce.children||[]),te.return=re,re=te;break e}else{y(re,te);break}else f(re,te);te=te.sibling}te=Bv(ce,re.mode,He),te.return=re,re=te}return B(re);case w:return St=ce._init,gi(re,te,St(ce._payload),He)}if(q(ce))return tt(re,te,ce,He);if(b(ce))return lr(re,te,ce,He);Nh(re,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,te!==null&&te.tag===6?(y(re,te.sibling),te=T(te,ce),te.return=re,re=te):(y(re,te),te=zv(ce,re.mode,He),te.return=re,re=te),B(re)):y(re,te)}return gi}var Fl=nE(!0),rE=nE(!1),Vu={},di=ht(Vu),Gu=ht(Vu),zl=ht(Vu);function us(c){if(c===Vu)throw Error(o(174));return c}function rv(c,f){ft(zl,f),ft(Gu,c),ft(di,Vu),c=ee(f),Ft(di),ft(di,c)}function Bl(){Ft(di),Ft(Gu),Ft(zl)}function iE(c){var f=us(zl.current),y=us(di.current);f=F(y,c.type,f),y!==f&&(ft(Gu,c),ft(di,f))}function iv(c){Gu.current===c&&(Ft(di),Ft(Gu))}var sn=ht(0);function Uh(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||xh(y)||wo(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var sv=[];function ov(){for(var c=0;c<sv.length;c++){var f=sv[c];xt?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}sv.length=0}var Fh=a.ReactCurrentDispatcher,hi=a.ReactCurrentBatchConfig,Hl=0,vn=null,sr=null,Gn=null,zh=!1,Wu=!1,$u=0,KD=0;function or(){throw Error(o(321))}function av(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!as(c[y],f[y]))return!1;return!0}function lv(c,f,y,E,T,C){if(Hl=C,vn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Fh.current=c===null||c.memoizedState===null?eO:tO,c=y(E,T),Wu){C=0;do{if(Wu=!1,$u=0,25<=C)throw Error(o(301));C+=1,Gn=sr=null,f.updateQueue=null,Fh.current=nO,c=y(E,T)}while(Wu)}if(Fh.current=Wh,f=sr!==null&&sr.next!==null,Hl=0,Gn=sr=vn=null,zh=!1,f)throw Error(o(300));return c}function cv(){var c=$u!==0;return $u=0,c}function Ns(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?vn.memoizedState=Gn=c:Gn=Gn.next=c,Gn}function fs(){if(sr===null){var c=vn.alternate;c=c!==null?c.memoizedState:null}else c=sr.next;var f=Gn===null?vn.memoizedState:Gn.next;if(f!==null)Gn=f,sr=c;else{if(c===null)throw Error(o(310));sr=c,c={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},Gn===null?vn.memoizedState=Gn=c:Gn=Gn.next=c}return Gn}function Ma(c,f){return typeof f=="function"?f(c):f}function Bh(c){var f=fs(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var E=sr,T=E.baseQueue,C=y.pending;if(C!==null){if(T!==null){var B=T.next;T.next=C.next,C.next=B}E.baseQueue=T=C,y.pending=null}if(T!==null){C=T.next,E=E.baseState;var Q=B=null,de=null,Ce=C;do{var Xe=Ce.lane;if((Hl&Xe)===Xe)de!==null&&(de=de.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),E=Ce.hasEagerState?Ce.eagerState:c(E,Ce.action);else{var pt={lane:Xe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};de===null?(Q=de=pt,B=E):de=de.next=pt,vn.lanes|=Xe,Gl|=Xe}Ce=Ce.next}while(Ce!==null&&Ce!==C);de===null?B=E:de.next=Q,as(E,f.memoizedState)||(Kr=!0),f.memoizedState=E,f.baseState=B,f.baseQueue=de,y.lastRenderedState=E}if(c=y.interleaved,c!==null){T=c;do C=T.lane,vn.lanes|=C,Gl|=C,T=T.next;while(T!==c)}else T===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function Hh(c){var f=fs(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var E=y.dispatch,T=y.pending,C=f.memoizedState;if(T!==null){y.pending=null;var B=T=T.next;do C=c(C,B.action),B=B.next;while(B!==T);as(C,f.memoizedState)||(Kr=!0),f.memoizedState=C,f.baseQueue===null&&(f.baseState=C),y.lastRenderedState=C}return[C,E]}function sE(){}function oE(c,f){var y=vn,E=fs(),T=f(),C=!as(E.memoizedState,T);if(C&&(E.memoizedState=T,Kr=!0),E=E.queue,Xu(cE.bind(null,y,E,c),[c]),E.getSnapshot!==f||C||Gn!==null&&Gn.memoizedState.tag&1){if(y.flags|=2048,ju(9,lE.bind(null,y,E,T,f),void 0,null),Ln===null)throw Error(o(349));Hl&30||aE(y,f,T)}return T}function aE(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=vn.updateQueue,f===null?(f={lastEffect:null,stores:null},vn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function lE(c,f,y,E){f.value=y,f.getSnapshot=E,uE(f)&&pi(c,1,-1)}function cE(c,f,y){return y(function(){uE(f)&&pi(c,1,-1)})}function uE(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!as(c,y)}catch{return!0}}function uv(c){var f=Ns();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:c},f.queue=c,c=c.dispatch=QD.bind(null,vn,c),[f.memoizedState,c]}function ju(c,f,y,E){return c={tag:c,create:f,destroy:y,deps:E,next:null},f=vn.updateQueue,f===null?(f={lastEffect:null,stores:null},vn.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(E=y.next,y.next=c,c.next=E,f.lastEffect=c)),c}function fE(){return fs().memoizedState}function Vh(c,f,y,E){var T=Ns();vn.flags|=c,T.memoizedState=ju(1|f,y,void 0,E===void 0?null:E)}function Gh(c,f,y,E){var T=fs();E=E===void 0?null:E;var C=void 0;if(sr!==null){var B=sr.memoizedState;if(C=B.destroy,E!==null&&av(E,B.deps)){T.memoizedState=ju(f,y,C,E);return}}vn.flags|=c,T.memoizedState=ju(1|f,y,C,E)}function fv(c,f){return Vh(8390656,8,c,f)}function Xu(c,f){return Gh(2048,8,c,f)}function dE(c,f){return Gh(4,2,c,f)}function hE(c,f){return Gh(4,4,c,f)}function pE(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function mE(c,f,y){return y=y!=null?y.concat([c]):null,Gh(4,4,pE.bind(null,f,c),y)}function dv(){}function gE(c,f){var y=fs();f=f===void 0?null:f;var E=y.memoizedState;return E!==null&&f!==null&&av(f,E[1])?E[0]:(y.memoizedState=[c,f],c)}function vE(c,f){var y=fs();f=f===void 0?null:f;var E=y.memoizedState;return E!==null&&f!==null&&av(f,E[1])?E[0]:(c=c(),y.memoizedState=[c,f],c)}function ZD(c,f){var y=Ot;Ot=y!==0&&4>y?y:4,c(!0);var E=hi.transition;hi.transition={};try{c(!1),f()}finally{Ot=y,hi.transition=E}}function yE(){return fs().memoizedState}function JD(c,f,y){var E=Co(c);y={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null},_E(c)?xE(f,y):(SE(c,f,y),y=_r(),c=pi(c,E,y),c!==null&&wE(c,f,E))}function QD(c,f,y){var E=Co(c),T={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null};if(_E(c))xE(f,T);else{SE(c,f,T);var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=f.lastRenderedReducer,C!==null))try{var B=f.lastRenderedState,Q=C(B,y);if(T.hasEagerState=!0,T.eagerState=Q,as(Q,B))return}catch{}finally{}y=_r(),c=pi(c,E,y),c!==null&&wE(c,f,E)}}function _E(c){var f=c.alternate;return c===vn||f!==null&&f===vn}function xE(c,f){Wu=zh=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function SE(c,f,y){Ln!==null&&c.mode&1&&!(Tt&2)?(c=f.interleaved,c===null?(y.next=y,cs===null?cs=[f]:cs.push(f)):(y.next=c.next,c.next=y),f.interleaved=y):(c=f.pending,c===null?y.next=y:(y.next=c.next,c.next=y),f.pending=y)}function wE(c,f,y){if(y&4194240){var E=f.lanes;E&=c.pendingLanes,y|=E,f.lanes=y,B0(c,y)}}var Wh={readContext:ci,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},eO={readContext:ci,useCallback:function(c,f){return Ns().memoizedState=[c,f===void 0?null:f],c},useContext:ci,useEffect:fv,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,Vh(4194308,4,pE.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Vh(4194308,4,c,f)},useInsertionEffect:function(c,f){return Vh(4,2,c,f)},useMemo:function(c,f){var y=Ns();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var E=Ns();return f=y!==void 0?y(f):f,E.memoizedState=E.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},E.queue=c,c=c.dispatch=JD.bind(null,vn,c),[E.memoizedState,c]},useRef:function(c){var f=Ns();return c={current:c},f.memoizedState=c},useState:uv,useDebugValue:dv,useDeferredValue:function(c){var f=uv(c),y=f[0],E=f[1];return fv(function(){var T=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=T}},[c]),y},useTransition:function(){var c=uv(!1),f=c[0];return c=ZD.bind(null,c[1]),Ns().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var E=vn,T=Ns();if(tn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=f(),Ln===null)throw Error(o(349));Hl&30||aE(E,f,y)}T.memoizedState=y;var C={value:y,getSnapshot:f};return T.queue=C,fv(cE.bind(null,E,C,c),[c]),E.flags|=2048,ju(9,lE.bind(null,E,C,y,f),void 0,null),y},useId:function(){var c=Ns(),f=Ln.identifierPrefix;if(tn){var y=ks,E=Os;y=(E&~(1<<32-Ii(E)-1)).toString(32)+y,f=":"+f+"R"+y,y=$u++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=KD++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},tO={readContext:ci,useCallback:gE,useContext:ci,useEffect:Xu,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:vE,useReducer:Bh,useRef:fE,useState:function(){return Bh(Ma)},useDebugValue:dv,useDeferredValue:function(c){var f=Bh(Ma),y=f[0],E=f[1];return Xu(function(){var T=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=T}},[c]),y},useTransition:function(){var c=Bh(Ma)[0],f=fs().memoizedState;return[c,f]},useMutableSource:sE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1},nO={readContext:ci,useCallback:gE,useContext:ci,useEffect:Xu,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:vE,useReducer:Hh,useRef:fE,useState:function(){return Hh(Ma)},useDebugValue:dv,useDeferredValue:function(c){var f=Hh(Ma),y=f[0],E=f[1];return Xu(function(){var T=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=T}},[c]),y},useTransition:function(){var c=Hh(Ma)[0],f=fs().memoizedState;return[c,f]},useMutableSource:sE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1};function hv(c,f){try{var y="",E=f;do y+=qD(E),E=E.return;while(E);var T=y}catch(C){T=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:f,stack:T}}function pv(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var rO=typeof WeakMap=="function"?WeakMap:Map;function EE(c,f,y){y=Ds(-1,y),y.tag=3,y.payload={element:null};var E=f.value;return y.callback=function(){op||(op=!0,Iv=E),pv(c,f)},y}function ME(c,f,y){y=Ds(-1,y),y.tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var T=f.value;y.payload=function(){return E(T)},y.callback=function(){pv(c,f)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(y.callback=function(){pv(c,f),typeof E!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})}),y}function TE(c,f,y){var E=c.pingCache;if(E===null){E=c.pingCache=new rO;var T=new Set;E.set(f,T)}else T=E.get(f),T===void 0&&(T=new Set,E.set(f,T));T.has(y)||(T.add(y),c=vO.bind(null,c,f,y),f.then(c,c))}function bE(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function AE(c,f,y,E,T){return c.mode&1?(c.flags|=65536,c.lanes=T,c):(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Ds(-1,1),f.tag=2,To(y,f))),y.lanes|=1),c)}function ds(c){c.flags|=4}function CE(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Yu,qu,$h,jh;if(Ke)Yu=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)W(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},qu=function(){},$h=function(c,f,y,E,T){if(c=c.memoizedProps,c!==E){var C=f.stateNode,B=us(di.current);y=le(C,y,c,E,T,B),(f.updateQueue=y)&&ds(f)}},jh=function(c,f,y,E){y!==E&&ds(f)};else if(G){Yu=function(c,f,y,E){for(var T=f.child;T!==null;){if(T.tag===5){var C=T.stateNode;y&&E&&(C=qt(C,T.type,T.memoizedProps,T)),W(c,C)}else if(T.tag===6)C=T.stateNode,y&&E&&(C=$r(C,T.memoizedProps,T)),W(c,C);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)C=T.child,C!==null&&(C.return=T),Yu(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var RE=function(c,f,y,E){for(var T=f.child;T!==null;){if(T.tag===5){var C=T.stateNode;y&&E&&(C=qt(C,T.type,T.memoizedProps,T)),Yt(c,C)}else if(T.tag===6)C=T.stateNode,y&&E&&(C=$r(C,T.memoizedProps,T)),Yt(c,C);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)C=T.child,C!==null&&(C.return=T),RE(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};qu=function(c,f){var y=f.stateNode;if(!CE(c,f)){c=y.containerInfo;var E=Pt(c);RE(E,f,!1,!1),y.pendingChildren=E,ds(f),pn(c,E)}},$h=function(c,f,y,E,T){var C=c.stateNode,B=c.memoizedProps;if((c=CE(c,f))&&B===E)f.stateNode=C;else{var Q=f.stateNode,de=us(di.current),Ce=null;B!==E&&(Ce=le(Q,y,B,E,T,de)),c&&Ce===null?f.stateNode=C:(C=Be(C,Ce,y,B,E,f,c,Q),he(C,y,E,T,de)&&ds(f),f.stateNode=C,c?ds(f):Yu(C,f,!1,!1))}},jh=function(c,f,y,E){y!==E?(c=us(zl.current),y=us(di.current),f.stateNode=we(E,c,y,f),ds(f)):f.stateNode=c.stateNode}}else qu=function(){},$h=function(){},jh=function(){};function Ku(c,f){if(!tn)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function ar(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,E=0;if(f)for(var T=c.child;T!==null;)y|=T.lanes|T.childLanes,E|=T.subtreeFlags&14680064,E|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)y|=T.lanes|T.childLanes,E|=T.subtreeFlags,E|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=E,c.childLanes=y,f}function iO(c,f,y){var E=f.pendingProps;switch(Q0(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(f),null;case 1:return gn(f.type)&&Eo(),ar(f),null;case 3:return E=f.stateNode,Bl(),Ft(Pn),Ft(Nn),ov(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(c===null||c.child===null)&&(Bu(f)?ds(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Oi!==null&&(kv(Oi),Oi=null))),qu(c,f),ar(f),null;case 5:iv(f),y=us(zl.current);var T=f.type;if(c!==null&&f.stateNode!=null)$h(c,f,T,E,y),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return ar(f),null}if(c=us(di.current),Bu(f)){if(!_e)throw Error(o(175));c=U0(f.stateNode,f.type,f.memoizedProps,y,c,f,!zu),f.updateQueue=c,c!==null&&ds(f)}else{var C=oe(T,E,y,c,f);Yu(C,f,!1,!1),f.stateNode=C,he(C,T,E,y,c)&&ds(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return ar(f),null;case 6:if(c&&f.stateNode!=null)jh(c,f,c.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(c=us(zl.current),y=us(di.current),Bu(f)){if(!_e)throw Error(o(176));if(c=f.stateNode,E=f.memoizedProps,(y=z(c,E,f,!zu))&&(T=Yr,T!==null))switch(C=(T.mode&1)!==0,T.tag){case 3:lt(T.stateNode.containerInfo,c,E,C);break;case 5:Mt(T.type,T.memoizedProps,T.stateNode,c,E,C)}y&&ds(f)}else f.stateNode=we(E,c,y,f)}return ar(f),null;case 13:if(Ft(sn),E=f.memoizedState,tn&&qr!==null&&f.mode&1&&!(f.flags&128)){for(c=qr;c;)c=ss(c);return Ul(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=Bu(f),c===null){if(!E)throw Error(o(318));if(!_e)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));ie(c,f)}else Ul(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return ar(f),null}return Oi!==null&&(kv(Oi),Oi=null),f.flags&128?(f.lanes=y,f):(E=E!==null,y=!1,c===null?Bu(f):y=c.memoizedState!==null,E&&!y&&(f.child.flags|=8192,f.mode&1&&(c===null||sn.current&1?Un===0&&(Un=3):Uv())),f.updateQueue!==null&&(f.flags|=4),ar(f),null);case 4:return Bl(),qu(c,f),c===null&&be(f.stateNode.containerInfo),ar(f),null;case 10:return X0(f.type._context),ar(f),null;case 17:return gn(f.type)&&Eo(),ar(f),null;case 19:if(Ft(sn),T=f.memoizedState,T===null)return ar(f),null;if(E=(f.flags&128)!==0,C=T.rendering,C===null)if(E)Ku(T,!1);else{if(Un!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(C=Uh(c),C!==null){for(f.flags|=128,Ku(T,!1),c=C.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=y,E=f.child;E!==null;)y=E,T=c,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=T,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,T=C.dependencies,y.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),E=E.sibling;return ft(sn,sn.current&1|2),f.child}c=c.sibling}T.tail!==null&&Vn()>Lv&&(f.flags|=128,E=!0,Ku(T,!1),f.lanes=4194304)}else{if(!E)if(c=Uh(C),c!==null){if(f.flags|=128,E=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Ku(T,!0),T.tail===null&&T.tailMode==="hidden"&&!C.alternate&&!tn)return ar(f),null}else 2*Vn()-T.renderingStartTime>Lv&&y!==1073741824&&(f.flags|=128,E=!0,Ku(T,!1),f.lanes=4194304);T.isBackwards?(C.sibling=f.child,f.child=C):(c=T.last,c!==null?c.sibling=C:f.child=C,T.last=C)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=Vn(),f.sibling=null,c=sn.current,ft(sn,E?c&1|2:c&1),f):(ar(f),null);case 22:case 23:return Nv(),E=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==E&&(f.flags|=8192),E&&f.mode&1?Zr&1073741824&&(ar(f),Ke&&f.subtreeFlags&6&&(f.flags|=8192)):ar(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var sO=a.ReactCurrentOwner,Kr=!1;function yr(c,f,y,E){f.child=c===null?rE(f,null,y,E):Fl(f,c.child,y,E)}function PE(c,f,y,E,T){y=y.render;var C=f.ref;return Ol(f,T),E=lv(c,f,y,E,C,T),y=cv(),c!==null&&!Kr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,Us(c,f,T)):(tn&&y&&J0(f),f.flags|=1,yr(c,f,E,T),f.child)}function LE(c,f,y,E,T){if(c===null){var C=y.type;return typeof C=="function"&&!Fv(C)&&C.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=C,IE(c,f,C,E,T)):(c=hp(y.type,null,E,f,f.mode,T),c.ref=f.ref,c.return=f,f.child=c)}if(C=c.child,!(c.lanes&T)){var B=C.memoizedProps;if(y=y.compare,y=y!==null?y:Ch,y(B,E)&&c.ref===f.ref)return Us(c,f,T)}return f.flags|=1,c=Po(C,E),c.ref=f.ref,c.return=f,f.child=c}function IE(c,f,y,E,T){if(c!==null&&Ch(c.memoizedProps,E)&&c.ref===f.ref)if(Kr=!1,(c.lanes&T)!==0)c.flags&131072&&(Kr=!0);else return f.lanes=c.lanes,Us(c,f,T);return mv(c,f,y,E,T)}function DE(c,f,y){var E=f.pendingProps,T=E.children,C=c!==null?c.memoizedState:null;if(E.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ft(Vl,Zr),Zr|=y;else if(y&1073741824)f.memoizedState={baseLanes:0,cachePool:null},E=C!==null?C.baseLanes:y,ft(Vl,Zr),Zr|=E;else return c=C!==null?C.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,ft(Vl,Zr),Zr|=c,null;else C!==null?(E=C.baseLanes|y,f.memoizedState=null):E=y,ft(Vl,Zr),Zr|=E;return yr(c,f,T,y),f.child}function OE(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function mv(c,f,y,E,T){var C=gn(y)?Li:Nn.current;return C=mn(f,C),Ol(f,T),y=lv(c,f,y,E,C,T),E=cv(),c!==null&&!Kr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,Us(c,f,T)):(tn&&E&&J0(f),f.flags|=1,yr(c,f,y,T),f.child)}function kE(c,f,y,E,T){if(gn(y)){var C=!0;Il(f)}else C=!1;if(Ol(f,T),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),qw(f,y,E),Z0(f,y,E,T),E=!0;else if(c===null){var B=f.stateNode,Q=f.memoizedProps;B.props=Q;var de=B.context,Ce=y.contextType;typeof Ce=="object"&&Ce!==null?Ce=ci(Ce):(Ce=gn(y)?Li:Nn.current,Ce=mn(f,Ce));var Xe=y.getDerivedStateFromProps,pt=typeof Xe=="function"||typeof B.getSnapshotBeforeUpdate=="function";pt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==E||de!==Ce)&&Kw(f,B,E,Ce),Mo=!1;var it=f.memoizedState;B.state=it,Ih(f,E,B,T),de=f.memoizedState,Q!==E||it!==de||Pn.current||Mo?(typeof Xe=="function"&&(K0(f,y,Xe,E),de=f.memoizedState),(Q=Mo||Yw(f,y,Q,E,it,de,Ce))?(pt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=de),B.props=E,B.state=de,B.context=Ce,E=Q):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{B=f.stateNode,Ww(c,f),Q=f.memoizedProps,Ce=f.type===f.elementType?Q:Di(f.type,Q),B.props=Ce,pt=f.pendingProps,it=B.context,de=y.contextType,typeof de=="object"&&de!==null?de=ci(de):(de=gn(y)?Li:Nn.current,de=mn(f,de));var Wt=y.getDerivedStateFromProps;(Xe=typeof Wt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==pt||it!==de)&&Kw(f,B,E,de),Mo=!1,it=f.memoizedState,B.state=it,Ih(f,E,B,T);var tt=f.memoizedState;Q!==pt||it!==tt||Pn.current||Mo?(typeof Wt=="function"&&(K0(f,y,Wt,E),tt=f.memoizedState),(Ce=Mo||Yw(f,y,Ce,E,it,tt,de)||!1)?(Xe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(E,tt,de),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(E,tt,de)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||Q===c.memoizedProps&&it===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&it===c.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=tt),B.props=E,B.state=tt,B.context=de,E=Ce):(typeof B.componentDidUpdate!="function"||Q===c.memoizedProps&&it===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&it===c.memoizedState||(f.flags|=1024),E=!1)}return gv(c,f,y,E,C,T)}function gv(c,f,y,E,T,C){OE(c,f);var B=(f.flags&128)!==0;if(!E&&!B)return T&&Nu(f,y,!1),Us(c,f,C);E=f.stateNode,sO.current=f;var Q=B&&typeof y.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,c!==null&&B?(f.child=Fl(f,c.child,null,C),f.child=Fl(f,null,Q,C)):yr(c,f,Q,C),f.memoizedState=E.state,T&&Nu(f,y,!0),f.child}function NE(c){var f=c.stateNode;f.pendingContext?ir(c,f.pendingContext,f.pendingContext!==f.context):f.context&&ir(c,f.context,!1),rv(c,f.containerInfo)}function UE(c,f,y,E,T){return Ul(),nv(T),f.flags|=256,yr(c,f,y,E),f.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Yh(c){return{baseLanes:c,cachePool:null}}function FE(c,f,y){var E=f.pendingProps,T=sn.current,C=!1,B=(f.flags&128)!==0,Q;if((Q=B)||(Q=c!==null&&c.memoizedState===null?!1:(T&2)!==0),Q?(C=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),ft(sn,T&1),c===null)return tv(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?wo(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(T=E.children,c=E.fallback,C?(E=f.mode,C=f.child,T={mode:"hidden",children:T},!(E&1)&&C!==null?(C.childLanes=0,C.pendingProps=T):C=pp(T,E,0,null),c=Pa(c,E,y,null),C.return=f,c.return=f,C.sibling=c,f.child=C,f.child.memoizedState=Yh(y),f.memoizedState=Xh,c):vv(f,T));if(T=c.memoizedState,T!==null){if(Q=T.dehydrated,Q!==null){if(B)return f.flags&256?(f.flags&=-257,qh(c,f,y,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(C=E.fallback,T=f.mode,E=pp({mode:"visible",children:E.children},T,0,null),C=Pa(C,T,y,null),C.flags|=2,E.return=f,C.return=f,E.sibling=C,f.child=E,f.mode&1&&Fl(f,c.child,null,y),f.child.memoizedState=Yh(y),f.memoizedState=Xh,C);if(!(f.mode&1))f=qh(c,f,y,null);else if(wo(Q))f=qh(c,f,y,Error(o(419)));else if(E=(y&c.childLanes)!==0,Kr||E){if(E=Ln,E!==null){switch(y&-y){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}E=C&(E.suspendedLanes|y)?0:C,E!==0&&E!==T.retryLane&&(T.retryLane=E,pi(c,E,-1))}Uv(),f=qh(c,f,y,Error(o(421)))}else xh(Q)?(f.flags|=128,f.child=c.child,f=yO.bind(null,c),Sh(Q,f),f=null):(y=T.treeContext,_e&&(qr=N0(Q),Yr=f,tn=!0,Oi=null,zu=!1,y!==null&&(ui[fi++]=Os,ui[fi++]=ks,ui[fi++]=wa,Os=y.id,ks=y.overflow,wa=f)),f=vv(f,f.pendingProps.children),f.flags|=4096);return f}return C?(E=BE(c,f,E.children,E.fallback,y),C=f.child,T=c.child.memoizedState,C.memoizedState=T===null?Yh(y):{baseLanes:T.baseLanes|y,cachePool:null},C.childLanes=c.childLanes&~y,f.memoizedState=Xh,E):(y=zE(c,f,E.children,y),f.memoizedState=null,y)}return C?(E=BE(c,f,E.children,E.fallback,y),C=f.child,T=c.child.memoizedState,C.memoizedState=T===null?Yh(y):{baseLanes:T.baseLanes|y,cachePool:null},C.childLanes=c.childLanes&~y,f.memoizedState=Xh,E):(y=zE(c,f,E.children,y),f.memoizedState=null,y)}function vv(c,f){return f=pp({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function zE(c,f,y,E){var T=c.child;return c=T.sibling,y=Po(T,{mode:"visible",children:y}),!(f.mode&1)&&(y.lanes=E),y.return=f,y.sibling=null,c!==null&&(E=f.deletions,E===null?(f.deletions=[c],f.flags|=16):E.push(c)),f.child=y}function BE(c,f,y,E,T){var C=f.mode;c=c.child;var B=c.sibling,Q={mode:"hidden",children:y};return!(C&1)&&f.child!==c?(y=f.child,y.childLanes=0,y.pendingProps=Q,f.deletions=null):(y=Po(c,Q),y.subtreeFlags=c.subtreeFlags&14680064),B!==null?E=Po(B,E):(E=Pa(E,C,T,null),E.flags|=2),E.return=f,y.return=f,y.sibling=E,f.child=y,E}function qh(c,f,y,E){return E!==null&&nv(E),Fl(f,c.child,null,y),c=vv(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function HE(c,f,y){c.lanes|=f;var E=c.alternate;E!==null&&(E.lanes|=f),Y0(c.return,f,y)}function yv(c,f,y,E,T){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:T}:(C.isBackwards=f,C.rendering=null,C.renderingStartTime=0,C.last=E,C.tail=y,C.tailMode=T)}function VE(c,f,y){var E=f.pendingProps,T=E.revealOrder,C=E.tail;if(yr(c,f,E.children,y),E=sn.current,E&2)E=E&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&HE(c,y,f);else if(c.tag===19)HE(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if(ft(sn,E),!(f.mode&1))f.memoizedState=null;else switch(T){case"forwards":for(y=f.child,T=null;y!==null;)c=y.alternate,c!==null&&Uh(c)===null&&(T=y),y=y.sibling;y=T,y===null?(T=f.child,f.child=null):(T=y.sibling,y.sibling=null),yv(f,!1,T,y,C);break;case"backwards":for(y=null,T=f.child,f.child=null;T!==null;){if(c=T.alternate,c!==null&&Uh(c)===null){f.child=T;break}c=T.sibling,T.sibling=y,y=T,T=c}yv(f,!0,y,null,C);break;case"together":yv(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Us(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Gl|=f.lanes,!(y&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,y=Po(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Po(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function oO(c,f,y){switch(f.tag){case 3:NE(f),Ul();break;case 5:iE(f);break;case 1:gn(f.type)&&Il(f);break;case 4:rv(f,f.stateNode.containerInfo);break;case 10:Gw(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(ft(sn,sn.current&1),f.flags|=128,null):y&f.child.childLanes?FE(c,f,y):(ft(sn,sn.current&1),c=Us(c,f,y),c!==null?c.sibling:null);ft(sn,sn.current&1);break;case 19:if(E=(y&f.childLanes)!==0,c.flags&128){if(E)return VE(c,f,y);f.flags|=128}var T=f.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ft(sn,sn.current),E)break;return null;case 22:case 23:return f.lanes=0,DE(c,f,y)}return Us(c,f,y)}function aO(c,f){switch(Q0(f),f.tag){case 1:return gn(f.type)&&Eo(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Bl(),Ft(Pn),Ft(Nn),ov(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return iv(f),null;case 13:if(Ft(sn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Ul()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Ft(sn),null;case 4:return Bl(),null;case 10:return X0(f.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var Kh=!1,Ta=!1,lO=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Zh(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(E){Ir(c,f,E)}else y.current=null}function _v(c,f,y){try{y()}catch(E){Ir(c,f,E)}}var GE=!1;function cO(c,f){for(K(c.containerInfo),Fe=f;Fe!==null;)if(c=Fe,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Fe=f;else for(;Fe!==null;){c=Fe;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,T=y.memoizedState,C=c.stateNode,B=C.getSnapshotBeforeUpdate(c.elementType===c.type?E:Di(c.type,E),T);C.__reactInternalSnapshotBeforeUpdate=B}break;case 3:Ke&&Oe(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Q){Ir(c,c.return,Q)}if(f=c.sibling,f!==null){f.return=c.return,Fe=f;break}Fe=c.return}return y=GE,GE=!1,y}function ba(c,f,y){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var T=E=E.next;do{if((T.tag&c)===c){var C=T.destroy;T.destroy=void 0,C!==void 0&&_v(f,y,C)}T=T.next}while(T!==E)}}function Zu(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var E=y.create;y.destroy=E()}y=y.next}while(y!==f)}}function xv(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=Z(y);break;default:c=y}typeof f=="function"?f(c):f.current=c}}function WE(c,f,y){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(bh,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var E=c=c.next;do{var T=E,C=T.destroy;T=T.tag,C!==void 0&&(T&2||T&4)&&_v(f,y,C),E=E.next}while(E!==c)}break;case 1:if(Zh(f,y),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(B){Ir(f,y,B)}break;case 5:Zh(f,y);break;case 4:Ke?KE(c,f,y):G&&G&&(f=f.stateNode.containerInfo,y=Pt(f),is(f,y))}}function $E(c,f,y){for(var E=f;;)if(WE(c,E,y),E.child===null||Ke&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function jE(c){var f=c.alternate;f!==null&&(c.alternate=null,jE(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&$e(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function XE(c){return c.tag===5||c.tag===3||c.tag===4}function YE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||XE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function qE(c){if(Ke){e:{for(var f=c.return;f!==null;){if(XE(f))break e;f=f.return}throw Error(o(160))}var y=f;switch(y.tag){case 5:f=y.stateNode,y.flags&32&&(nt(f),y.flags&=-33),y=YE(c),wv(c,y,f);break;case 3:case 4:f=y.stateNode.containerInfo,y=YE(c),Sv(c,y,f);break;default:throw Error(o(161))}}}function Sv(c,f,y){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?Ee(y,c,f):Ve(y,c);else if(E!==4&&(c=c.child,c!==null))for(Sv(c,f,y),c=c.sibling;c!==null;)Sv(c,f,y),c=c.sibling}function wv(c,f,y){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?ue(y,c,f):Le(y,c);else if(E!==4&&(c=c.child,c!==null))for(wv(c,f,y),c=c.sibling;c!==null;)wv(c,f,y),c=c.sibling}function KE(c,f,y){for(var E=f,T=!1,C,B;;){if(!T){T=E.return;e:for(;;){if(T===null)throw Error(o(160));switch(C=T.stateNode,T.tag){case 5:B=!1;break e;case 3:C=C.containerInfo,B=!0;break e;case 4:C=C.containerInfo,B=!0;break e}T=T.return}T=!0}if(E.tag===5||E.tag===6)$E(c,E,y),B?De(C,E.stateNode):Me(C,E.stateNode);else if(E.tag===18)B?rt(C,E.stateNode):je(C,E.stateNode);else if(E.tag===4){if(E.child!==null){C=E.stateNode.containerInfo,B=!0,E.child.return=E,E=E.child;continue}}else if(WE(c,E,y),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(T=!1)}E.sibling.return=E.return,E=E.sibling}}function Ev(c,f){if(Ke){switch(f.tag){case 0:case 11:case 14:case 15:ba(3,f,f.return),Zu(3,f),ba(5,f,f.return);return;case 1:return;case 5:var y=f.stateNode;if(y!=null){var E=f.memoizedProps;c=c!==null?c.memoizedProps:E;var T=f.type,C=f.updateQueue;f.updateQueue=null,C!==null&&Y(y,C,T,c,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));y=f.memoizedProps,Ie(f.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:_e&&c!==null&&c.memoizedState.isDehydrated&&ne(f.stateNode.containerInfo);return;case 12:return;case 13:Jh(f);return;case 19:Jh(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:ba(3,f,f.return),Zu(3,f),ba(5,f,f.return);return;case 12:return;case 13:Jh(f);return;case 19:Jh(f);return;case 3:_e&&c!==null&&c.memoizedState.isDehydrated&&ne(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(G){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,is(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Jh(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new lO),f.forEach(function(E){var T=_O.bind(null,c,E);y.has(E)||(y.add(E),E.then(T,T))})}}function uO(c,f){for(Fe=f;Fe!==null;){f=Fe;var y=f.deletions;if(y!==null)for(var E=0;E<y.length;E++){var T=y[E];try{var C=c;Ke?KE(C,T,f):$E(C,T,f);var B=T.alternate;B!==null&&(B.return=null),T.return=null}catch(et){Ir(T,f,et)}}if(y=f.child,f.subtreeFlags&12854&&y!==null)y.return=f,Fe=y;else for(;Fe!==null;){f=Fe;try{var Q=f.flags;if(Q&32&&Ke&&nt(f.stateNode),Q&512){var de=f.alternate;if(de!==null){var Ce=de.ref;Ce!==null&&(typeof Ce=="function"?Ce(null):Ce.current=null)}}if(Q&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Xe=f.alternate;(Xe===null||Xe.memoizedState===null)&&(Pv=Vn())}break;case 22:var pt=f.memoizedState!==null,it=f.alternate,Wt=it!==null&&it.memoizedState!==null;if(y=f,Ke){e:if(E=y,T=pt,C=null,Ke)for(var tt=E;;){if(tt.tag===5){if(C===null){C=tt;var lr=tt.stateNode;T?Rt(lr):Pe(tt.stateNode,tt.memoizedProps)}}else if(tt.tag===6){if(C===null){var gi=tt.stateNode;T?J(gi):se(gi,tt.memoizedProps)}}else if((tt.tag!==22&&tt.tag!==23||tt.memoizedState===null||tt===E)&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===E)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===E)break e;C===tt&&(C=null),tt=tt.return}C===tt&&(C=null),tt.sibling.return=tt.return,tt=tt.sibling}}if(pt&&!Wt&&y.mode&1){Fe=y;for(var re=y.child;re!==null;){for(y=Fe=re;Fe!==null;){E=Fe;var te=E.child;switch(E.tag){case 0:case 11:case 14:case 15:ba(4,E,E.return);break;case 1:Zh(E,E.return);var ce=E.stateNode;if(typeof ce.componentWillUnmount=="function"){var He=E.return;try{ce.props=E.memoizedProps,ce.state=E.memoizedState,ce.componentWillUnmount()}catch(et){Ir(E,He,et)}}break;case 5:Zh(E,E.return);break;case 22:if(E.memoizedState!==null){QE(y);continue}}te!==null?(te.return=E,Fe=te):QE(y)}re=re.sibling}}}switch(Q&4102){case 2:qE(f),f.flags&=-3;break;case 6:qE(f),f.flags&=-3,Ev(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Ev(f.alternate,f);break;case 4:Ev(f.alternate,f)}}catch(et){Ir(f,f.return,et)}if(y=f.sibling,y!==null){y.return=f.return,Fe=y;break}Fe=f.return}}}function fO(c,f,y){Fe=c,ZE(c)}function ZE(c,f,y){for(var E=(c.mode&1)!==0;Fe!==null;){var T=Fe,C=T.child;if(T.tag===22&&E){var B=T.memoizedState!==null||Kh;if(!B){var Q=T.alternate,de=Q!==null&&Q.memoizedState!==null||Ta;Q=Kh;var Ce=Ta;if(Kh=B,(Ta=de)&&!Ce)for(Fe=T;Fe!==null;)B=Fe,de=B.child,B.tag===22&&B.memoizedState!==null?eM(T):de!==null?(de.return=B,Fe=de):eM(T);for(;C!==null;)Fe=C,ZE(C),C=C.sibling;Fe=T,Kh=Q,Ta=Ce}JE(c)}else T.subtreeFlags&8772&&C!==null?(C.return=T,Fe=C):JE(c)}}function JE(c){for(;Fe!==null;){var f=Fe;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Ta||Zu(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!Ta)if(y===null)E.componentDidMount();else{var T=f.elementType===f.type?y.memoizedProps:Di(f.type,y.memoizedProps);E.componentDidUpdate(T,y.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var C=f.updateQueue;C!==null&&jw(f,C,E);break;case 3:var B=f.updateQueue;if(B!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=Z(f.child.stateNode);break;case 1:y=f.child.stateNode}jw(f,B,y)}break;case 5:var Q=f.stateNode;y===null&&f.flags&4&&fe(Q,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&f.memoizedState===null){var de=f.alternate;if(de!==null){var Ce=de.memoizedState;if(Ce!==null){var Xe=Ce.dehydrated;Xe!==null&&ge(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ta||f.flags&512&&xv(f)}catch(pt){Ir(f,f.return,pt)}}if(f===c){Fe=null;break}if(y=f.sibling,y!==null){y.return=f.return,Fe=y;break}Fe=f.return}}function QE(c){for(;Fe!==null;){var f=Fe;if(f===c){Fe=null;break}var y=f.sibling;if(y!==null){y.return=f.return,Fe=y;break}Fe=f.return}}function eM(c){for(;Fe!==null;){var f=Fe;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{Zu(4,f)}catch(de){Ir(f,y,de)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var T=f.return;try{E.componentDidMount()}catch(de){Ir(f,T,de)}}var C=f.return;try{xv(f)}catch(de){Ir(f,C,de)}break;case 5:var B=f.return;try{xv(f)}catch(de){Ir(f,B,de)}}}catch(de){Ir(f,f.return,de)}if(f===c){Fe=null;break}var Q=f.sibling;if(Q!==null){Q.return=f.return,Fe=Q;break}Fe=f.return}}var Qh=0,ep=1,tp=2,np=3,rp=4;if(typeof Symbol=="function"&&Symbol.for){var Ju=Symbol.for;Qh=Ju("selector.component"),ep=Ju("selector.has_pseudo_class"),tp=Ju("selector.role"),np=Ju("selector.test_id"),rp=Ju("selector.text")}function Mv(c){var f=pe(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=yt(c),c===null)throw Error(o(362));return c.stateNode.current}function Tv(c,f){switch(f.$$typeof){case Qh:if(c.type===f.value)return!0;break;case ep:e:{f=f.value,c=[c,0];for(var y=0;y<c.length;){var E=c[y++],T=c[y++],C=f[T];if(E.tag!==5||!O(E)){for(;C!=null&&Tv(E,C);)T++,C=f[T];if(T===f.length){f=!0;break e}else for(E=E.child;E!==null;)c.push(E,T),E=E.sibling}}f=!1}return f;case tp:if(c.tag===5&&ae(c.stateNode,f.value))return!0;break;case rp:if((c.tag===5||c.tag===6)&&(c=N(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case np:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function bv(c){switch(c.$$typeof){case Qh:return"<"+(I(c.value)||"Unknown")+">";case ep:return":has("+(bv(c)||"")+")";case tp:return'[role="'+c.value+'"]';case rp:return'"'+c.value+'"';case np:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function tM(c,f){var y=[];c=[c,0];for(var E=0;E<c.length;){var T=c[E++],C=c[E++],B=f[C];if(T.tag!==5||!O(T)){for(;B!=null&&Tv(T,B);)C++,B=f[C];if(C===f.length)y.push(T);else for(T=T.child;T!==null;)c.push(T,C),T=T.sibling}}return y}function Av(c,f){if(!Je)throw Error(o(363));c=Mv(c),c=tM(c,f),f=[],c=Array.from(c);for(var y=0;y<c.length;){var E=c[y++];if(E.tag===5)O(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)c.push(E),E=E.sibling}return f}var dO=Math.ceil,ip=a.ReactCurrentDispatcher,Cv=a.ReactCurrentOwner,Mn=a.ReactCurrentBatchConfig,Tt=0,Ln=null,In=null,Jn=0,Zr=0,Vl=ht(0),Un=0,Qu=null,Gl=0,sp=0,Rv=0,ef=null,Pr=null,Pv=0,Lv=1/0;function Wl(){Lv=Vn()+500}var op=!1,Iv=null,bo=null,ap=!1,Ao=null,lp=0,tf=0,Dv=null,cp=-1,up=0;function _r(){return Tt&6?Vn():cp!==-1?cp:cp=Vn()}function Co(c){return c.mode&1?Tt&2&&Jn!==0?Jn&-Jn:YD.transition!==null?(up===0&&(c=Eh,Eh<<=1,!(Eh&4194240)&&(Eh=64),up=c),up):(c=Ot,c!==0?c:ye()):1}function pi(c,f,y){if(50<tf)throw tf=0,Dv=null,Error(o(185));var E=fp(c,f);return E===null?null:(Fu(E,f,y),(!(Tt&2)||E!==Ln)&&(E===Ln&&(!(Tt&2)&&(sp|=f),Un===4&&Ro(E,Jn)),Lr(E,y),f===1&&Tt===0&&!(c.mode&1)&&(Wl(),Ah&&ls())),E)}function fp(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}function Lr(c,f){var y=c.callbackNode;zD(c,f);var E=Th(c,c===Ln?Jn:0);if(E===0)y!==null&&Hw(y),c.callbackNode=null,c.callbackPriority=0;else if(f=E&-E,c.callbackPriority!==f){if(y!=null&&Hw(y),f===1)c.tag===0?XD(rM.bind(null,c)):Vw(rM.bind(null,c)),Ue?ze(function(){Tt===0&&ls()}):H0(V0,ls),y=null;else{switch(Bw(E)){case 1:y=V0;break;case 4:y=GD;break;case 16:y=G0;break;case 536870912:y=WD;break;default:y=G0}y=dM(y,nM.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function nM(c,f){if(cp=-1,up=0,Tt&6)throw Error(o(327));var y=c.callbackNode;if(Ra()&&c.callbackNode!==y)return null;var E=Th(c,c===Ln?Jn:0);if(E===0)return null;if(E&30||E&c.expiredLanes||f)f=dp(c,E);else{f=E;var T=Tt;Tt|=2;var C=oM();(Ln!==c||Jn!==f)&&(Wl(),Aa(c,f));do try{mO();break}catch(Q){sM(c,Q)}while(1);j0(),ip.current=C,Tt=T,In!==null?f=0:(Ln=null,Jn=0,f=Un)}if(f!==0){if(f===2&&(T=F0(c),T!==0&&(E=T,f=Ov(c,T))),f===1)throw y=Qu,Aa(c,0),Ro(c,E),Lr(c,Vn()),y;if(f===6)Ro(c,E);else{if(T=c.current.alternate,!(E&30)&&!hO(T)&&(f=dp(c,E),f===2&&(C=F0(c),C!==0&&(E=C,f=Ov(c,C))),f===1))throw y=Qu,Aa(c,0),Ro(c,E),Lr(c,Vn()),y;switch(c.finishedWork=T,c.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:Ca(c,Pr);break;case 3:if(Ro(c,E),(E&130023424)===E&&(f=Pv+500-Vn(),10<f)){if(Th(c,0)!==0)break;if(T=c.suspendedLanes,(T&E)!==E){_r(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Re(Ca.bind(null,c,Pr),f);break}Ca(c,Pr);break;case 4:if(Ro(c,E),(E&4194240)===E)break;for(f=c.eventTimes,T=-1;0<E;){var B=31-Ii(E);C=1<<B,B=f[B],B>T&&(T=B),E&=~C}if(E=T,E=Vn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*dO(E/1960))-E,10<E){c.timeoutHandle=Re(Ca.bind(null,c,Pr),E);break}Ca(c,Pr);break;case 5:Ca(c,Pr);break;default:throw Error(o(329))}}}return Lr(c,Vn()),c.callbackNode===y?nM.bind(null,c):null}function Ov(c,f){var y=ef;return c.current.memoizedState.isDehydrated&&(Aa(c,f).flags|=256),c=dp(c,f),c!==2&&(f=Pr,Pr=y,f!==null&&kv(f)),c}function kv(c){Pr===null?Pr=c:Pr.push.apply(Pr,c)}function hO(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var E=0;E<y.length;E++){var T=y[E],C=T.getSnapshot;T=T.value;try{if(!as(C(),T))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ro(c,f){for(f&=~Rv,f&=~sp,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-Ii(f),E=1<<y;c[y]=-1,f&=~E}}function rM(c){if(Tt&6)throw Error(o(327));Ra();var f=Th(c,0);if(!(f&1))return Lr(c,Vn()),null;var y=dp(c,f);if(c.tag!==0&&y===2){var E=F0(c);E!==0&&(f=E,y=Ov(c,E))}if(y===1)throw y=Qu,Aa(c,0),Ro(c,f),Lr(c,Vn()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Ca(c,Pr),Lr(c,Vn()),null}function iM(c){Ao!==null&&Ao.tag===0&&!(Tt&6)&&Ra();var f=Tt;Tt|=1;var y=Mn.transition,E=Ot;try{if(Mn.transition=null,Ot=1,c)return c()}finally{Ot=E,Mn.transition=y,Tt=f,!(Tt&6)&&ls()}}function Nv(){Zr=Vl.current,Ft(Vl)}function Aa(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==Qe&&(c.timeoutHandle=Qe,Ze(y)),In!==null)for(y=In.return;y!==null;){var E=y;switch(Q0(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Eo();break;case 3:Bl(),Ft(Pn),Ft(Nn),ov();break;case 5:iv(E);break;case 4:Bl();break;case 13:Ft(sn);break;case 19:Ft(sn);break;case 10:X0(E.type._context);break;case 22:case 23:Nv()}y=y.return}if(Ln=c,In=c=Po(c.current,null),Jn=Zr=f,Un=0,Qu=null,Rv=sp=Gl=0,Pr=ef=null,cs!==null){for(f=0;f<cs.length;f++)if(y=cs[f],E=y.interleaved,E!==null){y.interleaved=null;var T=E.next,C=y.pending;if(C!==null){var B=C.next;C.next=T,E.next=B}y.pending=E}cs=null}return c}function sM(c,f){do{var y=In;try{if(j0(),Fh.current=Wh,zh){for(var E=vn.memoizedState;E!==null;){var T=E.queue;T!==null&&(T.pending=null),E=E.next}zh=!1}if(Hl=0,Gn=sr=vn=null,Wu=!1,$u=0,Cv.current=null,y===null||y.return===null){Un=1,Qu=f,In=null;break}e:{var C=c,B=y.return,Q=y,de=f;if(f=Jn,Q.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ce=de,Xe=Q,pt=Xe.tag;if(!(Xe.mode&1)&&(pt===0||pt===11||pt===15)){var it=Xe.alternate;it?(Xe.updateQueue=it.updateQueue,Xe.memoizedState=it.memoizedState,Xe.lanes=it.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var Wt=bE(B);if(Wt!==null){Wt.flags&=-257,AE(Wt,B,Q,C,f),Wt.mode&1&&TE(C,Ce,f),f=Wt,de=Ce;var tt=f.updateQueue;if(tt===null){var lr=new Set;lr.add(de),f.updateQueue=lr}else tt.add(de);break e}else{if(!(f&1)){TE(C,Ce,f),Uv();break e}de=Error(o(426))}}else if(tn&&Q.mode&1){var gi=bE(B);if(gi!==null){!(gi.flags&65536)&&(gi.flags|=256),AE(gi,B,Q,C,f),nv(de);break e}}C=de,Un!==4&&(Un=2),ef===null?ef=[C]:ef.push(C),de=hv(de,Q),Q=B;do{switch(Q.tag){case 3:Q.flags|=65536,f&=-f,Q.lanes|=f;var re=EE(Q,de,f);$w(Q,re);break e;case 1:C=de;var te=Q.type,ce=Q.stateNode;if(!(Q.flags&128)&&(typeof te.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(bo===null||!bo.has(ce)))){Q.flags|=65536,f&=-f,Q.lanes|=f;var He=ME(Q,C,f);$w(Q,He);break e}}Q=Q.return}while(Q!==null)}lM(y)}catch(et){f=et,In===y&&y!==null&&(In=y=y.return);continue}break}while(1)}function oM(){var c=ip.current;return ip.current=Wh,c===null?Wh:c}function Uv(){(Un===0||Un===3||Un===2)&&(Un=4),Ln===null||!(Gl&268435455)&&!(sp&268435455)||Ro(Ln,Jn)}function dp(c,f){var y=Tt;Tt|=2;var E=oM();Ln===c&&Jn===f||Aa(c,f);do try{pO();break}catch(T){sM(c,T)}while(1);if(j0(),Tt=y,ip.current=E,In!==null)throw Error(o(261));return Ln=null,Jn=0,Un}function pO(){for(;In!==null;)aM(In)}function mO(){for(;In!==null&&!HD();)aM(In)}function aM(c){var f=fM(c.alternate,c,Zr);c.memoizedProps=c.pendingProps,f===null?lM(c):In=f,Cv.current=null}function lM(c){var f=c;do{var y=f.alternate;if(c=f.return,f.flags&32768){if(y=aO(y,f),y!==null){y.flags&=32767,In=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Un=6,In=null;return}}else if(y=iO(y,f,Zr),y!==null){In=y;return}if(f=f.sibling,f!==null){In=f;return}In=f=c}while(f!==null);Un===0&&(Un=5)}function Ca(c,f){var y=Ot,E=Mn.transition;try{Mn.transition=null,Ot=1,gO(c,f,y)}finally{Mn.transition=E,Ot=y}return null}function gO(c,f,y){do Ra();while(Ao!==null);if(Tt&6)throw Error(o(327));var E=c.finishedWork,T=c.finishedLanes;if(E===null)return null;if(c.finishedWork=null,c.finishedLanes=0,E===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var C=E.lanes|E.childLanes;if(BD(c,C),c===Ln&&(In=Ln=null,Jn=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||ap||(ap=!0,dM(G0,function(){return Ra(),null})),C=(E.flags&15990)!==0,E.subtreeFlags&15990||C){C=Mn.transition,Mn.transition=null;var B=Ot;Ot=1;var Q=Tt;Tt|=4,Cv.current=null,cO(c,E),uO(c,E),X(c.containerInfo),c.current=E,fO(E),VD(),Tt=Q,Ot=B,Mn.transition=C}else c.current=E;if(ap&&(ap=!1,Ao=c,lp=T),C=c.pendingLanes,C===0&&(bo=null),$D(E.stateNode),Lr(c,Vn()),f!==null)for(y=c.onRecoverableError,E=0;E<f.length;E++)y(f[E]);if(op)throw op=!1,c=Iv,Iv=null,c;return lp&1&&c.tag!==0&&Ra(),C=c.pendingLanes,C&1?c===Dv?tf++:(tf=0,Dv=c):tf=0,ls(),null}function Ra(){if(Ao!==null){var c=Bw(lp),f=Mn.transition,y=Ot;try{if(Mn.transition=null,Ot=16>c?16:c,Ao===null)var E=!1;else{if(c=Ao,Ao=null,lp=0,Tt&6)throw Error(o(331));var T=Tt;for(Tt|=4,Fe=c.current;Fe!==null;){var C=Fe,B=C.child;if(Fe.flags&16){var Q=C.deletions;if(Q!==null){for(var de=0;de<Q.length;de++){var Ce=Q[de];for(Fe=Ce;Fe!==null;){var Xe=Fe;switch(Xe.tag){case 0:case 11:case 15:ba(8,Xe,C)}var pt=Xe.child;if(pt!==null)pt.return=Xe,Fe=pt;else for(;Fe!==null;){Xe=Fe;var it=Xe.sibling,Wt=Xe.return;if(jE(Xe),Xe===Ce){Fe=null;break}if(it!==null){it.return=Wt,Fe=it;break}Fe=Wt}}}var tt=C.alternate;if(tt!==null){var lr=tt.child;if(lr!==null){tt.child=null;do{var gi=lr.sibling;lr.sibling=null,lr=gi}while(lr!==null)}}Fe=C}}if(C.subtreeFlags&2064&&B!==null)B.return=C,Fe=B;else e:for(;Fe!==null;){if(C=Fe,C.flags&2048)switch(C.tag){case 0:case 11:case 15:ba(9,C,C.return)}var re=C.sibling;if(re!==null){re.return=C.return,Fe=re;break e}Fe=C.return}}var te=c.current;for(Fe=te;Fe!==null;){B=Fe;var ce=B.child;if(B.subtreeFlags&2064&&ce!==null)ce.return=B,Fe=ce;else e:for(B=te;Fe!==null;){if(Q=Fe,Q.flags&2048)try{switch(Q.tag){case 0:case 11:case 15:Zu(9,Q)}}catch(et){Ir(Q,Q.return,et)}if(Q===B){Fe=null;break e}var He=Q.sibling;if(He!==null){He.return=Q.return,Fe=He;break e}Fe=Q.return}}if(Tt=T,ls(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(bh,c)}catch{}E=!0}return E}finally{Ot=y,Mn.transition=f}}return!1}function cM(c,f,y){f=hv(y,f),f=EE(c,f,1),To(c,f),f=_r(),c=fp(c,1),c!==null&&(Fu(c,1,f),Lr(c,f))}function Ir(c,f,y){if(c.tag===3)cM(c,c,y);else for(;f!==null;){if(f.tag===3){cM(f,c,y);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(bo===null||!bo.has(E))){c=hv(y,c),c=ME(f,c,1),To(f,c),c=_r(),f=fp(f,1),f!==null&&(Fu(f,1,c),Lr(f,c));break}}f=f.return}}function vO(c,f,y){var E=c.pingCache;E!==null&&E.delete(f),f=_r(),c.pingedLanes|=c.suspendedLanes&y,Ln===c&&(Jn&y)===y&&(Un===4||Un===3&&(Jn&130023424)===Jn&&500>Vn()-Pv?Aa(c,0):Rv|=y),Lr(c,f)}function uM(c,f){f===0&&(c.mode&1?(f=Mh,Mh<<=1,!(Mh&130023424)&&(Mh=4194304)):f=1);var y=_r();c=fp(c,f),c!==null&&(Fu(c,f,y),Lr(c,y))}function yO(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),uM(c,y)}function _O(c,f){var y=0;switch(c.tag){case 13:var E=c.stateNode,T=c.memoizedState;T!==null&&(y=T.retryLane);break;case 19:E=c.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),uM(c,y)}var fM;fM=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||Pn.current)Kr=!0;else{if(!(c.lanes&y)&&!(f.flags&128))return Kr=!1,oO(c,f,y);Kr=!!(c.flags&131072)}else Kr=!1,tn&&f.flags&1048576&&Zw(f,kh,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var T=mn(f,Nn.current);Ol(f,y),T=lv(null,f,E,c,T,y);var C=cv();return f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,gn(E)?(C=!0,Il(f)):C=!1,f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,q0(f),T.updater=Dh,f.stateNode=T,T._reactInternals=f,Z0(f,E,c,y),f=gv(null,f,E,!0,C,y)):(f.tag=0,tn&&C&&J0(f),yr(null,f,T,y),f=f.child),f;case 16:E=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,T=E._init,E=T(E._payload),f.type=E,T=f.tag=SO(E),c=Di(E,c),T){case 0:f=mv(null,f,E,c,y);break e;case 1:f=kE(null,f,E,c,y);break e;case 11:f=PE(null,f,E,c,y);break e;case 14:f=LE(null,f,E,Di(E.type,c),y);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Di(E,T),mv(c,f,E,T,y);case 1:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Di(E,T),kE(c,f,E,T,y);case 3:e:{if(NE(f),c===null)throw Error(o(387));E=f.pendingProps,C=f.memoizedState,T=C.element,Ww(c,f),Ih(f,E,null,y);var B=f.memoizedState;if(E=B.element,_e&&C.isDehydrated)if(C={element:E,isDehydrated:!1,cache:B.cache,transitions:B.transitions},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){T=Error(o(423)),f=UE(c,f,E,y,T);break e}else if(E!==T){T=Error(o(424)),f=UE(c,f,E,y,T);break e}else for(_e&&(qr=k0(f.stateNode.containerInfo),Yr=f,tn=!0,Oi=null,zu=!1),y=rE(f,null,E,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ul(),E===T){f=Us(c,f,y);break e}yr(c,f,E,y)}f=f.child}return f;case 5:return iE(f),c===null&&tv(f),E=f.type,T=f.pendingProps,C=c!==null?c.memoizedProps:null,B=T.children,Te(E,T)?B=null:C!==null&&Te(E,C)&&(f.flags|=32),OE(c,f),yr(c,f,B,y),f.child;case 6:return c===null&&tv(f),null;case 13:return FE(c,f,y);case 4:return rv(f,f.stateNode.containerInfo),E=f.pendingProps,c===null?f.child=Fl(f,null,E,y):yr(c,f,E,y),f.child;case 11:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Di(E,T),PE(c,f,E,T,y);case 7:return yr(c,f,f.pendingProps,y),f.child;case 8:return yr(c,f,f.pendingProps.children,y),f.child;case 12:return yr(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(E=f.type._context,T=f.pendingProps,C=f.memoizedProps,B=T.value,Gw(f,E,B),C!==null)if(as(C.value,B)){if(C.children===T.children&&!Pn.current){f=Us(c,f,y);break e}}else for(C=f.child,C!==null&&(C.return=f);C!==null;){var Q=C.dependencies;if(Q!==null){B=C.child;for(var de=Q.firstContext;de!==null;){if(de.context===E){if(C.tag===1){de=Ds(-1,y&-y),de.tag=2;var Ce=C.updateQueue;if(Ce!==null){Ce=Ce.shared;var Xe=Ce.pending;Xe===null?de.next=de:(de.next=Xe.next,Xe.next=de),Ce.pending=de}}C.lanes|=y,de=C.alternate,de!==null&&(de.lanes|=y),Y0(C.return,y,f),Q.lanes|=y;break}de=de.next}}else if(C.tag===10)B=C.type===f.type?null:C.child;else if(C.tag===18){if(B=C.return,B===null)throw Error(o(341));B.lanes|=y,Q=B.alternate,Q!==null&&(Q.lanes|=y),Y0(B,y,f),B=C.sibling}else B=C.child;if(B!==null)B.return=C;else for(B=C;B!==null;){if(B===f){B=null;break}if(C=B.sibling,C!==null){C.return=B.return,B=C;break}B=B.return}C=B}yr(c,f,T.children,y),f=f.child}return f;case 9:return T=f.type,E=f.pendingProps.children,Ol(f,y),T=ci(T),E=E(T),f.flags|=1,yr(c,f,E,y),f.child;case 14:return E=f.type,T=Di(E,f.pendingProps),T=Di(E.type,T),LE(c,f,E,T,y);case 15:return IE(c,f,f.type,f.pendingProps,y);case 17:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Di(E,T),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,gn(E)?(c=!0,Il(f)):c=!1,Ol(f,y),qw(f,E,T),Z0(f,E,T,y),gv(null,f,E,!0,c,y);case 19:return VE(c,f,y);case 22:return DE(c,f,y)}throw Error(o(156,f.tag))};function dM(c,f){return H0(c,f)}function xO(c,f,y,E){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(c,f,y,E){return new xO(c,f,y,E)}function Fv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function SO(c){if(typeof c=="function")return Fv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===S)return 11;if(c===x)return 14}return 2}function Po(c,f){var y=c.alternate;return y===null?(y=mi(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function hp(c,f,y,E,T,C){var B=2;if(E=c,typeof c=="function")Fv(c)&&(B=1);else if(typeof c=="string")B=5;else e:switch(c){case d:return Pa(y.children,T,C,f);case h:B=8,T|=8;break;case p:return c=mi(12,y,f,T|2),c.elementType=p,c.lanes=C,c;case _:return c=mi(13,y,f,T),c.elementType=_,c.lanes=C,c;case g:return c=mi(19,y,f,T),c.elementType=g,c.lanes=C,c;case M:return pp(y,T,C,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:B=10;break e;case v:B=9;break e;case S:B=11;break e;case x:B=14;break e;case w:B=16,E=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=mi(B,y,f,T),f.elementType=c,f.type=E,f.lanes=C,f}function Pa(c,f,y,E){return c=mi(7,c,E,f),c.lanes=y,c}function pp(c,f,y,E){return c=mi(22,c,E,f),c.elementType=M,c.lanes=y,c.stateNode={},c}function zv(c,f,y){return c=mi(6,c,null,f),c.lanes=y,c}function Bv(c,f,y){return f=mi(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function wO(c,f,y,E,T){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Qe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z0(0),this.expirationTimes=z0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z0(0),this.identifierPrefix=E,this.onRecoverableError=T,_e&&(this.mutableSourceEagerHydrationData=null)}function hM(c,f,y,E,T,C,B,Q,de){return c=new wO(c,f,y,Q,de),f===1?(f=1,C===!0&&(f|=8)):f=0,C=mi(3,null,null,f),c.current=C,C.stateNode=c,C.memoizedState={element:E,isDehydrated:y,cache:null,transitions:null},q0(C),c}function pM(c){if(!c)return rr;c=c._reactInternals;e:{if(R(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(gn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(gn(y))return Ll(c,y,f)}return f}function mM(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=V(f),c===null?null:c.stateNode}function gM(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function Hv(c,f){gM(c,f),(c=c.alternate)&&gM(c,f)}function EO(c){return c=V(c),c===null?null:c.stateNode}function MO(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=_r();pi(c,134217728,f),Hv(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=_r(),y=Co(c);pi(c,y,f),Hv(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=Uu(f.pendingLanes);y!==0&&(B0(f,y|1),Lr(f,Vn()),!(Tt&6)&&(Wl(),ls()))}break;case 13:var E=_r();iM(function(){return pi(c,1,E)}),Hv(c,1)}},t.batchedUpdates=function(c,f){var y=Tt;Tt|=1;try{return c(f)}finally{Tt=y,Tt===0&&(Wl(),Ah&&ls())}},t.createComponentSelector=function(c){return{$$typeof:Qh,value:c}},t.createContainer=function(c,f,y,E,T,C,B){return hM(c,f,!1,null,y,E,T,C,B)},t.createHasPseudoClassSelector=function(c){return{$$typeof:ep,value:c}},t.createHydrationContainer=function(c,f,y,E,T,C,B,Q,de){return c=hM(y,E,!0,c,T,C,B,Q,de),c.context=pM(null),y=c.current,E=_r(),T=Co(y),C=Ds(E,T),C.callback=f??null,To(y,C),c.current.lanes=T,Fu(c,T,E),Lr(c,E),c},t.createPortal=function(c,f,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:c,containerInfo:f,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:tp,value:c}},t.createTestNameSelector=function(c){return{$$typeof:np,value:c}},t.createTextSelector=function(c){return{$$typeof:rp,value:c}},t.deferredUpdates=function(c){var f=Ot,y=Mn.transition;try{return Mn.transition=null,Ot=16,c()}finally{Ot=f,Mn.transition=y}},t.discreteUpdates=function(c,f,y,E,T){var C=Ot,B=Mn.transition;try{return Mn.transition=null,Ot=1,c(f,y,E,T)}finally{Ot=C,Mn.transition=B,Tt===0&&Wl()}},t.findAllNodes=Av,t.findBoundingRects=function(c,f){if(!Je)throw Error(o(363));f=Av(c,f),c=[];for(var y=0;y<f.length;y++)c.push(Bt(f[y]));for(f=c.length-1;0<f;f--){y=c[f];for(var E=y.x,T=E+y.width,C=y.y,B=C+y.height,Q=f-1;0<=Q;Q--)if(f!==Q){var de=c[Q],Ce=de.x,Xe=Ce+de.width,pt=de.y,it=pt+de.height;if(E>=Ce&&C>=pt&&T<=Xe&&B<=it){c.splice(f,1);break}else if(E!==Ce||y.width!==de.width||it<C||pt>B){if(!(C!==pt||y.height!==de.height||Xe<E||Ce>T)){Ce>E&&(de.width+=Ce-E,de.x=E),Xe<T&&(de.width=T-Ce),c.splice(f,1);break}}else{pt>C&&(de.height+=pt-C,de.y=C),it<B&&(de.height=B-pt),c.splice(f,1);break}}}return c},t.findHostInstance=mM,t.findHostInstanceWithNoPortals=function(c){return c=k(c),c=c!==null?j(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return mM(c)},t.flushControlled=function(c){var f=Tt;Tt|=1;var y=Mn.transition,E=Ot;try{Mn.transition=null,Ot=1,c()}finally{Ot=E,Mn.transition=y,Tt=f,Tt===0&&(Wl(),ls())}},t.flushPassiveEffects=Ra,t.flushSync=iM,t.focusWithin=function(c,f){if(!Je)throw Error(o(363));for(c=Mv(c),f=tM(c,f),f=Array.from(f),c=0;c<f.length;){var y=f[c++];if(!O(y)){if(y.tag===5&&xe(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ot},t.getFindAllNodesFailureDescription=function(c,f){if(!Je)throw Error(o(363));var y=0,E=[];c=[Mv(c),0];for(var T=0;T<c.length;){var C=c[T++],B=c[T++],Q=f[B];if((C.tag!==5||!O(C))&&(Tv(C,Q)&&(E.push(bv(Q)),B++,B>y&&(y=B)),B<f.length))for(C=C.child;C!==null;)c.push(C,B),C=C.sibling}if(y<f.length){for(c=[];y<f.length;y++)c.push(bv(f[y]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Z(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:EO,findFiberByHostInstance:c.findFiberByHostInstance||MO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{bh=f.inject(c),os=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,y,E){if(!Je)throw Error(o(363));c=Av(c,f);var T=Se(c,y,E).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(c,f){var y=f._getVersion;y=y(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,y]:c.mutableSourceEagerHydrationData.push(f,y)},t.runWithPriority=function(c,f){var y=Ot;try{return Ot=c,f()}finally{Ot=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,y,E){var T=f.current,C=_r(),B=Co(T);return y=pM(y),f.context===null?f.context=y:f.pendingContext=y,f=Ds(C,B),f.payload={element:c},E=E===void 0?null:E,E!==null&&(f.callback=E),To(T,f),c=pi(T,B,C),c!==null&&Lh(c,T,B),B},t};nL.exports=n6;var r6=nL.exports;const i6=Sl(r6),s6=n=>typeof n=="object"&&typeof n.then=="function",Qa=[];function sL(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function oL(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Qa)if(sL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Qa.indexOf(i);s!==-1&&Qa.splice(s,1)},promise:(s6(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Qa.push(i),!t)throw i.promise}const o6=(n,e,t)=>oL(n,e,!1,t),a6=(n,e,t)=>void oL(n,e,!0,t),l6=n=>{if(n===void 0||n.length===0)Qa.splice(0,Qa.length);else{const e=Qa.find(t=>sL(n,t.keys,t.equal));e&&e.remove()}},gw={},aL=n=>void Object.assign(gw,n);function c6(n,e){function t(d,{args:h=[],attach:p,...m},v){let S=`${d[0].toUpperCase()}${d.slice(1)}`,_;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Sc(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=gw[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Sc(new g(...h),{type:d,root:v,attach:p,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_ instanceof dt?_.__r3f.attach="geometry":_ instanceof nr&&(_.__r3f.attach="material")),S!=="inject"&&qy(_,m),_}function r(d,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?Yy(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(v=d.__r3f)==null||v.objects.push(h),h.__r3f||Sc(h,{}),h.__r3f.parent=d,Jx(h),wc(h)}}function i(d,h,p){let m=!1;if(h){var v,S;if((v=h.__r3f)!=null&&v.attach)Yy(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const _=d.children.filter(x=>x!==h),g=_.indexOf(p);d.children=[..._.slice(0,g),h,..._.slice(g)],m=!0}m||(S=d.__r3f)==null||S.objects.push(h),h.__r3f||Sc(h,{}),h.__r3f.parent=d,Jx(h),wc(h)}}function s(d,h,p=!1){d&&[...d].forEach(m=>o(h,m,p))}function o(d,h,p){if(h){var m,v,S;if(h.__r3f&&(h.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(M=>M!==h)),(v=h.__r3f)!=null&&v.attach)rA(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var _;d.remove(h),(_=h.__r3f)!=null&&_.root&&v6(h.__r3f.root,h)}const x=(S=h.__r3f)==null?void 0:S.primitive,w=p===void 0?h.dispose!==null&&!x:p;if(!x){var g;s((g=h.__r3f)==null?void 0:g.objects,h,w),s(h.children,h,w)}delete h.__r3f,w&&h.dispose&&h.type!=="Scene"&&Kx.unstable_scheduleCallback(Kx.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),wc(d)}}function a(d,h,p,m){var v;const S=(v=d.__r3f)==null?void 0:v.parent;if(!S)return;const _=t(h,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&r(_,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>r(_,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(S,d),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(S,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:i6({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const m=d.getState().scene;m.__r3f&&i(m,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,m){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:_=[],children:g,...x}=m,{args:w=[],children:M,...A}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((I,L)=>I!==w[L]))return[!0];const b=pL(d,x,A,!0);return b.changes.length?[!1,b]:null}},commitUpdate(d,[h,p],m,v,S,_){h?a(d,m,S,_):qy(d,p)},commitMount(d,h,p,m){var v;const S=(v=d.__r3f)!=null?v:{};d.raycast&&S.handlers&&S.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Sc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:m}=(h=d.__r3f)!=null?h:{};p&&m&&rA(m,d,p),d.isObject3D&&(d.visible=!1),wc(d)},unhideInstance(d,h){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&Yy(v,d,m),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),wc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():zc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jt.fun(performance.now)?performance.now:Jt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:qy}}var Qb,eA;const Xy=n=>"colorSpace"in n||"outputColorSpace"in n,lL=()=>{var n;return(n=gw.ColorManagement)!=null?n:null},cL=n=>n&&n.isOrthographicCamera,u6=n=>n&&n.hasOwnProperty("current"),lh=typeof window<"u"&&((Qb=window.document)!=null&&Qb.createElement||((eA=window.navigator)==null?void 0:eA.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function uL(n){const e=D.useRef(n);return lh(()=>void(e.current=n),[n]),e}function f6({set:n}){return lh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class fL extends D.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fL.getDerivedStateFromError=()=>({error:!0});const dL="__default",tA=new Map,d6=n=>n&&!!n.memoized&&!!n.changes;function hL(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Sf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Jt={obj:n=>n===Object(n)&&!Jt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Jt.str(n)||Jt.num(n))return n===e;const s=Jt.obj(n);if(s&&r==="reference")return n===e;const o=Jt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Jt.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Jt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function h6(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function p6(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Sc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Zx(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const nA=/-\d+$/;function Yy(n,e,t){if(Jt.str(t)){if(nA.test(t)){const s=t.replace(nA,""),{target:o,key:a}=Zx(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=Zx(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function rA(n,e,t){var r,i;if(Jt.str(t)){const{target:s,key:o}=Zx(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function pL(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var d;const h=(d=n==null?void 0:n.__r3f)!=null?d:{},p=Object.entries(i),m=[];if(u){const S=Object.keys(l);for(let _=0;_<S.length;_++)i.hasOwnProperty(S[_])||p.unshift([S[_],dL+"remove"])}p.forEach(([S,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&S==="object"||Jt.equ(_,l[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return m.push([S,_,!0,[]]);let x=[];S.includes("-")&&(x=S.split("-")),m.push([S,_,!1,x]);for(const w in i){const M=i[w];w.startsWith(`${S}-`)&&m.push([w,M,!1,w.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:m}}function qy(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=d6(e)?e:pL(n,e),d=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[m,v,S,_]=u[p];if(Xy(n)){const M="srgb",A="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?M:A):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?M:A)}let g=n,x=g[m];if(_.length&&(x=_.reduce((w,M)=>w[M],n),!(x&&x.set))){const[w,...M]=_.reverse();g=M.reverse().reduce((A,b)=>A[b],n),m=w}if(v===dL+"remove")if(g.constructor){let w=tA.get(g.constructor);w||(w=new g.constructor,tA.set(g.constructor,w)),v=w[m]}else v=0;if(S)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof sl)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&x.constructor===v.constructor)x.copy(v);else if(v!==void 0){const w=x instanceof Ne;!w&&x.setScalar?x.setScalar(v):x instanceof sl&&v instanceof sl?x.mask=v.mask:x.set(v),!lL()&&!a.linear&&w&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof rn&&g[m].format===Fr&&g[m].type===Es){const w=g[m];Xy(w)&&Xy(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}wc(n)}if(s.parent&&a.internal&&n.raycast&&d!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&Jx(n),n}function wc(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Jx(n){n.onUpdate==null||n.onUpdate(n)}function m6(n,e){n.manual||(cL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _m(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function g6(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return zc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return zc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return zc.ContinuousEventPriority;default:return zc.DefaultEventPriority}}function mL(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function v6(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{mL(t.capturedMap,e,r,i)})}function y6(n){function e(l){const{internal:u}=n.getState(),d=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function r(l,u){const d=n.getState(),h=new Set,p=[],m=u?u(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const x=Sf(m[g]);x&&(x.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const x=Sf(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var w;x.events.compute==null||x.events.compute(l,x,(w=x.previousRoot)==null?void 0:w.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(v).sort((g,x)=>{const w=Sf(g.object),M=Sf(x.object);return!w||!M?g.distance-x.distance:M.events.priority-w.events.priority||g.distance-x.distance}).filter(g=>{const x=_m(g);return h.has(x)?!1:(h.add(x),!0)});d.events.filter&&(S=d.events.filter(S,d));for(const g of S){let x=g.object;for(;x;){var _;(_=x.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())h.has(_m(g.intersection))||p.push(g.intersection);return p}function i(l,u,d,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const S=Sf(v.object)||p,{raycaster:_,pointer:g,camera:x,internal:w}=S,M=new U(g.x,g.y,0).unproject(x),A=P=>{var k,V;return(k=(V=w.capturedMap.get(P))==null?void 0:V.has(v.eventObject))!=null?k:!1},b=P=>{const k={intersection:v,target:u.target};w.capturedMap.has(P)?w.capturedMap.get(P).set(v.eventObject,k):w.capturedMap.set(P,new Map([[v.eventObject,k]])),u.target.setPointerCapture(P)},I=P=>{const k=w.capturedMap.get(P);k&&mL(w.capturedMap,v.eventObject,k,P)};let L={};for(let P in u){let k=u[P];typeof k!="function"&&(L[P]=k)}let R={...v,...L,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:M,ray:_.ray,camera:x,stopPropagation(){const P="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!P||P.has(v.eventObject))&&(R.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(k=>k.eventObject===v.eventObject))){const k=l.slice(0,l.indexOf(v));s([...k,v])}},target:{hasPointerCapture:A,setPointerCapture:b,releasePointerCapture:I},currentTarget:{hasPointerCapture:A,setPointerCapture:b,releasePointerCapture:I},nativeEvent:u};if(h(R),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const d of u.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(_m(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let d=0;d<u.length;d++){const h=u[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=n.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(d,m?t:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=_.map(w=>w.eventObject)),v&&!_.length&&g<=2&&(o(d,p.interaction),h&&h(d)),m&&s(_);function x(w){const M=w.eventObject,A=M.__r3f,b=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const I=_m(w),L=p.hovered.get(I);L?L.stopped&&w.stopPropagation():(p.hovered.set(I,w),b.onPointerOver==null||b.onPointerOver(w),b.onPointerEnter==null||b.onPointerEnter(w))}b.onPointerMove==null||b.onPointerMove(w)}else{const I=b[l];I?(!v||p.initialHits.includes(M))&&(o(d,p.interaction.filter(L=>!p.initialHits.includes(L))),I(w)):v&&p.initialHits.includes(M)&&o(d,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(_,d,g,x)}}return{handlePointer:a}}const gL=n=>!!(n!=null&&n.render),vL=D.createContext(null),_6=(n,e)=>{const t=mw((a,l)=>{const u=new U,d=new U,h=new U;function p(g=l().camera,x=d,w=l().size){const{width:M,height:A,top:b,left:I}=w,L=M/A;x instanceof U?h.copy(x):h.set(...x);const R=g.getWorldPosition(u).distanceTo(h);if(cL(g))return{width:M/g.zoom,height:A/g.zoom,top:b,left:I,factor:1,distance:R,aspect:L};{const P=g.fov*Math.PI/180,k=2*Math.tan(P/2)*R,V=k*(M/A);return{width:V,height:k,top:b,left:I,factor:M/V,distance:R,aspect:L}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),S=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fw,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,w,M,A)=>{const b=l().camera,I={width:g,height:x,top:M||0,left:A||0,updateStyle:w};a(L=>({size:I,viewport:{...L.viewport,...p(b,d,I)}}))},setDpr:g=>a(x=>{const w=hL(g);return{viewport:{...x.viewport,dpr:w,initialDpr:x.viewport.initialDpr||w}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:D.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,w)=>{const M=l().internal;return M.priority=M.priority+(x>0?1:0),M.subscribers.push({ref:g,priority:x,store:w}),M.subscribers=M.subscribers.sort((A,b)=>A.priority-b.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(x>0?1:0),A.subscribers=A.subscribers.filter(b=>b.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:d,set:h}=t.getState();if(l!==i||u.dpr!==s){var p;i=l,s=u.dpr,m6(a,l),d.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let xm,x6=new Set,S6=new Set,w6=new Set;function Ky(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function wf(n,e){switch(n){case"before":return Ky(x6,e);case"after":return Ky(S6,e);case"tail":return Ky(w6,e)}}let Zy,Jy;function Qy(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Zy=e.internal.subscribers,xm=0;xm<Zy.length;xm++)Jy=Zy[xm],Jy.ref.current(Jy.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function E6(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,wf("before",l);for(const d of n.values()){var u;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=Qy(l,i))}if(wf("after",l),t===0)return wf("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var d;if(!l)return n.forEach(h=>o(h.store.getState()),u);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,d,h){if(u&&wf("before",l),d)Qy(l,d,h);else for(const p of n.values())Qy(l,p.store.getState());u&&wf("after",l)}return{loop:s,invalidate:o,advance:a}}function yL(){const n=D.useContext(vL);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function pc(n=t=>t,e){return yL()(n,e)}function M6(n,e=0){const t=yL(),r=t.getState().internal.subscribe,i=uL(n);return lh(()=>r(i,e,t),[e,r,t]),null}function _L(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,h6(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function ch(n,e,t,r){const i=Array.isArray(e)?e:[e],s=o6(_L(t,r),[n,...i],{equal:Jt.equ});return Array.isArray(e)?s:s[0]}ch.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return a6(_L(t),[n,...r])};ch.clear=function(n,e){const t=Array.isArray(e)?e:[e];return l6([n,...t])};const pu=new Map,{invalidate:iA,advance:sA}=E6(pu),{reconciler:Rg,applyProps:mc}=c6(pu,g6),gc={objects:"shallow",strict:!1},T6=(n,e)=>{const t=typeof n=="function"?n(e):n;return gL(t)?t:new VS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function b6(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function A6(n){const e=pu.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||_6(iA,sA),o=t||Rg.createContainer(s,zc.ConcurrentRoot,null,!1,null,"",i,null);e||pu.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(d={}){let{gl:h,size:p,scene:m,events:v,onCreated:S,shadows:_=!1,linear:g=!1,flat:x=!1,legacy:w=!1,orthographic:M=!1,frameloop:A="always",dpr:b=[1,2],performance:I,raycaster:L,camera:R,onPointerMissed:P}=d,k=s.getState(),V=k.gl;k.gl||k.set({gl:V=T6(h,n)});let H=k.raycaster;H||k.set({raycaster:H=new Q3});const{params:j,...q}=L||{};if(Jt.equ(q,H,gc)||mc(H,{...q}),Jt.equ(j,H.params,gc)||mc(H,{params:{...H.params,...j}}),!k.camera||k.camera===u&&!Jt.equ(u,R,gc)){u=R;const oe=R instanceof jd,W=oe?R:M?new io(0,0,0,0,.1,1e3):new Sn(75,0,.1,1e3);oe||(W.position.z=5,R&&mc(W,R),!k.camera&&!(R!=null&&R.rotation)&&W.lookAt(0,0,0)),k.set({camera:W})}if(!k.scene){let oe;m instanceof Ag?oe=m:(oe=new Ag,m&&mc(oe,m)),k.set({scene:Sc(oe)})}if(!k.xr){const oe=(le,Te)=>{const we=s.getState();we.frameloop!=="never"&&sA(le,!0,we,Te)},W=()=>{const le=s.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?oe:null),le.gl.xr.isPresenting||iA(le)},he={connect(){const le=s.getState().gl;le.xr.addEventListener("sessionstart",W),le.xr.addEventListener("sessionend",W)},disconnect(){const le=s.getState().gl;le.xr.removeEventListener("sessionstart",W),le.xr.removeEventListener("sessionend",W)}};V.xr&&he.connect(),k.set({xr:he})}if(V.shadowMap){const oe=V.shadowMap.enabled,W=V.shadowMap.type;if(V.shadowMap.enabled=!!_,Jt.boo(_))V.shadowMap.type=Wf;else if(Jt.str(_)){var Z;const he={basic:sP,percentage:u0,soft:Wf,variance:Hi};V.shadowMap.type=(Z=he[_])!=null?Z:Wf}else Jt.obj(_)&&Object.assign(V.shadowMap,_);(oe!==V.shadowMap.enabled||W!==V.shadowMap.type)&&(V.shadowMap.needsUpdate=!0)}const ee=lL();ee&&("enabled"in ee?ee.enabled=!w:"legacyMode"in ee&&(ee.legacyMode=w)),mc(V,{outputEncoding:g?3e3:3001,toneMapping:x?Yi:f0}),k.legacy!==w&&k.set(()=>({legacy:w})),k.linear!==g&&k.set(()=>({linear:g})),k.flat!==x&&k.set(()=>({flat:x})),h&&!Jt.fun(h)&&!gL(h)&&!Jt.equ(h,V,gc)&&mc(V,h),v&&!k.events.handlers&&k.set({events:v(s)});const X=b6(n,p);return Jt.equ(X,k.size,gc)||k.setSize(X.width,X.height,X.updateStyle,X.top,X.left),b&&k.viewport.dpr!==hL(b)&&k.setDpr(b),k.frameloop!==A&&k.setFrameloop(A),k.onPointerMissed||k.set({onPointerMissed:P}),I&&!Jt.equ(I,k.performance,gc)&&k.set(oe=>({performance:{...oe.performance,...I}})),a=S,l=!0,this},render(d){return l||this.configure(),Rg.updateContainer(D.createElement(C6,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){xL(n)}}}function C6({store:n,children:e,onCreated:t,rootElement:r}){return lh(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),D.createElement(vL.Provider,{value:n},e)}function xL(n,e){const t=pu.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Rg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),p6(i),pu.delete(n),e&&e(n)}catch{}},500)})}}Rg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:D.version});function Qx(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?r=setTimeout(l,e-d):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var d=t&&!r;return r||(r=setTimeout(l,e)),d&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}Qx.debounce=Qx;var R6=Qx;const oA=Sl(R6);function P6(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=D.useRef(!1);D.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,m,v]=D.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:w,top:M,width:A,height:b,bottom:I,right:L,x:R,y:P}=l.current.element.getBoundingClientRect(),k={left:w,top:M,width:A,height:b,bottom:I,right:L,x:R,y:P};l.current.element instanceof HTMLElement&&i&&(k.height=l.current.element.offsetHeight,k.width=l.current.element.offsetWidth),Object.freeze(k),h.current&&!O6(l.current.lastBounds,k)&&a(l.current.lastBounds=k)};return[x,d?oA(x,d):x,u?oA(x,u):x]},[a,i,u,d]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=SL(x),_())};return I6(v,!!t),L6(m),D.useEffect(()=>{S(),_()},[t,v,m]),D.useEffect(()=>S,[]),[g,o,p]}function L6(n){D.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function I6(n,e){D.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SL(n.parentElement)]}const D6=["x","y","top","bottom","left","right","width","height"],O6=(n,e)=>D6.every(t=>n[t]===e[t]);var k6=Object.defineProperty,N6=Object.defineProperties,U6=Object.getOwnPropertyDescriptors,aA=Object.getOwnPropertySymbols,F6=Object.prototype.hasOwnProperty,z6=Object.prototype.propertyIsEnumerable,lA=(n,e,t)=>e in n?k6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cA=(n,e)=>{for(var t in e||(e={}))F6.call(e,t)&&lA(n,t,e[t]);if(aA)for(var t of aA(e))z6.call(e,t)&&lA(n,t,e[t]);return n},B6=(n,e)=>N6(n,U6(e));function wL(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=wL(r,e,t);if(i)return i;r=e?null:r.sibling}}function EL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const vw=EL(D.createContext(null));class ML extends D.Component{render(){return D.createElement(vw.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:uA,ReactCurrentDispatcher:fA}=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function H6(){const n=D.useContext(vw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=D.useId();return D.useMemo(()=>{for(const r of[uA==null?void 0:uA.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=wL(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function V6(){var n,e;const t=H6(),[r]=D.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==vw&&!r.has(s)&&r.set(s,(e=fA==null?void 0:fA.current)==null?void 0:e.readContext(EL(s))),i=i.return}return r}function G6(){const n=V6();return D.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>D.createElement(e,null,D.createElement(t.Provider,B6(cA({},r),{value:n.get(t)}))),e=>D.createElement(ML,cA({},e))),[n])}const e_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function W6(n){const{handlePointer:e}=y6(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(e_).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=e_[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=e_[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const $6=D.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=W6,eventSource:a,eventPrefix:l,shadows:u,linear:d,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:_,raycaster:g,camera:x,onPointerMissed:w,onCreated:M,...A},b){D.useMemo(()=>aL(QV),[]);const I=G6(),[L,R]=P6({scroll:!0,debounce:{scroll:50,resize:0},...r}),P=D.useRef(null),k=D.useRef(null);D.useImperativeHandle(b,()=>P.current);const V=uL(w),[H,j]=D.useState(!1),[q,Z]=D.useState(!1);if(H)throw H;if(q)throw q;const ee=D.useRef(null);lh(()=>{const K=P.current;R.width>0&&R.height>0&&K&&(ee.current||(ee.current=A6(K)),ee.current.configure({gl:s,events:o,shadows:u,linear:d,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:_,raycaster:g,camera:x,size:R,onPointerMissed:(...X)=>V.current==null?void 0:V.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(a?u6(a)?a.current:a:k.current),l&&X.setEvents({compute:(oe,W)=>{const he=oe[l+"X"],le=oe[l+"Y"];W.pointer.set(he/W.size.width*2-1,-(le/W.size.height)*2+1),W.raycaster.setFromCamera(W.pointer,W.camera)}}),M==null||M(X)}}),ee.current.render(D.createElement(I,null,D.createElement(fL,{set:Z},D.createElement(D.Suspense,{fallback:D.createElement(f6,{set:j})},e)))))}),D.useEffect(()=>{const K=P.current;if(K)return()=>xL(K)},[]);const F=a?"none":"auto";return D.createElement("div",wn({ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},A),D.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},D.createElement("canvas",{ref:P,style:{display:"block"}},t)))}),j6=D.forwardRef(function(e,t){return D.createElement(ML,null,D.createElement($6,wn({},e,{ref:t})))});let Ef=0;const X6=mw(n=>(Fc.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Ef)/(r-Ef)*100})},Fc.onLoad=()=>{n({active:!1})},Fc.onError=e=>n(t=>({errors:[...t.errors,e]})),Fc.onProgress=(e,t,r)=>{t===r&&(Ef=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Ef)/(r-Ef)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Y6(n,e,t){return Math.max(e,Math.min(n,t))}const pr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function dA(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function hA(n,e,t,r=.15){return r===0?Y6(n,e,t):n<e?-dA(e-n,t-e,r)+e:n>t?+dA(n-t,t-e,r)+t:n}function q6(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[hA(e,s,o,r),hA(t,a,l,i)]}function K6(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z6(n){var e=K6(n,"string");return typeof e=="symbol"?e:String(e)}function kr(n,e,t){return e=Z6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pA(Object(t),!0).forEach(function(r){kr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const TL={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function mA(n){return n?n[0].toUpperCase()+n.slice(1):""}const J6=["enter","leave"];function Q6(n=!1,e){return n&&!J6.includes(e)}function e8(n,e="",t=!1){const r=TL[n],i=r&&r[e]||e;return"on"+mA(n)+mA(i)+(Q6(t,i)?"Capture":"")}const t8=["gotpointercapture","lostpointercapture"];function n8(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=t8.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function r8(n,e=""){const t=TL[n],r=t&&t[e]||e;return n+r}function A0(n){return"touches"in n}function bL(n){return A0(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function i8(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function s8(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function AL(n){return A0(n)?s8(n)[0]:n}function o8(n){return i8(n).map(e=>e.identifier)}function t_(n){const e=AL(n);return A0(n)?e.identifier:e.pointerId}function gA(n){const e=AL(n);return[e.clientX,e.clientY]}function a8(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function Pg(n,...e){return typeof n=="function"?n(...e):n}function l8(){}function c8(...n){return n.length===0?l8:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function vA(n,e){return Object.assign({},e,n||{})}const u8=32;class f8{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Pg(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,a8(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const b=t._delta.map(Math.abs);pr.addTo(t._distance,b)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:d,values:h}=t;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(a)>=u&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[b,I]=h;p[0]=d[0]!==!1?b-d[0]:0,p[1]=d[1]!==!1?I-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Pg(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[S,_]=t.offset,[[g,x],[w,M]]=t._bounds;t.overflow=[S<g?-1:S>x?1:0,_<w?-1:_>M?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const A=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=q6(t._bounds,t.offset,A),t.delta=pr.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>u8)){t.delta=pr.sub(t.offset,m);const b=t.delta.map(Math.abs);pr.addTo(t.distance,b),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[b[0]/s,b[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(fn(fn(fn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function d8([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class h8 extends f8{constructor(...e){super(...e),kr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=pr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=pr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[bL(e)]:r.axisThreshold;t.axis=d8(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const p8=n=>n,yA=.15,CL={enabled(n=!0){return n},eventOptions(n,e,t){return fn(fn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[yA,yA];case!1:return[0,0];default:return pr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return pr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||p8},threshold(n){return pr.toVector(n,0)}},m8=0,uh=fn(fn({},CL),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=m8){return n},bounds(n={}){if(typeof n=="function")return s=>uh.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),_A={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class g8 extends h8{constructor(...e){super(...e),kr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=uh.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=t_(e),r._pointerActive=!0,this.computeValues(gA(e)),this.computeInitial(),t.preventScrollAxis&&bL(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=t_(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=gA(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=pr.sub(s,t._values),this.computeValues(s)),pr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=t_(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,d]=t._movement,[h,p]=r.swipe.velocity,[m,v]=r.swipe.distance,S=r.swipe.duration;if(t.elapsedTime<S){const _=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);_>h&&Math.abs(u)>m&&(t.swipe[0]=Math.sign(a)),g>p&&Math.abs(d)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,v8(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=_A[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,pr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in _A&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function v8(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const fh=typeof window<"u"&&window.document&&window.document.createElement;function y8(){return fh&&"ontouchstart"in window}function xA(){return y8()||fh&&window.navigator.maxTouchPoints>1}function _8(){return fh&&"onpointerdown"in window}function x8(){return fh&&"exitPointerLock"in window.document}function S8(){try{return"constructor"in GestureEvent}catch{return!1}}const wi={isBrowser:fh,gesture:S8(),touch:xA(),touchscreen:xA(),pointer:_8(),pointerLock:x8()},w8=250,E8=180,M8=.5,T8=50,b8=250,A8=10,SA={mouse:0,touch:0,pen:8},C8=fn(fn({},uh),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&wi.pointerLock,wi.touch&&t?"touch":this.pointerLock?"mouse":wi.pointer&&!i?"pointer":wi.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?w8:void 0,!(!wi.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=pr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=M8,distance:e=T8,duration:t=b8}={}){return{velocity:this.transform(pr.toVector(n)),distance:this.transform(pr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return E8;case!1:return 0;default:return n}},axisThreshold(n){return n?fn(fn({},SA),n):SA},keyboardDisplacement(n=A8){return n}});fn(fn({},CL),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!wi.touch&&wi.gesture)return"gesture";if(wi.touch&&r)return"touch";if(wi.touchscreen){if(wi.pointer)return"pointer";if(wi.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=vA(Pg(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=vA(Pg(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",pr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});fn(fn({},uh),{},{mouseOnly:(n=!0)=>n});fn(fn({},uh),{},{mouseOnly:(n=!0)=>n});const RL=new Map,e1=new Map;function R8(n){RL.set(n.key,n.engine),e1.set(n.key,n.resolver)}const P8={key:"drag",engine:g8,resolver:C8};function L8(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function I8(n,e){if(n==null)return{};var t=L8(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const D8={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=wi.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},O8=["target","eventOptions","window","enabled","transform"];function Km(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Km(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function k8(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=I8(r,O8);if(t.shared=Km({target:i,eventOptions:s,window:o,enabled:a,transform:l},D8),e){const d=e1.get(e);t[e]=Km(fn({shared:t.shared},u),d)}else for(const d in u){const h=e1.get(d);h&&(t[d]=Km(fn({shared:t.shared},u[d]),h))}return t}class PL{constructor(e,t){kr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=r8(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=fn(fn({},l),s);e.addEventListener(a,i,u);const d=()=>{e.removeEventListener(a,i,u),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class N8{constructor(){kr(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class U8{constructor(e){kr(this,"gestures",new Set),kr(this,"_targetEventStore",new PL(this)),kr(this,"gestureEventStores",{}),kr(this,"gestureTimeoutStores",{}),kr(this,"handlers",{}),kr(this,"config",{}),kr(this,"pointerIds",new Set),kr(this,"touchIds",new Set),kr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),F8(this,e)}setEventIds(e){if(A0(e))return this.touchIds=new Set(o8(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=k8(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=wA(r,a.eventOptions,!!i);if(a.enabled){const u=RL.get(o);new u(this,e,o).bind(l)}}const s=wA(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](fn(fn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=c8(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=n8(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function vc(n,e){n.gestures.add(e),n.gestureEventStores[e]=new PL(n,e),n.gestureTimeoutStores[e]=new N8}function F8(n,e){e.drag&&vc(n,"drag"),e.wheel&&vc(n,"wheel"),e.scroll&&vc(n,"scroll"),e.move&&vc(n,"move"),e.pinch&&vc(n,"pinch"),e.hover&&vc(n,"hover")}const wA=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let p=a?r:e8(r,i,d);t&&h&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function z8(n,e={},t,r){const i=$.useMemo(()=>new U8(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),$.useEffect(i.effect.bind(i)),$.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function B8(n,e){return R8(P8),z8({drag:n},e||{},"drag")}const H8=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const d=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());u=p=>{const m=o(p);if(!d(h,m)){const v=h;a(h=m,v)}},l!=null&&l.fireImmediately&&a(h,h)}return i(u)},n(e,t,r)};var Ei=Uint8Array,qo=Uint16Array,t1=Uint32Array,LL=new Ei([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),IL=new Ei([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),V8=new Ei([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DL=function(n,e){for(var t=new qo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new t1(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},OL=DL(LL,2),kL=OL[0],G8=OL[1];kL[28]=258,G8[258]=28;var W8=DL(IL,0),$8=W8[0],n1=new qo(32768);for(var Qt=0;Qt<32768;++Qt){var Fo=(Qt&43690)>>>1|(Qt&21845)<<1;Fo=(Fo&52428)>>>2|(Fo&13107)<<2,Fo=(Fo&61680)>>>4|(Fo&3855)<<4,n1[Qt]=((Fo&65280)>>>8|(Fo&255)<<8)>>>1}var Zf=function(n,e,t){for(var r=n.length,i=0,s=new qo(e);i<r;++i)++s[n[i]-1];var o=new qo(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new qo(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],h=o[n[i]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)a[n1[h]>>>l]=u}else for(a=new qo(r),i=0;i<r;++i)n[i]&&(a[i]=n1[o[n[i]-1]++]>>>15-n[i]);return a},dh=new Ei(288);for(var Qt=0;Qt<144;++Qt)dh[Qt]=8;for(var Qt=144;Qt<256;++Qt)dh[Qt]=9;for(var Qt=256;Qt<280;++Qt)dh[Qt]=7;for(var Qt=280;Qt<288;++Qt)dh[Qt]=8;var NL=new Ei(32);for(var Qt=0;Qt<32;++Qt)NL[Qt]=5;var j8=Zf(dh,9,1),X8=Zf(NL,5,1),n_=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},zi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},r_=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Y8=function(n){return(n/8|0)+(n&7&&1)},q8=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof qo?qo:n instanceof t1?t1:Ei)(t-e);return r.set(n.subarray(e,t)),r},K8=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ei(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ei(r*3));var o=function(we){var Re=e.length;if(we>Re){var Ze=new Ei(Math.max(Re*2,we));Ze.set(e),e=Ze}},a=t.f||0,l=t.p||0,u=t.b||0,d=t.l,h=t.d,p=t.m,m=t.n,v=r*8;do{if(!d){t.f=a=zi(n,l,1);var S=zi(n,l+1,3);if(l+=3,S)if(S==1)d=j8,h=X8,p=9,m=5;else if(S==2){var w=zi(n,l,31)+257,M=zi(n,l+10,15)+4,A=w+zi(n,l+5,31)+1;l+=14;for(var b=new Ei(A),I=new Ei(19),L=0;L<M;++L)I[V8[L]]=zi(n,l+L*3,7);l+=M*3;for(var R=n_(I),P=(1<<R)-1,k=Zf(I,R,1),L=0;L<A;){var V=k[zi(n,l,P)];l+=V&15;var _=V>>>4;if(_<16)b[L++]=_;else{var H=0,j=0;for(_==16?(j=3+zi(n,l,3),l+=2,H=b[L-1]):_==17?(j=3+zi(n,l,7),l+=3):_==18&&(j=11+zi(n,l,127),l+=7);j--;)b[L++]=H}}var q=b.subarray(0,w),Z=b.subarray(w);p=n_(q),m=n_(Z),d=Zf(q,p,1),h=Zf(Z,m,1)}else throw"invalid block type";else{var _=Y8(l)+4,g=n[_-4]|n[_-3]<<8,x=_+g;if(x>r){if(s)throw"unexpected EOF";break}i&&o(u+g),e.set(n.subarray(_,x),u),t.b=u+=g,t.p=l=x*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var ee=(1<<p)-1,F=(1<<m)-1,K=l;;K=l){var H=d[r_(n,l)&ee],X=H>>>4;if(l+=H&15,l>v){if(s)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(X<256)e[u++]=X;else if(X==256){K=l,d=null;break}else{var oe=X-254;if(X>264){var L=X-257,W=LL[L];oe=zi(n,l,(1<<W)-1)+kL[L],l+=W}var he=h[r_(n,l)&F],le=he>>>4;if(!he)throw"invalid distance";l+=he&15;var Z=$8[le];if(le>3){var W=IL[le];Z+=r_(n,l)&(1<<W)-1,l+=W}if(l>v){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var Te=u+oe;u<Te;u+=4)e[u]=e[u-Z],e[u+1]=e[u+1-Z],e[u+2]=e[u+2-Z],e[u+3]=e[u+3-Z];u=Te}}t.l=d,t.p=K,t.b=u,d&&(a=1,t.m=p,t.d=h,t.n=m)}while(!a);return u==e.length?e:q8(e,0,u)},Z8=new Ei(0),J8=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Q8(n,e){return K8((J8(n),n.subarray(2,-4)),e)}var eG=typeof TextDecoder<"u"&&new TextDecoder,tG=0;try{eG.decode(Z8,{stream:!0}),tG=1}catch{}var nG=Object.defineProperty,rG=(n,e,t)=>e in n?nG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>(rG(n,typeof e!="symbol"?e+"":e,t),t);const EA=(n,e)=>(n%e+e)%e;class iG extends Rs{constructor(e,t){super(),gt(this,"object"),gt(this,"domElement"),gt(this,"enabled",!0),gt(this,"target",new U),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:Ys.ROTATE,MIDDLE:Ys.DOLLY,RIGHT:Ys.PAN}),gt(this,"touches",{ONE:qs.ROTATE,TWO:qs.DOLLY_PAN}),gt(this,"target0"),gt(this,"position0"),gt(this,"zoom0"),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle"),gt(this,"getAzimuthalAngle"),gt(this,"setPolarAngle"),gt(this,"setAzimuthalAngle"),gt(this,"getDistance"),gt(this,"listenToKeyEvents"),gt(this,"saveState"),gt(this,"reset"),gt(this,"update"),gt(this,"connect"),gt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Y=>{let ue=EA(Y,2*Math.PI),Ee=d.phi;Ee<0&&(Ee+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Me=Math.abs(ue-Ee);2*Math.PI-Me<Me&&(ue<Ee?ue+=2*Math.PI:Ee+=2*Math.PI),h.phi=ue-Ee,r.update()},this.setAzimuthalAngle=Y=>{let ue=EA(Y,2*Math.PI),Ee=d.theta;Ee<0&&(Ee+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Me=Math.abs(ue-Ee);2*Math.PI-Me<Me&&(ue<Ee?ue+=2*Math.PI:Ee+=2*Math.PI),h.theta=ue-Ee,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",O),this._domElementKeyEvents=Y},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Y=new U,ue=new kn().setFromUnitVectors(e.up,new U(0,1,0)),Ee=ue.clone().invert(),Me=new U,De=new kn,nt=2*Math.PI;return function(){const J=r.object.position;Y.copy(J).sub(r.target),Y.applyQuaternion(ue),d.setFromVector3(Y),r.autoRotate&&l===a.NONE&&V(P()),r.enableDamping?(d.theta+=h.theta*r.dampingFactor,d.phi+=h.phi*r.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let Pe=r.minAzimuthAngle,se=r.maxAzimuthAngle;return isFinite(Pe)&&isFinite(se)&&(Pe<-Math.PI?Pe+=nt:Pe>Math.PI&&(Pe-=nt),se<-Math.PI?se+=nt:se>Math.PI&&(se-=nt),Pe<=se?d.theta=Math.max(Pe,Math.min(se,d.theta)):d.theta=d.theta>(Pe+se)/2?Math.max(Pe,d.theta):Math.min(se,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(r.minDistance,Math.min(r.maxDistance,d.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),Y.setFromSpherical(d),Y.applyQuaternion(Ee),J.copy(r.target).add(Y),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),m.set(0,0,0)),p=1,v||Me.distanceToSquared(r.object.position)>u||8*(1-De.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Me.copy(r.object.position),De.copy(r.object.quaternion),v=!1,!0):!1}})(),this.connect=Y=>{Y===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Y,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Se),r.domElement.addEventListener("pointerdown",$e),r.domElement.addEventListener("pointercancel",Je),r.domElement.addEventListener("wheel",N)},this.dispose=()=>{var Y,ue,Ee,Me,De,nt;(Y=r.domElement)==null||Y.removeEventListener("contextmenu",Se),(ue=r.domElement)==null||ue.removeEventListener("pointerdown",$e),(Ee=r.domElement)==null||Ee.removeEventListener("pointercancel",Je),(Me=r.domElement)==null||Me.removeEventListener("wheel",N),(De=r.domElement)==null||De.ownerDocument.removeEventListener("pointermove",Ue),(nt=r.domElement)==null||nt.ownerDocument.removeEventListener("pointerup",ze),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",O)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,d=new qx,h=new qx;let p=1;const m=new U;let v=!1;const S=new ve,_=new ve,g=new ve,x=new ve,w=new ve,M=new ve,A=new ve,b=new ve,I=new ve,L=[],R={};function P(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function V(Y){r.reverseOrbit?h.theta+=Y:h.theta-=Y}function H(Y){r.reverseOrbit?h.phi+=Y:h.phi-=Y}const j=(()=>{const Y=new U;return function(Ee,Me){Y.setFromMatrixColumn(Me,0),Y.multiplyScalar(-Ee),m.add(Y)}})(),q=(()=>{const Y=new U;return function(Ee,Me){r.screenSpacePanning===!0?Y.setFromMatrixColumn(Me,1):(Y.setFromMatrixColumn(Me,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(Ee),m.add(Y)}})(),Z=(()=>{const Y=new U;return function(Ee,Me){const De=r.domElement;if(De&&r.object instanceof Sn&&r.object.isPerspectiveCamera){const nt=r.object.position;Y.copy(nt).sub(r.target);let Rt=Y.length();Rt*=Math.tan(r.object.fov/2*Math.PI/180),j(2*Ee*Rt/De.clientHeight,r.object.matrix),q(2*Me*Rt/De.clientHeight,r.object.matrix)}else De&&r.object instanceof io&&r.object.isOrthographicCamera?(j(Ee*(r.object.right-r.object.left)/r.object.zoom/De.clientWidth,r.object.matrix),q(Me*(r.object.top-r.object.bottom)/r.object.zoom/De.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ee(Y){r.object instanceof Sn&&r.object.isPerspectiveCamera?p/=Y:r.object instanceof io&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*Y)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(Y){r.object instanceof Sn&&r.object.isPerspectiveCamera?p*=Y:r.object instanceof io&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/Y)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function K(Y){S.set(Y.clientX,Y.clientY)}function X(Y){A.set(Y.clientX,Y.clientY)}function oe(Y){x.set(Y.clientX,Y.clientY)}function W(Y){_.set(Y.clientX,Y.clientY),g.subVectors(_,S).multiplyScalar(r.rotateSpeed);const ue=r.domElement;ue&&(V(2*Math.PI*g.x/ue.clientHeight),H(2*Math.PI*g.y/ue.clientHeight)),S.copy(_),r.update()}function he(Y){b.set(Y.clientX,Y.clientY),I.subVectors(b,A),I.y>0?ee(k()):I.y<0&&F(k()),A.copy(b),r.update()}function le(Y){w.set(Y.clientX,Y.clientY),M.subVectors(w,x).multiplyScalar(r.panSpeed),Z(M.x,M.y),x.copy(w),r.update()}function Te(Y){Y.deltaY<0?F(k()):Y.deltaY>0&&ee(k()),r.update()}function we(Y){let ue=!1;switch(Y.code){case r.keys.UP:Z(0,r.keyPanSpeed),ue=!0;break;case r.keys.BOTTOM:Z(0,-r.keyPanSpeed),ue=!0;break;case r.keys.LEFT:Z(r.keyPanSpeed,0),ue=!0;break;case r.keys.RIGHT:Z(-r.keyPanSpeed,0),ue=!0;break}ue&&(Y.preventDefault(),r.update())}function Re(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),ue=.5*(L[0].pageY+L[1].pageY);S.set(Y,ue)}}function Ze(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),ue=.5*(L[0].pageY+L[1].pageY);x.set(Y,ue)}}function Qe(){const Y=L[0].pageX-L[1].pageX,ue=L[0].pageY-L[1].pageY,Ee=Math.sqrt(Y*Y+ue*ue);A.set(0,Ee)}function xt(){r.enableZoom&&Qe(),r.enablePan&&Ze()}function Ke(){r.enableZoom&&Qe(),r.enableRotate&&Re()}function G(Y){if(L.length==1)_.set(Y.pageX,Y.pageY);else{const Ee=fe(Y),Me=.5*(Y.pageX+Ee.x),De=.5*(Y.pageY+Ee.y);_.set(Me,De)}g.subVectors(_,S).multiplyScalar(r.rotateSpeed);const ue=r.domElement;ue&&(V(2*Math.PI*g.x/ue.clientHeight),H(2*Math.PI*g.y/ue.clientHeight)),S.copy(_)}function _e(Y){if(L.length==1)w.set(Y.pageX,Y.pageY);else{const ue=fe(Y),Ee=.5*(Y.pageX+ue.x),Me=.5*(Y.pageY+ue.y);w.set(Ee,Me)}M.subVectors(w,x).multiplyScalar(r.panSpeed),Z(M.x,M.y),x.copy(w)}function pe(Y){const ue=fe(Y),Ee=Y.pageX-ue.x,Me=Y.pageY-ue.y,De=Math.sqrt(Ee*Ee+Me*Me);b.set(0,De),I.set(0,Math.pow(b.y/A.y,r.zoomSpeed)),ee(I.y),A.copy(b)}function be(Y){r.enableZoom&&pe(Y),r.enablePan&&_e(Y)}function ye(Y){r.enableZoom&&pe(Y),r.enableRotate&&G(Y)}function $e(Y){var ue,Ee;r.enabled!==!1&&(L.length===0&&((ue=r.domElement)==null||ue.ownerDocument.addEventListener("pointermove",Ue),(Ee=r.domElement)==null||Ee.ownerDocument.addEventListener("pointerup",ze)),Le(Y),Y.pointerType==="touch"?ae(Y):yt(Y))}function Ue(Y){r.enabled!==!1&&(Y.pointerType==="touch"?xe(Y):Bt(Y))}function ze(Y){var ue,Ee,Me;Ve(Y),L.length===0&&((ue=r.domElement)==null||ue.releasePointerCapture(Y.pointerId),(Ee=r.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",Ue),(Me=r.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",ze)),r.dispatchEvent(o),l=a.NONE}function Je(Y){Ve(Y)}function yt(Y){let ue;switch(Y.button){case 0:ue=r.mouseButtons.LEFT;break;case 1:ue=r.mouseButtons.MIDDLE;break;case 2:ue=r.mouseButtons.RIGHT;break;default:ue=-1}switch(ue){case Ys.DOLLY:if(r.enableZoom===!1)return;X(Y),l=a.DOLLY;break;case Ys.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;oe(Y),l=a.PAN}else{if(r.enableRotate===!1)return;K(Y),l=a.ROTATE}break;case Ys.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;K(Y),l=a.ROTATE}else{if(r.enablePan===!1)return;oe(Y),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Bt(Y){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;W(Y);break;case a.DOLLY:if(r.enableZoom===!1)return;he(Y);break;case a.PAN:if(r.enablePan===!1)return;le(Y);break}}function N(Y){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Y.preventDefault(),r.dispatchEvent(s),Te(Y),r.dispatchEvent(o))}function O(Y){r.enabled===!1||r.enablePan===!1||we(Y)}function ae(Y){switch(Ie(Y),L.length){case 1:switch(r.touches.ONE){case qs.ROTATE:if(r.enableRotate===!1)return;Re(),l=a.TOUCH_ROTATE;break;case qs.PAN:if(r.enablePan===!1)return;Ze(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case qs.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;xt(),l=a.TOUCH_DOLLY_PAN;break;case qs.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ke(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function xe(Y){switch(Ie(Y),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;G(Y),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;_e(Y),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;be(Y),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ye(Y),r.update();break;default:l=a.NONE}}function Se(Y){r.enabled!==!1&&Y.preventDefault()}function Le(Y){L.push(Y)}function Ve(Y){delete R[Y.pointerId];for(let ue=0;ue<L.length;ue++)if(L[ue].pointerId==Y.pointerId){L.splice(ue,1);return}}function Ie(Y){let ue=R[Y.pointerId];ue===void 0&&(ue=new ve,R[Y.pointerId]=ue),ue.set(Y.pageX,Y.pageY)}function fe(Y){const ue=Y.pointerId===L[0].pointerId?L[1]:L[0];return R[ue.pointerId]}t!==void 0&&this.connect(t),this.update()}}let sG=class extends iG{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Ys.PAN,this.mouseButtons.RIGHT=Ys.ROTATE,this.touches.ONE=qs.PAN,this.touches.TWO=qs.DOLLY_ROTATE}};function UL(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function oG(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let u=0;u<a;++u){const d=o[u+1],h=s[a-u],p=i[u]/(d+h);i[u]=l+d*p,l=h*p}i[a]=l}return i}function aG(n,e,t,r){const i=UL(n,r,e),s=oG(i,r,n,e),o=new It(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],u=s[a],d=l.w*u;o.x+=l.x*d,o.y+=l.y*d,o.z+=l.z*d,o.w+=l.w*u}return o}function lG(n,e,t,r,i){const s=[];for(let h=0;h<=t;++h)s[h]=0;const o=[];for(let h=0;h<=r;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=t;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),u=s.slice(0);for(let h=1;h<=t;++h){l[h]=e-i[n+1-h],u[h]=i[n+h]-e;let p=0;for(let m=0;m<h;++m){const v=u[m+1],S=l[h-m];a[h][m]=v+S;const _=a[m][h-1]/a[h][m];a[m][h]=p+v*_,p=S*_}a[h][h]=p}for(let h=0;h<=t;++h)o[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,m=1;const v=[];for(let S=0;S<=t;++S)v[S]=s.slice(0);v[0][0]=1;for(let S=1;S<=r;++S){let _=0;const g=h-S,x=t-S;h>=S&&(v[m][0]=v[p][0]/a[x+1][g],_=v[m][0]*a[g][x]);const w=g>=-1?1:-g,M=h-1<=x?S-1:t-h;for(let b=w;b<=M;++b)v[m][b]=(v[p][b]-v[p][b-1])/a[x+1][g+b],_+=v[m][b]*a[g+b][x];h<=x&&(v[m][S]=-v[p][S-1]/a[x+1][h],_+=v[m][S]*a[h][x]),o[S][h]=_;const A=p;p=m,m=A}}let d=t;for(let h=1;h<=r;++h){for(let p=0;p<=t;++p)o[h][p]*=d;d*=t-h}return o}function cG(n,e,t,r,i){const s=i<n?i:n,o=[],a=UL(n,r,e),l=lG(a,r,n,s,e),u=[];for(let d=0;d<t.length;++d){const h=t[d].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[d]=h}for(let d=0;d<=s;++d){const h=u[a-n].clone().multiplyScalar(l[d][0]);for(let p=1;p<=n;++p)h.add(u[a-n+p].clone().multiplyScalar(l[d][p]));o[d]=h}for(let d=s+1;d<=i+1;++d)o[d]=new It(0,0,0);return o}function uG(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function fG(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new U(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(uG(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function dG(n,e,t,r,i){const s=cG(n,e,t,r,i);return fG(s)}class MA extends Ri{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new It(a.x,a.y,a.z,a.w)}}getPoint(e,t){const r=t||new U,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=aG(this.degree,this.knots,this.controlPoints,i);return s.w!=1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t){const r=t||new U,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=dG(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let bt,bn,Or;class yw extends Wr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?hu.extractUrlBase(e):s.path,a=new bs(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},r,i)}parse(e,t){if(yG(e))bt=new vG().parse(e);else{const i=HL(e);if(!_G(i))throw new Error("THREE.FBXLoader: Unknown format.");if(bA(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+bA(i));bt=new gG().parse(i)}const r=new W3(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new hG(r,this.manager).parse(bt)}}class hG{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){bn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new pG().parse(i);return this.parseScene(i,s,r),Or}parseConnections(){const e=new Map;return"Connections"in bt&&bt.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in bt.Objects){const r=bt.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const u=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=u}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in bt.Objects){const r=bt.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?pl:Yn,r.wrapT=a===0?pl:Yn,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=bn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new rn):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new rn):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in bt.Objects){const r=bt.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!bn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new Kf;break;case"lambert":a=new ew;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Kf;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Ne().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Ne().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Ne().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Ne().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Ne().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Ne().fromArray(e.SpecularColor.value));const s=this;return bn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=su,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in bt.Objects&&t in bt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=bn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in bt.Objects){const r=bt.Objects.Deformer;for(const i in r){const s=r[i],o=bn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new qe().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=bn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Or=new Yo;const i=this.parseModels(e.skeletons,t,r),s=bt.Objects.Model,o=this;i.forEach(function(l){const u=s[l.ID];o.setLookAtProperties(l,u),bn.get(l.ID).parents.forEach(function(h){const p=i.get(h.ID);p!==void 0&&p.add(l)}),l.parent===null&&Or.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Or.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=zL(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const a=new mG().parse();Or.children.length===1&&Or.children[0].isGroup&&(Or.children[0].animations=a,Or=Or.children[0]),Or.animations=a}parseModels(e,t,r){const i=new Map,s=bt.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],u=bn.get(a);let d=this.buildSkeleton(u,e,a,l.attrName);if(!d){switch(l.attrType){case"Camera":d=this.createCamera(u);break;case"Light":d=this.createLight(u);break;case"Mesh":d=this.createMesh(u,t,r);break;case"NurbsCurve":d=this.createCurve(u,t);break;case"LimbNode":case"Root":d=new Ad;break;case"Null":default:d=new Yo;break}d.name=l.attrName?At.sanitizeNodeName(l.attrName):"",d.ID=a}this.getTransformData(d,l),i.set(a,d)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(u,d){if(u.ID===o.ID){const h=s;s=new Ad,s.matrixWorld.copy(u.transformLink),s.name=i?At.sanitizeNodeName(i):"",s.ID=r,l.bones[d]=s,h!==null&&s.add(h)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=bt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Lt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const u=a/l;let d=45;r.FieldOfView!==void 0&&(d=r.FieldOfView.value);const h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Sn(d,u,s,o),h!==null&&t.setFocalLength(h);break;case 1:t=new io(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Lt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=bt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Lt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new Ne().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new Cg(s,o,a,l);break;case 1:t=new lw(s,o);break;case 2:let u=Math.PI/3;r.InnerAngle!==void 0&&(u=$i.degToRad(r.InnerAngle.value));let d=0;r.OuterAngle!==void 0&&(d=$i.degToRad(r.OuterAngle.value),d=Math.max(d,1)),t=new aw(s,o,a,u,d,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new Cg(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Kf({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new WS(s,o),i.normalizeSkinWeights()):i=new qn(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new gr({color:3342591,linewidth:1});return new mo(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=BL(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&bn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=bt.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Or.add(e.target)):e.lookAt(new U().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];bn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;bn.get(u).parents.forEach(function(h){r.has(h.ID)&&r.get(h.ID).bind(new Yd(o.bones),i[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in bt.Objects){const t=bt.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new qe().fromArray(s.Matrix.a)}):e[i.Node]=new qe().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in bt&&"AmbientColor"in bt.GlobalSettings){const e=bt.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Ne(t,r,i);Or.add(new cw(s,1))}}}}class pG{parse(e){const t=new Map;if("Geometry"in bt.Objects){const r=bt.Objects.Geometry;for(const i in r){const s=bn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(h){return bt.Objects.Model[h.ID]});if(o.length===0)return;const a=e.children.reduce(function(h,p){return i[p.ID]!==void 0&&(h=i[p.ID]),h},null);e.children.forEach(function(h){r.morphTargets[h.ID]!==void 0&&s.push(r.morphTargets[h.ID])});const l=o[0],u={};"RotationOrder"in l&&(u.eulerOrder=BL(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const d=zL(u);return this.genGeometry(t,a,s,d)}genGeometry(e,t,r,i){const s=new dt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Ge(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Ge(a.colors,3)),t&&(s.setAttribute("skinIndex",new g0(a.weightsIndices,4)),s.setAttribute("skinWeight",new Ge(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const u=new _t().getNormalMatrix(i),d=new Ge(a.normal,3);d.applyNormalMatrix(u),s.setAttribute("normal",d)}if(a.uvs.forEach(function(u,d){let h="uv"+(d+1).toString();d===0&&(h="uv"),s.setAttribute(h,new Ge(a.uvs[d],2))}),o.material&&o.material.mappingType!=="AllSame"){let u=a.materialIndex[0],d=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(s.addGroup(d,p-d,u),u=h,d=p)}),s.groups.length>0){const h=s.groups[s.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&s.addGroup(p,a.materialIndex.length-p,u)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],u=[],d=[],h=[];const p=this;return e.vertexIndices.forEach(function(m,v){let S,_=!1;m<0&&(m=m^-1,_=!0);let g=[],x=[];if(o.push(m*3,m*3+1,m*3+2),e.color){const w=Sm(v,r,m,e.color);l.push(w[0],w[1],w[2])}if(e.skeleton){if(e.weightTable[m]!==void 0&&e.weightTable[m].forEach(function(w){x.push(w.weight),g.push(w.id)}),x.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const w=[0,0,0,0],M=[0,0,0,0];x.forEach(function(A,b){let I=A,L=g[b];M.forEach(function(R,P,k){if(I>R){k[P]=I,I=R;const V=w[P];w[P]=L,L=V}})}),g=w,x=M}for(;x.length<4;)x.push(0),g.push(0);for(let w=0;w<4;++w)d.push(x[w]),h.push(g[w])}if(e.normal){const w=Sm(v,r,m,e.normal);a.push(w[0],w[1],w[2])}e.material&&e.material.mappingType!=="AllSame"&&(S=Sm(v,r,m,e.material)[0]),e.uv&&e.uv.forEach(function(w,M){const A=Sm(v,r,m,w);u[M]===void 0&&(u[M]=[]),u[M].push(A[0]),u[M].push(A[1])}),i++,_&&(p.genFace(t,e,o,S,a,l,u,d,h,i),r++,i=0,o=[],a=[],l=[],u=[],d=[],h=[])}),t}genFace(e,t,r,i,s,o,a,l,u,d){for(let h=2;h<d;h++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(h-1)*3]]),e.vertex.push(t.vertexPositions[r[(h-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(h-1)*3+2]]),e.vertex.push(t.vertexPositions[r[h*3]]),e.vertex.push(t.vertexPositions[r[h*3+1]]),e.vertex.push(t.vertexPositions[r[h*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(h-1)*4]),e.vertexWeights.push(l[(h-1)*4+1]),e.vertexWeights.push(l[(h-1)*4+2]),e.vertexWeights.push(l[(h-1)*4+3]),e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(h-1)*4]),e.weightsIndices.push(u[(h-1)*4+1]),e.weightsIndices.push(u[(h-1)*4+2]),e.weightsIndices.push(u[(h-1)*4+3]),e.weightsIndices.push(u[h*4]),e.weightsIndices.push(u[h*4+1]),e.weightsIndices.push(u[h*4+2]),e.weightsIndices.push(u[h*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(h-1)*3]),e.colors.push(o[(h-1)*3+1]),e.colors.push(o[(h-1)*3+2]),e.colors.push(o[h*3]),e.colors.push(o[h*3+1]),e.colors.push(o[h*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(h-1)*3]),e.normal.push(s[(h-1)*3+1]),e.normal.push(s[(h-1)*3+2]),e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2])),t.uv&&t.uv.forEach(function(p,m){e.uvs[m]===void 0&&(e.uvs[m]=[]),e.uvs[m].push(a[m][0]),e.uvs[m].push(a[m][1]),e.uvs[m].push(a[m][(h-1)*2]),e.uvs[m].push(a[m][(h-1)*2+1]),e.uvs[m].push(a[m][h*2]),e.uvs[m].push(a[m][h*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=bt.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],u=e.attributes.position.count*3,d=new Float32Array(u);for(let v=0;v<l.length;v++){const S=l[v]*3;d[S]=a[v*3],d[S+1]=a[v*3+1],d[S+2]=a[v*3+2]}const h={vertexIndices:o,vertexPositions:d},p=this.genBuffers(h),m=new Ge(p.vertex,3);m.name=s||r.attrName,m.applyMatrix4(i),e.morphAttributes.position.push(m)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(MA===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new dt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new dt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let h=0,p=o.length;h<p;h+=4)s.push(new It().fromArray(o,h));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let h=0;h<r;++h)s.push(s[h])}const d=new MA(r,i,s,a,l).getPoints(s.length*12);return new dt().setFromPoints(d)}}class mG{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(bt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=bt.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=bt.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(xG),values:t[r].KeyValueFloat.a},s=bn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=bt.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=bn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,u){if(e.has(l.ID)){const d=e.get(l.ID);if(d.curves.x!==void 0||d.curves.y!==void 0||d.curves.z!==void 0){if(s[u]===void 0){const h=bn.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){const p=bt.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:p.attrName?At.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Or.traverse(function(v){v.ID===p.id&&(m.transform=v.matrix,v.userData.transformData&&(m.eulerOrder=v.userData.transformData.eulerOrder))}),m.transform||(m.transform=new qe),"PreRotation"in p&&(m.preRotation=p.PreRotation.value),"PostRotation"in p&&(m.postRotation=p.PostRotation.value),s[u]=m}}s[u]&&(s[u][d.attr]=d)}else if(d.curves.morph!==void 0){if(s[u]===void 0){const h=bn.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,p=bn.get(h).parents[0].ID,m=bn.get(p).parents[0].ID,v=bn.get(m).parents[0].ID,S=bt.Objects.Model[v],_={modelName:S.attrName?At.sanitizeNodeName(S.attrName):"",morphName:bt.Objects.Deformer[h].attrName};s[u]=_}s[u][d.attr]=d}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=bt.Objects.AnimationStack,r={};for(const i in t){const s=bn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new du(e.name,-1,t)}generateTracks(e){const t=[];let r=new U,i=new kn,s=new U;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new xs().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new fu(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map($i.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map($i.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map($i.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map($i.degToRad),i.push(o),i=new xs().fromArray(i),i=new kn().setFromEuler(i)),s!==void 0&&(s=s.map($i.degToRad),s.push(o),s=new xs().fromArray(s),s=new kn().setFromEuler(s).invert());const u=new kn,d=new xs,h=[];for(let p=0;p<l.length;p+=3)d.set(l[p],l[p+1],l[p+2],o),u.setFromEuler(d),i!==void 0&&u.premultiply(i),s!==void 0&&u.multiply(s),u.toArray(h,p/3*4);return new bl(e+".quaternion",a,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=Or.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new uu(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(o=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),o!==-1){const d=t.x.values[o];s.push(d),i[0]=d}else s.push(i[0]);if(a!==-1){const d=t.y.values[a];s.push(d),i[1]=d}else s.push(i[1]);if(l!==-1){const d=t.z.values[l];s.push(d),i[2]=d}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const u=e.times[t-1],h=(e.times[t]-u)/o;let p=u+h;const m=[],v=[];for(;p<e.times[t];)m.push(p),p+=h,v.push(l),l+=a;e.times=AA(e.times,t,m),e.values=AA(e.values,t,v)}}}}class gG{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new FL,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):u?t.parseNodeProperty(i,u,r[++s]):d?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),u=parseInt(l[0]),d=parseInt(l[1]);let h=s.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),i="connections",s=[u,d],wG(s,h),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=s_(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=s_(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(d){return d.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let u=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=s_(u);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),s)}}class vG{parse(e){const t=new TA(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new FL;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let p=0;p<s;p++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",d=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,r,p)}return r.propertyList=l,typeof u=="number"&&(r.id=u),d!==""&&(r.attrName=d),h!==""&&(r.attrType=h),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=Q8(new Uint8Array(e.getArrayBuffer(o))),l=new TA(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class TA{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),hu.decodeText(new Uint8Array(t))}}class FL{add(e,t){this[e]=t}}function yG(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===HL(n,0,e.length)}function _G(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function bA(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function xG(n){return n/46186158e3}const SG=[];function Sm(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return EG(SG,r.buffer,s,o)}const i_=new xs,yc=new U;function zL(n){const e=new qe,t=new qe,r=new qe,i=new qe,s=new qe,o=new qe,a=new qe,l=new qe,u=new qe,d=new qe,h=new qe,p=new qe,m=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(yc.fromArray(n.translation)),n.preRotation){const P=n.preRotation.map($i.degToRad);P.push(n.eulerOrder),t.makeRotationFromEuler(i_.fromArray(P))}if(n.rotation){const P=n.rotation.map($i.degToRad);P.push(n.eulerOrder),r.makeRotationFromEuler(i_.fromArray(P))}if(n.postRotation){const P=n.postRotation.map($i.degToRad);P.push(n.eulerOrder),i.makeRotationFromEuler(i_.fromArray(P)),i.invert()}n.scale&&s.scale(yc.fromArray(n.scale)),n.scalingOffset&&a.setPosition(yc.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(yc.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(yc.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(yc.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),d.copy(n.parentMatrixWorld));const v=t.clone().multiply(r).multiply(i),S=new qe;S.extractRotation(d);const _=new qe;_.copyPosition(d);const g=_.clone().invert().multiply(d),x=S.clone().invert().multiply(g),w=s,M=new qe;if(m===0)M.copy(S).multiply(v).multiply(x).multiply(w);else if(m===1)M.copy(S).multiply(x).multiply(v).multiply(w);else{const k=new qe().scale(new U().setFromMatrixScale(h)).clone().invert(),V=x.clone().multiply(k);M.copy(S).multiply(v).multiply(V).multiply(w)}const A=u.clone().invert(),b=o.clone().invert();let I=e.clone().multiply(l).multiply(u).multiply(t).multiply(r).multiply(i).multiply(A).multiply(a).multiply(o).multiply(s).multiply(b);const L=new qe().copyPosition(I),R=d.clone().multiply(L);return p.copyPosition(R),I=p.clone().multiply(M),I.premultiply(d.invert()),I}function BL(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function s_(n){return n.split(",").map(function(t){return parseFloat(t)})}function HL(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),hu.decodeText(new Uint8Array(n,e,t))}function wG(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function EG(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function AA(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}function hh(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const VL=D.forwardRef((n={enableDamping:!0},e)=>{const{domElement:t,camera:r,makeDefault:i,onChange:s,onStart:o,onEnd:a,...l}=n,u=pc(x=>x.invalidate),d=pc(x=>x.camera),h=pc(x=>x.gl),p=pc(x=>x.events),m=pc(x=>x.set),v=pc(x=>x.get),S=t||p.connected||h.domElement,_=r||d,g=D.useMemo(()=>new sG(_),[_]);return D.useEffect(()=>{g.connect(S);const x=w=>{u(),s&&s(w)};return g.addEventListener("change",x),o&&g.addEventListener("start",o),a&&g.addEventListener("end",a),()=>{g.dispose(),g.removeEventListener("change",x),o&&g.removeEventListener("start",o),a&&g.removeEventListener("end",a)}},[s,o,a,g,u,S]),D.useEffect(()=>{if(i){const x=v().controls;return m({controls:g}),()=>m({controls:x})}},[i,g]),M6(()=>g.update(),-1),D.createElement("primitive",wn({ref:e,object:g,enableDamping:!0},l))});function C0(n){return ch(yw,n)}C0.preload=n=>ch.preload(yw,n);C0.clear=n=>ch.clear(yw,n);var GL={exports:{}},MG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TG=MG,bG=TG;function WL(){}function $L(){}$L.resetWarningCache=WL;var AG=function(){function n(r,i,s,o,a,l){if(l!==bG){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:$L,resetWarningCache:WL};return t.PropTypes=t,t};GL.exports=AG();var CG=GL.exports;const jt=Sl(CG),RG=[],PG=[],LG=["Balustrade_01","Balustrade_02","Balustrade_03","Balustrade_04","Balustrade_05","Balustrade_05_Top","Balustrade_06","Balustrade_07","Balustrade_08","Buildin_04_Glass","Building05_LV03_Glass","Building05_LVL02_Wall","Building_00","Building_00_Deck","Building_00_Frame","Building_00_Glass","Building_01","Building_01_Frame","Building_01_Glass","Building_01_Rooftop","Building_02","Building_02_Glass","Building_02_Rooftop","Building_03","Building_03_Frame","Building_03_Glass","Building_03_Rooftop","Building_04","Building_04_Frame","Building_04_Rooftop","Building_05","Building_05_App_01_Glass","Building_05_App_02_Glass","Building_05_App_03_Glass","Building_05_App_05_Glass","Building_05_App_06_Glass","Building_05_App_07_Glass","Building_05_App_Walls_07","Building_05_Cafe_Balustrade","Building_05_Cafe_Frames","Building_05_Cafe_Glass","Building_05_Floor","Building_05_Frames","Building_05_Glass","Building_05_Glass_Top","Building_05_L03_Ap_02_Frames","Building_05_L03_Ap_03_Frames","Building_05_L03_Ap_04_Frames","Building_05_L03_Ap_05_Frames","Building_05_L03_Ap_06_Frames","Building_05_L03_Ap_07_Frames","Building_05_L03_Frames","Building_05_LV03_App_01_Frames","Building_05_LV03_Walls","Building_05_LV03_Walls_App01","Building_05_LV03_Walls_App04","Building_05_LV03_Walls_App05","Building_05_LV03_Walls_App06","Building_05_LV03_Walls_App_03","Building_05_Rooftop","Building_05_Top","Building_06","Building_06_Frame","Building_06_Glass","Building_07","Building_07_Frame","Building_07_Glass","Building_07_Rooftop","Building_08","Building_08_Frame","Building_08_Glass","Building_08_Rooftop","Building_20_Frame","Building_LVL02_Walls_Top","Building_LVL03_Balustrade","Buildng_05_Cafe_Rooftop","Buildng_06_Rooftop","Car_Park_01","Forest001","Forest002","Ground","Ground_Internal","Line079","Main_Road","Roads_Inner","Roads_Squares","Rooft_Top_Green_01","Sand","Staircase","Water"],jL=[...RG.map(n=>({name:n,states:["future","existing"]})),...PG.map(n=>({name:n,states:["future"]})),...LG.map(n=>({name:n,states:["existing"]}))],IG=Symbol(),_w=Symbol(),Mf="a",Jf="w";let DG=(n,e)=>new Proxy(n,e);const r1=Object.getPrototypeOf,i1=new WeakMap,XL=n=>n&&(i1.has(n)?i1.get(n):r1(n)===Object.prototype||r1(n)===Array.prototype),Lg=n=>typeof n=="object"&&n!==null,OG=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(r1(n),e)},xw=n=>n[_w]||n,YL=(n,e,t,r)=>{if(!XL(n))return n;let i=r&&r.get(n);if(!i){const l=xw(n);i=(u=>Object.values(Object.getOwnPropertyDescriptors(u)).some(d=>!d.configurable&&!d.writable))(l)?[l,OG(l)]:[l],r==null||r.set(n,i)}const[s,o]=i;let a=t&&t.get(s);return a&&a[1].f===!!o||(a=((l,u)=>{const d={f:u};let h=!1;const p=(v,S)=>{if(!h){let _=d[Mf].get(l);if(_||(_={},d[Mf].set(l,_)),v===Jf)_[Jf]=!0;else{let g=_[v];g||(g=new Set,_[v]=g),g.add(S)}}},m={get:(v,S)=>S===_w?l:(p("k",S),YL(Reflect.get(v,S),d[Mf],d.c)),has:(v,S)=>S===IG?(h=!0,d[Mf].delete(l),!0):(p("h",S),Reflect.has(v,S)),getOwnPropertyDescriptor:(v,S)=>(p("o",S),Reflect.getOwnPropertyDescriptor(v,S)),ownKeys:v=>(p(Jf),Reflect.ownKeys(v))};return u&&(m.set=m.deleteProperty=()=>!1),[m,d]})(s,!!o),a[1].p=DG(o||s,a[0]),t&&t.set(s,a)),a[1][Mf]=e,a[1].c=t,a[1].p},qL=(n,e,t,r)=>{if(Object.is(n,e))return!1;if(!Lg(n)||!Lg(e))return!0;const i=t.get(xw(n));if(!i)return!0;if(r){const o=r.get(n);if(o&&o.n===e)return o.g;r.set(n,{n:e,g:!1})}let s=null;try{for(const o of i.h||[])if(s=Reflect.has(n,o)!==Reflect.has(e,o),s)return s;if(i[Jf]===!0){if(s=((o,a)=>{const l=Reflect.ownKeys(o),u=Reflect.ownKeys(a);return l.length!==u.length||l.some((d,h)=>d!==u[h])})(n,e),s)return s}else for(const o of i.o||[])if(s=!!Reflect.getOwnPropertyDescriptor(n,o)!=!!Reflect.getOwnPropertyDescriptor(e,o),s)return s;for(const o of i.k||[])if(s=qL(n[o],e[o],t,r),s)return s;return s===null&&(s=!0),s}finally{r&&r.set(n,{n:e,g:s})}},kG=n=>XL(n)&&n[_w]||null,CA=(n,e=!0)=>{i1.set(n,e)},NG=(n,e,t)=>{const r=[],i=new WeakSet,s=(o,a)=>{if(i.has(o))return;Lg(o)&&i.add(o);const l=Lg(o)&&e.get(xw(o));if(l){var u,d;if((u=l.h)==null||u.forEach(p=>{const m=`:has(${String(p)})`;r.push(a?[...a,m]:[m])}),l[Jf]===!0){const p=":ownKeys";r.push(a?[...a,p]:[p])}else{var h;(h=l.o)==null||h.forEach(p=>{const m=`:hasOwn(${String(p)})`;r.push(a?[...a,m]:[m])})}(d=l.k)==null||d.forEach(p=>{t&&!("value"in(Object.getOwnPropertyDescriptor(o,p)||{}))||s(o[p],a?[...a,p]:[p])})}else a&&r.push(a)};return s(n),r},o_=n=>typeof n=="object"&&n!==null,Go=new WeakMap,wm=new WeakSet,UG=(n=Object.is,e=(u,d)=>new Proxy(u,d),t=u=>o_(u)&&!wm.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),r=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,h=r)=>{const p=i.get(u);if((p==null?void 0:p[0])===d)return p[1];const m=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return CA(m,!0),i.set(u,[d,m]),Reflect.ownKeys(u).forEach(v=>{if(Object.getOwnPropertyDescriptor(m,v))return;const S=Reflect.get(u,v),_={value:S,enumerable:!0,configurable:!0};if(wm.has(S))CA(S,!1);else if(S instanceof Promise)delete _.value,_.get=()=>h(S);else if(Go.has(S)){const[g,x]=Go.get(S);_.value=s(g,x(),h)}Object.defineProperty(m,v,_)}),m},o=new WeakMap,a=[1,1],l=u=>{if(!o_(u))throw new Error("object required");const d=o.get(u);if(d)return d;let h=a[0];const p=new Set,m=(R,P=++a[0])=>{h!==P&&(h=P,p.forEach(k=>k(R,P)))};let v=a[1];const S=(R=++a[1])=>(v!==R&&!p.size&&(v=R,g.forEach(([P])=>{const k=P[1](R);k>h&&(h=k)})),h),_=R=>(P,k)=>{const V=[...P];V[1]=[R,...V[1]],m(V,k)},g=new Map,x=(R,P)=>{if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&g.has(R))throw new Error("prop listener already exists");if(p.size){const k=P[3](_(R));g.set(R,[P,k])}else g.set(R,[P])},w=R=>{var P;const k=g.get(R);k&&(g.delete(R),(P=k[1])==null||P.call(k))},M=R=>(p.add(R),p.size===1&&g.forEach(([k,V],H)=>{if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&V)throw new Error("remove already exists");const j=k[3](_(H));g.set(H,[k,j])}),()=>{p.delete(R),p.size===0&&g.forEach(([k,V],H)=>{V&&(V(),g.set(H,[k]))})}),A=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),I=e(A,{deleteProperty(R,P){const k=Reflect.get(R,P);w(P);const V=Reflect.deleteProperty(R,P);return V&&m(["delete",[P],k]),V},set(R,P,k,V){const H=Reflect.has(R,P),j=Reflect.get(R,P,V);if(H&&(n(j,k)||o.has(k)&&n(j,o.get(k))))return!0;w(P),o_(k)&&(k=kG(k)||k);let q=k;if(k instanceof Promise)k.then(Z=>{k.status="fulfilled",k.value=Z,m(["resolve",[P],Z])}).catch(Z=>{k.status="rejected",k.reason=Z,m(["reject",[P],Z])});else{!Go.has(k)&&t(k)&&(q=l(k));const Z=!wm.has(q)&&Go.get(q);Z&&x(P,Z)}return Reflect.set(R,P,q,V),m(["set",[P],k,j]),!0}});o.set(u,I);const L=[A,S,s,M];return Go.set(I,L),Reflect.ownKeys(u).forEach(R=>{const P=Object.getOwnPropertyDescriptor(u,R);"value"in P&&(I[R]=u[R],delete P.value,delete P.writable),Object.defineProperty(A,R,P)}),I})=>[l,Go,wm,n,e,t,r,i,s,o,a],[FG]=UG();function zG(n={}){return FG(n)}function BG(n,e,t){const r=Go.get(n);({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!r&&console.warn("Please use proxy object");let i;const s=[],o=r[3];let a=!1;const u=o(d=>{if(s.push(d),t){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function RA(n,e){const t=Go.get(n);({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!t&&console.warn("Please use proxy object");const[r,i,s]=t;return s(r,i(),e)}var KL={exports:{}},ZL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=D;function HG(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var VG=typeof Object.is=="function"?Object.is:HG,GG=mu.useState,WG=mu.useEffect,$G=mu.useLayoutEffect,jG=mu.useDebugValue;function XG(n,e){var t=e(),r=GG({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return $G(function(){i.value=t,i.getSnapshot=e,a_(i)&&s({inst:i})},[n,t,e]),WG(function(){return a_(i)&&s({inst:i}),n(function(){a_(i)&&s({inst:i})})},[n]),jG(t),t}function a_(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!VG(n,t)}catch{return!0}}function YG(n,e){return e()}var qG=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YG:XG;ZL.useSyncExternalStore=mu.useSyncExternalStore!==void 0?mu.useSyncExternalStore:qG;KL.exports=ZL;var KG=KL.exports;const ZG=Sl(KG),{use:PA}=$,{useSyncExternalStore:JG}=ZG,QG=(n,e)=>{const t=D.useRef();D.useEffect(()=>{t.current=NG(n,e,!0)}),D.useDebugValue(t.current)},eW=new WeakMap;function JL(n,e){const t=e==null?void 0:e.sync,r=D.useRef(),i=D.useRef();let s=!0;const o=JG(D.useCallback(u=>{const d=BG(n,u,t);return u(),d},[n,t]),()=>{const u=RA(n,PA);try{if(!s&&r.current&&i.current&&!qL(r.current,u,i.current,new WeakMap))return r.current}catch{}return u},()=>RA(n,PA));s=!1;const a=new WeakMap;D.useEffect(()=>{r.current=o,i.current=a}),({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&QG(o,a);const l=D.useMemo(()=>new WeakMap,[]);return YL(o,a,l,eW)}const Zm=zG({showFuture:!1,intro:!0,objects:[],colors:["#ccc","#EFBD4E","#80C670","#726DE8","#EF674E","#353934"],decals:["react","three2","pmndrs"],color:"#EFBD4E",decal:"three2"});function tW({filename:n}){const e=C0(n+".fbx");console.log({building:e});const[t,r]=D.useState(!1),i=e.clone(),s=new _o({color:new Ne("#520B3E")});return i.children.forEach((o,a)=>o.material=s),e.castShadow=!1,cn.jsx("primitive",{scale:.1,object:t?i:e,onClick:(o,a)=>{console.log(n)}})}function nW(){var n=JL(Zm);const e=n.showFuture?"future":"existing",t=jL.filter(r=>r.states.includes(e));return cn.jsx(cn.Fragment,{children:t.map(r=>cn.jsx(tW,{filename:r.name},r.name))})}function rW(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function QL(...n){return e=>n.forEach(t=>rW(t,e))}function Ru(...n){return D.useCallback(QL(...n),n)}const eI=D.forwardRef((n,e)=>{const{children:t,...r}=n,i=D.Children.toArray(t),s=i.find(iW);if(s){const o=s.props.children,a=i.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return D.createElement(s1,wn({},r,{ref:e}),D.isValidElement(o)?D.cloneElement(o,void 0,a):null)}return D.createElement(s1,wn({},r,{ref:e}),t)});eI.displayName="Slot";const s1=D.forwardRef((n,e)=>{const{children:t,...r}=n;return D.isValidElement(t)?D.cloneElement(t,{...sW(r,t.props),ref:e?QL(e,t.ref):t.ref}):D.Children.count(t)>1?D.Children.only(null):null});s1.displayName="SlotClone";const tI=({children:n})=>D.createElement(D.Fragment,null,n);function iW(n){return D.isValidElement(n)&&n.type===tI}function sW(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const oW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Rl=oW.reduce((n,e)=>{const t=D.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?eI:e;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,wn({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function aW(n,e){n&&Wd.flushSync(()=>n.dispatchEvent(e))}const lW=D.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?nP.createPortal(D.createElement(Rl.div,wn({},i,{ref:e})),r):null}),cW=lW;var LA=Object.prototype.hasOwnProperty;function Dd(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Dd(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(LA.call(n,t)&&++r&&!LA.call(e,t)||!(t in e)||!Dd(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}var R0=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};R0.prototype._test=function(e){var t=this.fn;try{qc(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return qc(this.modifiers.slice(),t,this)(e)}catch{return!1}};R0.prototype._check=function(e){try{qc(this.modifiers.slice(),this.fn,this)(e)}catch{if(qc(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!qc(this.modifiers.slice(),this.fn,this)(e))throw null};R0.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){rI(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function nI(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function qc(n,e,t){if(n.length){var r=n.shift(),i=qc(n,e,t);return r.perform(i,t)}else return nI(e)}function rI(n,e,t){if(n.length){var r=n.shift(),i=rI(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(nI(e,"async")(s))}}var uW=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},Sw=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),As=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};As.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new R0(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};As.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new uW(t,e.simple,e.async)),this};As.prototype._clone=function(){return new As(this.chain.slice(),this.nextRuleModifiers.slice())};As.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};As.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new Sw(r,e,i))}}),t};As.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new Sw(t,e,r)}})};As.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){iI(e,t.chain.slice(),r,i)})};function iI(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){iI(n,e,t,r)},function(s){r(new Sw(i,n,s))})}else t(n)}var IA=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function fW(n,e){return e===void 0&&(e=!1),{simple:function(t){return IA(t,e)||n.check(t)===void 0},async:function(t){return IA(t,e)||n.testAsync(t)}}}function Br(){return typeof Proxy<"u"?sI(new As):o1(new As)}var Od={};Br.extend=function(n){Object.assign(Od,n)};Br.clearCustomRules=function(){Od={}};function sI(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=sI(n._clone());if(r in Ig)return i._applyModifier(Ig[r],r);if(r in Od)return i._applyRule(Od[r],r);if(r in a1)return i._applyRule(a1[r],r)}})}function o1(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=o1(s._clone()),d=u._applyRule(i[o],o).apply(void 0,a);return d}}),s},t=e(a1,n),r=e(Od,t);return Object.keys(Ig).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=o1(r._clone());return s._applyModifier(Ig[i],i)}})}),r}var Ig={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Em(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Em(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Em(e).every(n)}},async:function(n){return function(e){return Promise.all(Em(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return DA(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return DA(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function DA(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Em(n){return typeof n=="string"?n.split(""):n}var a1={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||dW;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return _c("string")},boolean:function(){return _c("boolean")},undefined:function(){return _c("undefined")},null:function(){return _c("null")},array:function(){return _c("array")},object:function(){return _c("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return hW(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:fW};function _c(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function dW(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function hW(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Ht="colors",Sr="sizes",Ye="space",pW={gap:Ye,gridGap:Ye,columnGap:Ye,gridColumnGap:Ye,rowGap:Ye,gridRowGap:Ye,inset:Ye,insetBlock:Ye,insetBlockEnd:Ye,insetBlockStart:Ye,insetInline:Ye,insetInlineEnd:Ye,insetInlineStart:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,marginBlock:Ye,marginBlockEnd:Ye,marginBlockStart:Ye,marginInline:Ye,marginInlineEnd:Ye,marginInlineStart:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,paddingBlock:Ye,paddingBlockEnd:Ye,paddingBlockStart:Ye,paddingInline:Ye,paddingInlineEnd:Ye,paddingInlineStart:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,scrollMargin:Ye,scrollMarginTop:Ye,scrollMarginRight:Ye,scrollMarginBottom:Ye,scrollMarginLeft:Ye,scrollMarginX:Ye,scrollMarginY:Ye,scrollMarginBlock:Ye,scrollMarginBlockEnd:Ye,scrollMarginBlockStart:Ye,scrollMarginInline:Ye,scrollMarginInlineEnd:Ye,scrollMarginInlineStart:Ye,scrollPadding:Ye,scrollPaddingTop:Ye,scrollPaddingRight:Ye,scrollPaddingBottom:Ye,scrollPaddingLeft:Ye,scrollPaddingX:Ye,scrollPaddingY:Ye,scrollPaddingBlock:Ye,scrollPaddingBlockEnd:Ye,scrollPaddingBlockStart:Ye,scrollPaddingInline:Ye,scrollPaddingInlineEnd:Ye,scrollPaddingInlineStart:Ye,fontSize:"fontSizes",background:Ht,backgroundColor:Ht,backgroundImage:Ht,borderImage:Ht,border:Ht,borderBlock:Ht,borderBlockEnd:Ht,borderBlockStart:Ht,borderBottom:Ht,borderBottomColor:Ht,borderColor:Ht,borderInline:Ht,borderInlineEnd:Ht,borderInlineStart:Ht,borderLeft:Ht,borderLeftColor:Ht,borderRight:Ht,borderRightColor:Ht,borderTop:Ht,borderTopColor:Ht,caretColor:Ht,color:Ht,columnRuleColor:Ht,fill:Ht,outline:Ht,outlineColor:Ht,stroke:Ht,textDecorationColor:Ht,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Sr,minBlockSize:Sr,maxBlockSize:Sr,inlineSize:Sr,minInlineSize:Sr,maxInlineSize:Sr,width:Sr,minWidth:Sr,maxWidth:Sr,height:Sr,minHeight:Sr,maxHeight:Sr,flexBasis:Sr,gridTemplateColumns:Sr,gridTemplateRows:Sr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},mW=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Pu=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,mW))(e);return i in n?n[i]:n[i]=t(e,...r)}},al=Symbol.for("sxs.internal"),ww=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),OA=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:gW}=Object.prototype,l1=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),vW=/\s+(?![^()]*\))/,xc=n=>e=>n(...typeof e=="string"?String(e).split(vW):[e]),kA={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:xc((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:xc((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:xc((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:xc((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:xc((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:xc((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},l_=/([\d.]+)([^]*)/,yW=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,_W=(n,e)=>n in xW&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${l1(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${l1(n)}:${r}fit-content`)+s):String(e),xW={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},go=n=>n?n+"-":"",oI=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?go(e)+(a.includes("$")?"":go(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),SW=/\s*,\s*(?![^()]*\))/,wW=Object.prototype.toString,Bc=(n,e,t,r,i)=>{let s,o,a;const l=(u,d,h)=>{let p,m;const v=S=>{for(p in S){const x=p.charCodeAt(0)===64,w=x&&Array.isArray(S[p])?S[p]:[S[p]];for(m of w){const M=/[A-Z]/.test(g=p)?g:g.replace(/-[^]/g,b=>b[1].toUpperCase()),A=typeof m=="object"&&m&&m.toString===wW&&(!r.utils[M]||!d.length);if(M in r.utils&&!A){const b=r.utils[M];if(b!==o){o=b,v(b(m)),o=null;continue}}else if(M in kA){const b=kA[M];if(b!==a){a=b,v(b(m)),a=null;continue}}if(x&&(_=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=_.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(b,I,L,R,P,k)=>{const V=l_.test(I),H=.0625*(V?-1:1),[j,q]=V?[R,I]:[I,R];return"("+(L[0]==="="?"":L[0]===">"===V?"max-":"min-")+j+":"+(L[0]!=="="&&L.length===1?q.replace(l_,(Z,ee,F)=>Number(ee)+H*(L===">"?1:-1)+F):q)+(P?") and ("+(P[0]===">"?"min-":"max-")+j+":"+(P.length===1?k.replace(l_,(Z,ee,F)=>Number(ee)+H*(P===">"?-1:1)+F):k):"")+")"})),A){const b=x?h.concat(p):[...h],I=x?[...d]:yW(d,p.split(SW));s!==void 0&&i(NA(...s)),s=void 0,l(m,I,b)}else s===void 0&&(s=[[],d,h]),p=x||p.charCodeAt(0)!==36?p:`--${go(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=A?m:typeof m=="number"?m&&M in EW?String(m)+"px":String(m):oI(_W(M,m??""),r.prefix,r.themeMap[M]),s[0].push(`${x?`${p} `:`${l1(p)}:`}${m}`)}}var _,g};v(u),s!==void 0&&i(NA(...s)),s=void 0};l(n,e,t)},NA=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,EW={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},UA=n=>String.fromCharCode(n+(n>25?39:97)),ll=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=UA(t%52)+r;return UA(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Of=["themed","global","styled","onevar","resonevar","allvar","inline"],MW=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},TW=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(MW(a)){for(let l=0,u=a.cssRules;u[l];++l){const d=Object(u[l]);if(d.type!==1)continue;const h=Object(u[l+1]);if(h.type!==4)continue;++l;const{cssText:p}=d;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=Of[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:h,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(d,h){this.cssRules.splice(h,0,a(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,d=>d.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Of.length-1;a>=0;--a){const l=Of[a];if(!o[l]){const u=Of[a+1],d=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",d),s.insertRule(`--sxs{--sxs:${a}}`,d),o[l]={group:s.cssRules[d+1],index:d,cache:new Set([a])}}bW(o[l])}};return r(),e},bW=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Tf=Symbol(),AW=Pu(),FA=(n,e)=>AW(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[al]){r.type==null&&(r.type=i[al].type);for(const s of i[al].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(CW(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),RW(n,r,e)}),CW=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${go(i.prefix)}c-${ll(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){d=l,h=p,gW.call(d,h)||(l[p]="undefined");const m=n[p];for(const v in m){const S={[p]:String(v)};String(v)==="undefined"&&u.push(p);const _=m[v],g=[S,_,!OA(_)];o.push(g)}}var d,h;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const _ in v)v[_]=String(v[_]);const S=[v,m,!OA(m)];a.push(S)}return[s,r,o,a,l,u]},RW=(n,e,t)=>{const[r,i,s,o]=PW(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(h=>{function p(){for(let m=0;m<p[Tf].length;m++){const[v,S]=p[Tf][m];h.rules[v].apply(S)}return p[Tf]=[],null}return p[Tf]=[],p.rules={},Of.forEach(m=>p.rules[m]={apply:v=>p[Tf].push([m,v])}),p})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,d=h=>{h=typeof h=="object"&&h||LW;const{css:p,...m}=h,v={};for(const g in s)if(delete m[g],g in h){let x=h[g];typeof x=="object"&&x?v[g]={"@initial":s[g],...x}:(x=String(x),v[g]=x!=="undefined"||o.has(g)?x:s[g])}else v[g]=s[g];const S=new Set([...i]);for(const[g,x,w,M]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),Bc(x,[`.${g}`],[],n,I=>{l.styled.apply(I)}));const A=zA(w,v,n.media),b=zA(M,v,n.media,!0);for(const I of A)if(I!==void 0)for(const[L,R,P]of I){const k=`${g}-${ll(R)}-${L}`;S.add(k);const V=(P?t.rules.resonevar:t.rules.onevar).cache,H=P?l.resonevar:l.onevar;V.has(k)||(V.add(k),Bc(R,[`.${k}`],[],n,j=>{H.apply(j)}))}for(const I of b)if(I!==void 0)for(const[L,R]of I){const P=`${g}-${ll(R)}-${L}`;S.add(P),t.rules.allvar.cache.has(P)||(t.rules.allvar.cache.add(P),Bc(R,[`.${P}`],[],n,k=>{l.allvar.apply(k)}))}}if(typeof p=="object"&&p){const g=`${r}-i${ll(p)}-css`;S.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),Bc(p,[`.${g}`],[],n,x=>{l.inline.apply(x)}))}for(const g of String(h.className||"").trim().split(/\s+/))g&&S.add(g);const _=m.className=[...S].join(" ");return{type:e.type,className:_,selector:u,props:m,toString:()=>_,deferredInjector:a}};return ww(d,{className:r,selector:u,[al]:e,toString:()=>(t.rules.styled.cache.has(r)||d(),r)})},PW=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},zA=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,d=!1;for(l in s){const h=s[l];let p=e[l];if(p!==h){if(typeof p!="object"||!p)continue e;{let m,v,S=0;for(const _ in p){if(h===String(p[_])){if(_!=="@initial"){const g=_.slice(1);(v=v||[]).push(g in t?t[g]:_.replace(/^@media ?/,"")),d=!0}u+=S,m=!0}++S}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,d])}return i},LW={},IW=Pu(),DW=(n,e)=>IW(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=ll(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Bc(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return ww(r,{toString:r})}),OW=Pu(),kW=(n,e)=>OW(n,()=>t=>{const r=`${go(n.prefix)}k-${ll(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Bc(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return ww(i,{get name(){return i()},toString:i})}),NW=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+go(this.prefix)+go(this.scale)+this.token}toString(){return this.computedValue}},UW=Pu(),FW=(n,e)=>UW(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${go(n.prefix)}t-${ll(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const d=`--${go(n.prefix)}${l}-${u}`,h=oI(String(r[l][u]),n.prefix,l);s[l][u]=new NW(u,h,l,n.prefix),o.push(`${d}:${h}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),zW=Pu(),BW=Pu(),HW=n=>{const e=(t=>{let r=!1;const i=zW(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},d={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...pW},utils:typeof s.utils=="object"&&s.utils||{}},h=TW(l),p={css:FA(d,h),globalCss:DW(d,h),keyframes:kW(d,h),createTheme:FW(d,h),reset(){h.reset(),p.theme.toString()},theme:{},sheet:h,config:d,prefix:o,getCssText:h.toString,toString:h.toString};return String(p.theme=p.createTheme(u)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>BW(t,()=>{const i=FA(t,r);return(...s)=>{const o=i(...s),a=o[al].type,l=$.forwardRef((u,d)=>{const h=u&&u.as||a,{props:p,deferredInjector:m}=o(u);return delete p.as,p.ref=d,m?$.createElement($.Fragment,null,$.createElement(h,p),$.createElement(m,null)):$.createElement(h,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[al]=o[al],l}}))(e),e};function Ks(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function aI(n,e=[]){let t=[];function r(s,o){const a=D.createContext(o),l=t.length;t=[...t,o];function u(h){const{scope:p,children:m,...v}=h,S=(p==null?void 0:p[n][l])||a,_=D.useMemo(()=>v,Object.values(v));return D.createElement(S.Provider,{value:_},m)}function d(h,p){const m=(p==null?void 0:p[n][l])||a,v=D.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=t.map(o=>D.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return D.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,VW(i,...e)]}function VW(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Lu(n){const e=D.useRef(n);return D.useEffect(()=>{e.current=n}),D.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function GW(n,e=globalThis==null?void 0:globalThis.document){const t=Lu(n);D.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const c1="dismissableLayer.update",WW="dismissableLayer.pointerDownOutside",$W="dismissableLayer.focusOutside";let BA;const jW=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XW=D.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=n,d=D.useContext(jW),[h,p]=D.useState(null),m=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=D.useState({}),S=Ru(e,L=>p(L)),_=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(g),w=h?_.indexOf(h):-1,M=d.layersWithOutsidePointerEventsDisabled.size>0,A=w>=x,b=YW(L=>{const R=L.target,P=[...d.branches].some(k=>k.contains(R));!A||P||(s==null||s(L),a==null||a(L),L.defaultPrevented||l==null||l())},m),I=qW(L=>{const R=L.target;[...d.branches].some(k=>k.contains(R))||(o==null||o(L),a==null||a(L),L.defaultPrevented||l==null||l())},m);return GW(L=>{w===d.layers.size-1&&(i==null||i(L),!L.defaultPrevented&&l&&(L.preventDefault(),l()))},m),D.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(BA=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),HA(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=BA)}},[h,m,r,d]),D.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),HA())},[h,d]),D.useEffect(()=>{const L=()=>v({});return document.addEventListener(c1,L),()=>document.removeEventListener(c1,L)},[]),D.createElement(Rl.div,wn({},u,{ref:S,style:{pointerEvents:M?A?"auto":"none":void 0,...n.style},onFocusCapture:Ks(n.onFocusCapture,I.onFocusCapture),onBlurCapture:Ks(n.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Ks(n.onPointerDownCapture,b.onPointerDownCapture)}))});function YW(n,e=globalThis==null?void 0:globalThis.document){const t=Lu(n),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let d=function(){lI(WW,t,u,{discrete:!0})};var l=d;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function qW(n,e=globalThis==null?void 0:globalThis.document){const t=Lu(n),r=D.useRef(!1);return D.useEffect(()=>{const i=s=>{s.target&&!r.current&&lI($W,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function HA(){const n=new CustomEvent(c1);document.dispatchEvent(n)}function lI(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?aW(i,s):i.dispatchEvent(s)}const gu=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},KW=VO["useId".toString()]||(()=>{});let ZW=0;function JW(n){const[e,t]=D.useState(KW());return gu(()=>{n||t(r=>r??String(ZW++))},[n]),n||(e?`radix-${e}`:"")}function Iu(n){return n.split("-")[1]}function Ew(n){return n==="y"?"height":"width"}function so(n){return n.split("-")[0]}function Pl(n){return["top","bottom"].includes(so(n))?"x":"y"}function VA(n,e,t){let{reference:r,floating:i}=n;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Pl(e),l=Ew(a),u=r[l]/2-i[l]/2,d=a==="x";let h;switch(so(e)){case"top":h={x:s,y:r.y-i.height};break;case"bottom":h={x:s,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:o};break;case"left":h={x:r.x-i.width,y:o};break;default:h={x:r.x,y:r.y}}switch(Iu(e)){case"start":h[a]-=u*(t&&d?-1:1);break;case"end":h[a]+=u*(t&&d?-1:1)}return h}const QW=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:h}=VA(u,r,l),p=r,m={},v=0;for(let S=0;S<a.length;S++){const{name:_,fn:g}=a[S],{x,y:w,data:M,reset:A}=await g({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:n,floating:e}});d=x??d,h=w??h,m={...m,[_]:{...m[_],...M}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):A.rects),{x:d,y:h}=VA(u,p,l)),S=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}};function vo(n,e){return typeof n=="function"?n(e):n}function cI(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function Dg(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function kd(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=vo(e,n),v=cI(m),S=a[p?h==="floating"?"reference":"floating":h],_=Dg(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(S)))==null||t?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),g=h==="floating"?{...o.floating,x:r,y:i}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))&&await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1},M=Dg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:x,strategy:l}):g);return{top:(_.top-M.top+v.top)/w.y,bottom:(M.bottom-_.bottom+v.bottom)/w.y,left:(_.left-M.left+v.left)/w.x,right:(M.right-_.right+v.right)/w.x}}const Nd=Math.min,Ga=Math.max;function u1(n,e,t){return Ga(n,Nd(e,t))}const GA=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:u=0}=vo(n,e)||{};if(l==null)return{};const d=cI(u),h={x:t,y:r},p=Pl(i),m=Ew(p),v=await o.getDimensions(l),S=p==="y",_=S?"top":"left",g=S?"bottom":"right",x=S?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[p]-h[p]-s.floating[m],M=h[p]-s.reference[p],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let b=A?A[x]:0;b&&await(o.isElement==null?void 0:o.isElement(A))||(b=a.floating[x]||s.floating[m]);const I=w/2-M/2,L=b/2-v[m]/2-1,R=Nd(d[_],L),P=Nd(d[g],L),k=R,V=b-v[m]-P,H=b/2-v[m]/2+I,j=u1(k,H,V),q=Iu(i)!=null&&H!=j&&s.reference[m]/2-(H<k?R:P)-v[m]/2<0?H<k?k-H:V-H:0;return{[p]:h[p]-q,data:{[p]:j,centerOffset:H-j+q}}}}),uI=["top","right","bottom","left"];uI.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const e$={left:"right",right:"left",bottom:"top",top:"bottom"};function Og(n){return n.replace(/left|right|bottom|top/g,e=>e$[e])}function t$(n,e,t){t===void 0&&(t=!1);const r=Iu(n),i=Pl(n),s=Ew(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Og(o)),{main:o,cross:Og(o)}}const n$={start:"end",end:"start"};function c_(n){return n.replace(/start|end/g,e=>n$[e])}const r$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...S}=vo(n,e),_=so(r),g=so(o)===o,x=await(a.isRTL==null?void 0:a.isRTL(l.floating)),w=h||(g||!v?[Og(o)]:function(k){const V=Og(k);return[c_(k),V,c_(V)]}(o));h||m==="none"||w.push(...function(k,V,H,j){const q=Iu(k);let Z=function(ee,F,K){const X=["left","right"],oe=["right","left"],W=["top","bottom"],he=["bottom","top"];switch(ee){case"top":case"bottom":return K?F?oe:X:F?X:oe;case"left":case"right":return F?W:he;default:return[]}}(so(k),H==="start",j);return q&&(Z=Z.map(ee=>ee+"-"+q),V&&(Z=Z.concat(Z.map(c_)))),Z}(o,v,m,x));const M=[o,...w],A=await kd(e,S),b=[];let I=((t=i.flip)==null?void 0:t.overflows)||[];if(u&&b.push(A[_]),d){const{main:k,cross:V}=t$(r,s,x);b.push(A[k],A[V])}if(I=[...I,{placement:r,overflows:b}],!b.every(k=>k<=0)){var L,R;const k=(((L=i.flip)==null?void 0:L.index)||0)+1,V=M[k];if(V)return{data:{index:k,overflows:I},reset:{placement:V}};let H=(R=I.filter(j=>j.overflows[0]<=0).sort((j,q)=>j.overflows[1]-q.overflows[1])[0])==null?void 0:R.placement;if(!H)switch(p){case"bestFit":{var P;const j=(P=I.map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,ee)=>Z+ee,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:P[0];j&&(H=j);break}case"initialPlacement":H=o}if(r!==H)return{reset:{placement:H}}}return{}}}};function WA(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function $A(n){return uI.some(e=>n[e]>=0)}const i$=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=vo(n,e);switch(r){case"referenceHidden":{const s=WA(await kd(e,{...i,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:$A(s)}}}case"escaped":{const s=WA(await kd(e,{...i,altBoundary:!0}),t.floating);return{data:{escapedOffsets:s,escaped:$A(s)}}}default:return{}}}}},s$=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:u}=s,d=await(l.isRTL==null?void 0:l.isRTL(u.floating)),h=so(a),p=Iu(a),m=Pl(a)==="x",v=["left","top"].includes(h)?-1:1,S=d&&m?-1:1,_=vo(o,s);let{mainAxis:g,crossAxis:x,alignmentAxis:w}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return p&&typeof w=="number"&&(x=p==="end"?-1*w:w),m?{x:x*S,y:g*v}:{x:g*v,y:x*S}}(e,n);return{x:t+i.x,y:r+i.y,data:i}}}};function fI(n){return n==="x"?"y":"x"}const o$=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:g,y:x}=_;return{x:g,y:x}}},...l}=vo(n,e),u={x:t,y:r},d=await kd(e,l),h=Pl(so(i)),p=fI(h);let m=u[h],v=u[p];if(s){const _=h==="y"?"bottom":"right";m=u1(m+d[h==="y"?"top":"left"],m,m-d[_])}if(o){const _=p==="y"?"bottom":"right";v=u1(v+d[p==="y"?"top":"left"],v,v-d[_])}const S=a.fn({...e,[h]:m,[p]:v});return{...S,data:{x:S.x-t,y:S.y-r}}}}},a$=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=vo(n,e),d={x:t,y:r},h=Pl(i),p=fI(h);let m=d[h],v=d[p];const S=vo(a,e),_=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(l){const w=h==="y"?"height":"width",M=s.reference[h]-s.floating[w]+_.mainAxis,A=s.reference[h]+s.reference[w]-_.mainAxis;m<M?m=M:m>A&&(m=A)}if(u){var g,x;const w=h==="y"?"width":"height",M=["top","left"].includes(so(i)),A=s.reference[p]-s.floating[w]+(M&&((g=o.offset)==null?void 0:g[p])||0)+(M?0:_.crossAxis),b=s.reference[p]+s.reference[w]+(M?0:((x=o.offset)==null?void 0:x[p])||0)-(M?_.crossAxis:0);v<A?v=A:v>b&&(v=b)}return{[h]:m,[p]:v}}}},l$=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=vo(n,e),l=await kd(e,a),u=so(t),d=Iu(t),h=Pl(t)==="x",{width:p,height:m}=r.floating;let v,S;u==="top"||u==="bottom"?(v=u,S=d===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(S=u,v=d==="end"?"top":"bottom");const _=m-l[v],g=p-l[S],x=!e.middlewareData.shift;let w=_,M=g;if(h){const b=p-l.left-l.right;M=d||x?Nd(g,b):b}else{const b=m-l.top-l.bottom;w=d||x?Nd(_,b):b}if(x&&!d){const b=Ga(l.left,0),I=Ga(l.right,0),L=Ga(l.top,0),R=Ga(l.bottom,0);h?M=p-2*(b!==0||I!==0?b+I:Ga(l.left,l.right)):w=m-2*(L!==0||R!==0?L+R:Ga(l.top,l.bottom))}await o({...e,availableWidth:M,availableHeight:w});const A=await i.getDimensions(s.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function ri(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Cs(n){return ri(n).getComputedStyle(n)}function dI(n){return n instanceof ri(n).Node}function ha(n){return dI(n)?(n.nodeName||"").toLowerCase():"#document"}function Qi(n){return n instanceof HTMLElement||n instanceof ri(n).HTMLElement}function jA(n){return typeof ShadowRoot<"u"&&(n instanceof ri(n).ShadowRoot||n instanceof ShadowRoot)}function Ud(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Cs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function c$(n){return["table","td","th"].includes(ha(n))}function f1(n){const e=Mw(),t=Cs(n);return t.transform!=="none"||t.perspective!=="none"||!!t.containerType&&t.containerType!=="normal"||!e&&!!t.backdropFilter&&t.backdropFilter!=="none"||!e&&!!t.filter&&t.filter!=="none"||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Mw(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function P0(n){return["html","body","#document"].includes(ha(n))}const d1=Math.min,Kc=Math.max,kg=Math.round,Mm=Math.floor,pa=n=>({x:n,y:n});function hI(n){const e=Cs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Qi(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=kg(t)!==s||kg(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function oo(n){return n instanceof Element||n instanceof ri(n).Element}function Tw(n){return oo(n)?n:n.contextElement}function Zc(n){const e=Tw(n);if(!Qi(e))return pa(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=hI(e);let o=(s?kg(t.width):t.width)/r,a=(s?kg(t.height):t.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const u$=pa(0);function pI(n){const e=ri(n);return Mw()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:u$}function _l(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Tw(n);let o=pa(1);e&&(r?oo(r)&&(o=Zc(r)):o=Zc(n));const a=function(p,m,v){return m===void 0&&(m=!1),!(!v||m&&v!==ri(p))&&m}(s,t,r)?pI(s):pa(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=ri(s),m=r&&oo(r)?ri(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const S=Zc(v),_=v.getBoundingClientRect(),g=getComputedStyle(v),x=_.left+(v.clientLeft+parseFloat(g.paddingLeft))*S.x,w=_.top+(v.clientTop+parseFloat(g.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,h*=S.y,l+=x,u+=w,v=ri(v).frameElement}}return Dg({width:d,height:h,x:l,y:u})}function L0(n){return oo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function ao(n){var e;return(e=(dI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function mI(n){return _l(ao(n)).left+L0(n).scrollLeft}function vu(n){if(ha(n)==="html")return n;const e=n.assignedSlot||n.parentNode||jA(n)&&n.host||ao(n);return jA(e)?e.host:e}function gI(n){const e=vu(n);return P0(e)?n.ownerDocument?n.ownerDocument.body:n.body:Qi(e)&&Ud(e)?e:gI(e)}function Ng(n,e){var t;e===void 0&&(e=[]);const r=gI(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=ri(r);return i?e.concat(s,s.visualViewport||[],Ud(r)?r:[]):e.concat(r,Ng(r))}function XA(n,e,t){let r;if(e==="viewport")r=function(i,s){const o=ri(i),a=ao(i),l=o.visualViewport;let u=a.clientWidth,d=a.clientHeight,h=0,p=0;if(l){u=l.width,d=l.height;const m=Mw();(!m||m&&s==="fixed")&&(h=l.offsetLeft,p=l.offsetTop)}return{width:u,height:d,x:h,y:p}}(n,t);else if(e==="document")r=function(i){const s=ao(i),o=L0(i),a=i.ownerDocument.body,l=Kc(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),u=Kc(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let d=-o.scrollLeft+mI(i);const h=-o.scrollTop;return Cs(a).direction==="rtl"&&(d+=Kc(s.clientWidth,a.clientWidth)-l),{width:l,height:u,x:d,y:h}}(ao(n));else if(oo(e))r=function(i,s){const o=_l(i,!0,s==="fixed"),a=o.top+i.clientTop,l=o.left+i.clientLeft,u=Qi(i)?Zc(i):pa(1);return{width:i.clientWidth*u.x,height:i.clientHeight*u.y,x:l*u.x,y:a*u.y}}(e,t);else{const i=pI(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return Dg(r)}function vI(n,e){const t=vu(n);return!(t===e||!oo(t)||P0(t))&&(Cs(t).position==="fixed"||vI(t,e))}function f$(n,e,t){const r=Qi(e),i=ao(e),s=t==="fixed",o=_l(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=pa(0);if(r||!r&&!s)if((ha(e)!=="body"||Ud(i))&&(a=L0(e)),Qi(e)){const u=_l(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else i&&(l.x=mI(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function YA(n,e){return Qi(n)&&Cs(n).position!=="fixed"?e?e(n):n.offsetParent:null}function qA(n,e){const t=ri(n);if(!Qi(n))return t;let r=YA(n,e);for(;r&&c$(r)&&Cs(r).position==="static";)r=YA(r,e);return r&&(ha(r)==="html"||ha(r)==="body"&&Cs(r).position==="static"&&!f1(r))?t:r||function(i){let s=vu(i);for(;Qi(s)&&!P0(s);){if(f1(s))return s;s=vu(s)}return null}(n)||t}const d$={convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Qi(t),s=ao(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=pa(1);const l=pa(0);if((i||!i&&r!=="fixed")&&((ha(t)!=="body"||Ud(s))&&(o=L0(t)),Qi(t))){const u=_l(t);a=Zc(t),l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},getDocumentElement:ao,getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?function(l,u){const d=u.get(l);if(d)return d;let h=Ng(l).filter(S=>oo(S)&&ha(S)!=="body"),p=null;const m=Cs(l).position==="fixed";let v=m?vu(l):l;for(;oo(v)&&!P0(v);){const S=Cs(v),_=f1(v);_||S.position!=="fixed"||(p=null),(m?!_&&!p:!_&&S.position==="static"&&p&&["absolute","fixed"].includes(p.position)||Ud(v)&&!_&&vI(l,v))?h=h.filter(g=>g!==v):p=S,v=vu(v)}return u.set(l,h),h}(e,this._c):[].concat(t),r],o=s[0],a=s.reduce((l,u)=>{const d=XA(e,u,i);return l.top=Kc(d.top,l.top),l.right=d1(d.right,l.right),l.bottom=d1(d.bottom,l.bottom),l.left=Kc(d.left,l.left),l},XA(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:qA,getElementRects:async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||qA,s=this.getDimensions;return{reference:f$(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}},getClientRects:function(n){return Array.from(n.getClientRects())},getDimensions:function(n){return hI(n)},getScale:Zc,isElement:oo,isRTL:function(n){return getComputedStyle(n).direction==="rtl"}};function h$(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Tw(n),d=i||s?[...u?Ng(u):[],...Ng(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const h=u&&a?function(_,g){let x,w=null;const M=ao(_);function A(){clearTimeout(x),w&&w.disconnect(),w=null}return function b(I,L){I===void 0&&(I=!1),L===void 0&&(L=1),A();const{left:R,top:P,width:k,height:V}=_.getBoundingClientRect();if(I||g(),!k||!V)return;const H={rootMargin:-Mm(P)+"px "+-Mm(M.clientWidth-(R+k))+"px "+-Mm(M.clientHeight-(P+V))+"px "+-Mm(R)+"px",threshold:Kc(0,d1(1,L))||1};let j=!0;function q(Z){const ee=Z[0].intersectionRatio;if(ee!==L){if(!j)return b();ee?b(!1,ee):x=setTimeout(()=>{b(!1,1e-7)},100)}j=!1}try{w=new IntersectionObserver(q,{...H,root:M.ownerDocument})}catch{w=new IntersectionObserver(q,H)}w.observe(_)}(!0),A}(u,t):null;let p,m=-1,v=null;o&&(v=new ResizeObserver(_=>{let[g]=_;g&&g.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{v&&v.observe(e)})),t()}),u&&!l&&v.observe(u),v.observe(e));let S=l?_l(n):null;return l&&function _(){const g=_l(n);!S||g.x===S.x&&g.y===S.y&&g.width===S.width&&g.height===S.height||t(),S=g,p=requestAnimationFrame(_)}(),t(),()=>{d.forEach(_=>{i&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),h&&h(),v&&v.disconnect(),v=null,l&&cancelAnimationFrame(p)}}const p$=(n,e,t)=>{const r=new Map,i={platform:d$,...t},s={...i.platform,_c:r};return QW(n,e,{...i,platform:s})},m$=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?GA({element:r.current,padding:i}).fn(t):{}:r?GA({element:r,padding:i}).fn(t):{}}}};var Jm=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Ug(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!Ug(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Ug(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function yI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function KA(n,e){const t=yI(n);return Math.round(e*t)/t}function ZA(n){const e=D.useRef(n);return Jm(()=>{e.current=n}),e}function g$(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[d,h]=D.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=D.useState(r);Ug(p,r)||m(r);const[v,S]=D.useState(null),[_,g]=D.useState(null),x=D.useCallback(Z=>{Z!=b.current&&(b.current=Z,S(Z))},[S]),w=D.useCallback(Z=>{Z!==I.current&&(I.current=Z,g(Z))},[g]),M=s||v,A=o||_,b=D.useRef(null),I=D.useRef(null),L=D.useRef(d),R=ZA(l),P=ZA(i),k=D.useCallback(()=>{if(!b.current||!I.current)return;const Z={placement:e,strategy:t,middleware:p};P.current&&(Z.platform=P.current),p$(b.current,I.current,Z).then(ee=>{const F={...ee,isPositioned:!0};V.current&&!Ug(L.current,F)&&(L.current=F,Wd.flushSync(()=>{h(F)}))})},[p,e,t,P]);Jm(()=>{u===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,h(Z=>({...Z,isPositioned:!1})))},[u]);const V=D.useRef(!1);Jm(()=>(V.current=!0,()=>{V.current=!1}),[]),Jm(()=>{if(M&&(b.current=M),A&&(I.current=A),M&&A){if(R.current)return R.current(M,A,k);k()}},[M,A,k,R]);const H=D.useMemo(()=>({reference:b,floating:I,setReference:x,setFloating:w}),[x,w]),j=D.useMemo(()=>({reference:M,floating:A}),[M,A]),q=D.useMemo(()=>{const Z={position:t,left:0,top:0};if(!j.floating)return Z;const ee=KA(j.floating,d.x),F=KA(j.floating,d.y);return a?{...Z,transform:"translate("+ee+"px, "+F+"px)",...yI(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:F}},[t,a,j.floating,d.x,d.y]);return D.useMemo(()=>({...d,update:k,refs:H,elements:j,floatingStyles:q}),[d,k,H,j,q])}const v$=D.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return D.createElement(Rl.svg,wn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:D.createElement("polygon",{points:"0,0 30,0 15,10"}))}),y$=v$;function _$(n){const[e,t]=D.useState(void 0);return gu(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const _I="Popper",[xI,SI]=aI(_I),[x$,wI]=xI(_I),S$=n=>{const{__scopePopper:e,children:t}=n,[r,i]=D.useState(null);return D.createElement(x$,{scope:e,anchor:r,onAnchorChange:i},t)},w$="PopperAnchor",E$=D.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=wI(w$,t),o=D.useRef(null),a=Ru(e,o);return D.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:D.createElement(Rl.div,wn({},i,{ref:a}))}),EI="PopperContent",[M$,T$]=xI(EI),b$=D.forwardRef((n,e)=>{var t,r,i,s,o,a,l,u;const{__scopePopper:d,side:h="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:S=0,collisionBoundary:_=[],collisionPadding:g=0,sticky:x="partial",hideWhenDetached:w=!1,avoidCollisions:M=!0,onPlaced:A,...b}=n,I=wI(EI,d),[L,R]=D.useState(null),P=Ru(e,pe=>R(pe)),[k,V]=D.useState(null),H=_$(k),j=(t=H==null?void 0:H.width)!==null&&t!==void 0?t:0,q=(r=H==null?void 0:H.height)!==null&&r!==void 0?r:0,Z=h+(m!=="center"?"-"+m:""),ee=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},F=Array.isArray(_)?_:[_],K=F.length>0,X={padding:ee,boundary:F.filter(P$),altBoundary:K},{refs:oe,floatingStyles:W,placement:he,isPositioned:le,middlewareData:Te}=g$({strategy:"fixed",placement:Z,whileElementsMounted:h$,elements:{reference:I.anchor},middleware:[s$({mainAxis:p+q,alignmentAxis:v}),M&&o$({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?a$():void 0,...X}),M&&r$({...X}),l$({...X,apply:({elements:pe,rects:be,availableWidth:ye,availableHeight:$e})=>{const{width:Ue,height:ze}=be.reference,Je=pe.floating.style;Je.setProperty("--radix-popper-available-width",`${ye}px`),Je.setProperty("--radix-popper-available-height",`${$e}px`),Je.setProperty("--radix-popper-anchor-width",`${Ue}px`),Je.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),k&&m$({element:k,padding:S}),L$({arrowWidth:j,arrowHeight:q}),w&&i$({strategy:"referenceHidden"})]}),[we,Re]=MI(he),Ze=Lu(A);gu(()=>{le&&(Ze==null||Ze())},[le,Ze]);const Qe=(i=Te.arrow)===null||i===void 0?void 0:i.x,xt=(s=Te.arrow)===null||s===void 0?void 0:s.y,Ke=((o=Te.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[G,_e]=D.useState();return gu(()=>{L&&_e(window.getComputedStyle(L).zIndex)},[L]),D.createElement("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:le?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(a=Te.transformOrigin)===null||a===void 0?void 0:a.x,(l=Te.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},D.createElement(M$,{scope:d,placedSide:we,onArrowChange:V,arrowX:Qe,arrowY:xt,shouldHideArrow:Ke},D.createElement(Rl.div,wn({"data-side":we,"data-align":Re},b,{ref:P,style:{...b.style,animation:le?void 0:"none",opacity:(u=Te.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))}),A$="PopperArrow",C$={top:"bottom",right:"left",bottom:"top",left:"right"},R$=D.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=T$(A$,r),o=C$[s.placedSide];return D.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},D.createElement(y$,wn({},i,{ref:t,style:{...i.style,display:"block"}})))});function P$(n){return n!==null}const L$=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:u}=e,h=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=h?0:n.arrowWidth,m=h?0:n.arrowHeight,[v,S]=MI(a),_={start:"0%",center:"50%",end:"100%"}[S],g=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,x=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let w="",M="";return v==="bottom"?(w=h?_:`${g}px`,M=`${-m}px`):v==="top"?(w=h?_:`${g}px`,M=`${l.floating.height+m}px`):v==="right"?(w=`${-m}px`,M=h?_:`${x}px`):v==="left"&&(w=`${l.floating.width+m}px`,M=h?_:`${x}px`),{data:{x:w,y:M}}}});function MI(n){const[e,t="center"]=n.split("-");return[e,t]}const I$=S$,D$=E$,O$=b$,k$=R$;function N$(n,e){return D.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const TI=n=>{const{present:e,children:t}=n,r=U$(e),i=typeof t=="function"?t({present:r.isPresent}):D.Children.only(t),s=Ru(r.ref,i.ref);return typeof t=="function"||r.isPresent?D.cloneElement(i,{ref:s}):null};TI.displayName="Presence";function U$(n){const[e,t]=D.useState(),r=D.useRef({}),i=D.useRef(n),s=D.useRef("none"),o=n?"mounted":"unmounted",[a,l]=N$(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const u=Tm(r.current);s.current=a==="mounted"?u:"none"},[a]),gu(()=>{const u=r.current,d=i.current;if(d!==n){const p=s.current,m=Tm(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),gu(()=>{if(e){const u=h=>{const m=Tm(r.current).includes(h.animationName);h.target===e&&m&&Wd.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(s.current=Tm(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function Tm(n){return(n==null?void 0:n.animationName)||"none"}function F$({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=z$({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Lu(t),l=D.useCallback(u=>{if(s){const h=typeof u=="function"?u(n):u;h!==n&&a(h)}else i(u)},[s,n,i,a]);return[o,l]}function z$({defaultProp:n,onChange:e}){const t=D.useState(n),[r]=t,i=D.useRef(r),s=Lu(e);return D.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const B$=D.forwardRef((n,e)=>D.createElement(Rl.span,wn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),H$=B$,[I0,Rq]=aI("Tooltip",[SI]),D0=SI(),V$="TooltipProvider",h1="tooltip.open",[Pq,bw]=I0(V$),Aw="Tooltip",[G$,O0]=I0(Aw),W$=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=bw(Aw,n.__scopeTooltip),u=D0(e),[d,h]=D.useState(null),p=JW(),m=D.useRef(0),v=o??l.disableHoverableContent,S=a??l.delayDuration,_=D.useRef(!1),[g=!1,x]=F$({prop:r,defaultProp:i,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(h1))):l.onClose(),s==null||s(I)}}),w=D.useMemo(()=>g?_.current?"delayed-open":"instant-open":"closed",[g]),M=D.useCallback(()=>{window.clearTimeout(m.current),_.current=!1,x(!0)},[x]),A=D.useCallback(()=>{window.clearTimeout(m.current),x(!1)},[x]),b=D.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,x(!0)},S)},[S,x]);return D.useEffect(()=>()=>window.clearTimeout(m.current),[]),D.createElement(I$,u,D.createElement(G$,{scope:e,contentId:p,open:g,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:D.useCallback(()=>{l.isOpenDelayed?b():M()},[l.isOpenDelayed,b,M]),onTriggerLeave:D.useCallback(()=>{v?A():window.clearTimeout(m.current)},[A,v]),onOpen:M,onClose:A,disableHoverableContent:v},t))},JA="TooltipTrigger",$$=D.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=O0(JA,t),s=bw(JA,t),o=D0(t),a=D.useRef(null),l=Ru(e,a,i.onTriggerChange),u=D.useRef(!1),d=D.useRef(!1),h=D.useCallback(()=>u.current=!1,[]);return D.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),D.createElement(D$,wn({asChild:!0},o),D.createElement(Rl.button,wn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Ks(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ks(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Ks(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ks(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:Ks(n.onBlur,i.onClose),onClick:Ks(n.onClick,i.onClose)})))}),j$="TooltipPortal",[Lq,X$]=I0(j$,{forceMount:void 0}),Fd="TooltipContent",Y$=D.forwardRef((n,e)=>{const t=X$(Fd,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=O0(Fd,n.__scopeTooltip);return D.createElement(TI,{present:r||o.open},o.disableHoverableContent?D.createElement(bI,wn({side:i},s,{ref:e})):D.createElement(q$,wn({side:i},s,{ref:e})))}),q$=D.forwardRef((n,e)=>{const t=O0(Fd,n.__scopeTooltip),r=bw(Fd,n.__scopeTooltip),i=D.useRef(null),s=Ru(e,i),[o,a]=D.useState(null),{trigger:l,onClose:u}=t,d=i.current,{onPointerInTransitChange:h}=r,p=D.useCallback(()=>{a(null),h(!1)},[h]),m=D.useCallback((v,S)=>{const _=v.currentTarget,g={x:v.clientX,y:v.clientY},x=e9(g,_.getBoundingClientRect()),w=t9(g,x),M=n9(S.getBoundingClientRect()),A=i9([...w,...M]);a(A),h(!0)},[h]);return D.useEffect(()=>()=>p(),[p]),D.useEffect(()=>{if(l&&d){const v=_=>m(_,d),S=_=>m(_,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",S),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",S)}}},[l,d,m,p]),D.useEffect(()=>{if(o){const v=S=>{const _=S.target,g={x:S.clientX,y:S.clientY},x=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),w=!r9(g,o);x?p():w&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,u,p]),D.createElement(bI,wn({},n,{ref:s}))}),[K$,Z$]=I0(Aw,{isInside:!1}),bI=D.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=O0(Fd,t),u=D0(t),{onClose:d}=l;return D.useEffect(()=>(document.addEventListener(h1,d),()=>document.removeEventListener(h1,d)),[d]),D.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),D.createElement(XW,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d},D.createElement(O$,wn({"data-state":l.stateAttribute},u,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),D.createElement(tI,null,r),D.createElement(K$,{scope:t,isInside:!0},D.createElement(H$,{id:l.contentId,role:"tooltip"},i||r))))}),J$="TooltipArrow",Q$=D.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=D0(t);return Z$(J$,t).isInside?null:D.createElement(k$,wn({},i,r,{ref:e}))});function e9(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function t9(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function n9(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function r9(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,d=e[o].y;l>r!=d>r&&t<(u-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function i9(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),s9(e)}function s9(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const o9=W$,a9=$$,l9=Y$,c9=Q$;function u9(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Vt(n,e){if(n==null)return{};var t=u9(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let an;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(an||(an={}));const f9={[an.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[an.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[an.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[an.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[an.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[an.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[an.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[an.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[an.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[an.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[an.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function AI(n,e,...t){const[r,...i]=f9[e](...t);console[n]("LEVA: "+r,...i)}const Js=AI.bind(null,"warn"),d9=AI.bind(null,"log"),h9=["value"],p9=["schema"],m9=["value"],CI=[],xl={};function QA(n){let{value:e}=n,t=Vt(n,h9);for(let r of CI){const i=r(e,t);if(i)return i}}function So(n,e){let{schema:t}=e,r=Vt(e,p9);if(n in xl){Js(an.ALREADY_REGISTERED_TYPE,n);return}CI.push((i,s)=>t(i,s)&&n),xl[n]=r}function u_(n,e,t,r){const{normalize:i}=xl[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Vt(e,m9);return{value:s,settings:o}}function g9(n,e,t,r,i,s){const{sanitize:o}=xl[n];return o?o(e,t,r,i,s):e}function eC(n,e,t){const{format:r}=xl[n];return r?r(e,t):e}function v9(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ot(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tC(Object(t),!0).forEach(function(r){v9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const ma=(n,e,t)=>n>t?t:n<e?e:n,y9=n=>{if(n===""||typeof n=="number")return n;try{const e=zo(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},_9=Math.log(10);function nC(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/_9)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const Fg=(n,e,t)=>t===e?0:(ma(n,e,t)-e)/(t-e),zg=(n,e,t)=>n*(t-e)+e,x9=()=>"_"+Math.random().toString(36).substr(2,9),rC=/\(([0-9+\-*/^ .]+)\)/,iC=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,sC=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,oC=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,aC=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,lC=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function zo(n){if(isNaN(Number(n)))if(rC.test(n)){const e=n.replace(rC,(t,r)=>String(zo(r)));return zo(e)}else if(iC.test(n)){const e=n.replace(iC,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return zo(e)}else if(sC.test(n)){const e=n.replace(sC,(t,r,i)=>String(Number(r)*Number(i)));return zo(e)}else if(oC.test(n)){const e=n.replace(oC,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return zo(e)}else if(aC.test(n)){const e=n.replace(aC,(t,r,i)=>String(Number(r)+Number(i)));return zo(e)}else if(lC.test(n)){const e=n.replace(lC,(t,r,i)=>String(Number(r)-Number(i)));return zo(e)}else return Number(n);return Number(n)}function S9(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function w9(n,e){const t=ot({},n);return e.forEach(r=>r in n&&delete t[r]),t}function E9(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function RI(n){return Object.prototype.toString.call(n)==="[object Object]"}const M9=n=>RI(n)&&Object.keys(n).length===0;let qi;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(qi||(qi={}));let es;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(es||(es={}));const T9=["type","__customInput"],b9=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],A9=["type"];function PI(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:ot({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:A,__customInput:b}=n,I=Vt(n,T9);return PI(b,e,I,A)}const{render:o,label:a,optional:l,order:u=0,disabled:d,hint:h,onChange:p,onEditStart:m,onEditEnd:v,transient:S}=n,_=Vt(n,b9),g=ot({render:o,key:e,label:a??e,hint:h,transient:S??!!p,onEditStart:m,onEditEnd:v,disabled:d,optional:l,order:u},t);let{type:x}=_,w=Vt(_,A9);if(x=r??x,x in qi)return{type:x,input:w,options:g};let M;return r&&RI(w)&&"value"in w?M=w.value:M=M9(w)?void 0:w,{type:x,input:M,options:ot(ot({},g),{},{onChange:p,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function C9(n,e,t,r){const i=PI(n,e),{type:s,input:o,options:a}=i;if(s)return s in qi?i:{type:s,input:u_(s,o,t,r),options:a};let l=QA(o);return l?{type:l,input:u_(l,o,t,r),options:a}:(l=QA({value:o}),l?{type:l,input:u_(l,{value:o},t,r),options:a}:!1)}function cC(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=LI({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const R9=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function LI({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=g9(n,o,t,e,i,s)}catch(l){throw new R9(`The value \`${r}\` did not result in a correct value.`,e,l)}return Dd(a,e)?e:a}const II=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},DI=n=>n.shiftKey?5:n.altKey?1/5:1;function P9(n,e){const t=console.error;console.error=()=>{},nP.render(n,e),console.error=t}const L9=["value"],I9=["min","max"],D9=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},OI=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=ma(i,e,t);return r?s+r:s},O9=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},kI=n=>{let{value:e}=n,t=Vt(n,L9);const{min:r=-1/0,max:i=1/0}=t,s=Vt(t,I9);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=ma(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?nC(l)*10:nC(o);l=l||u/10;const d=Math.round(ma(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:ot({initialValue:o,step:l,pad:d,min:r,max:i,suffix:a},s)}},NI=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var UI=Object.freeze({__proto__:null,schema:D9,sanitize:OI,format:O9,normalize:kI,sanitizeStep:NI});function En(){return En=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},En.apply(this,arguments)}const FI=D.createContext({});function vr(){return D.useContext(FI)}const Cw=D.createContext(null),zI=D.createContext(null),BI=D.createContext(null);function ph(){return D.useContext(zI)}function k9(){return D.useContext(BI)}const HI=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function bm(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const bf={$inputStyle:()=>n=>bm(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>bm(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>bm(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>bm(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:st,css:Iq,createTheme:N9,globalCss:U9,keyframes:Dq}=HW({prefix:"leva",theme:HI(),utils:ot(ot({},bf),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":bf.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":bf.$focusStyle()(n)}),$hover:n=>({"&:hover":bf.$hoverStyle()(n)}),$active:n=>({"&:active":bf.$activeStyle()(n)})})}),F9=U9({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function z9(n){const e=HI();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=N9(e);return{theme:e,className:t.className}}function lo(n,e){const{theme:t}=D.useContext(Cw);if(!(n in t)||!(e in t[n]))return Js(an.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const VI=st("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),GI=st("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${VI}`]:{paddingLeft:0}}),B9=st(GI,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),H9=st("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),V9=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],G9=["onUpdate"];function Rw(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,d=Vt(n,V9);const{id:h,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=vr(),S=a||h,_=D.useRef(null),g=u>0,x=g?"textarea":"input",w=D.useCallback(b=>I=>{const L=I.currentTarget.value;b(L)},[]);$.useEffect(()=>{const b=_.current,I=w(L=>{r(L),m()});return b==null||b.addEventListener("blur",I),()=>b==null?void 0:b.removeEventListener("blur",I)},[w,r,m]);const M=D.useCallback(b=>{b.key==="Enter"&&w(r)(b)},[w,r]),A=Object.assign({as:x},g?{rows:u}:{},d);return $.createElement(H9,{textArea:g},e&&typeof e=="string"?$.createElement(GI,null,e):e,$.createElement(VI,En({levaType:o,ref:_,id:S,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:w(i),onFocus:()=>p(),onKeyPress:M,onKeyDown:s,disabled:v},A)))}function W9(n){let{onUpdate:e}=n,t=Vt(n,G9);const r=D.useCallback(s=>e(y9(s)),[e]),i=D.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return $.createElement(Rw,En({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const Bg=st("div",{}),p1=st("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),$9=st("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${p1}::after`]:{opacity:.6},[`${Bg}:hover > & + ${p1}::after`]:{opacity:.6},[`${Bg}:hover > & > svg`]:{opacity:1}}),WI=st("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Bg}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),$I=st("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${WI} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),jI=st($I,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),j9=st("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),X9=st("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),m1=st("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Y9=st("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${m1}`]:{pointerEvents:"auto"}}}}}),XI=st("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),q9=st("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),K9=st(c9,{fill:"$toolTipBackground"});function Pw({children:n}){const{className:e}=D.useContext(Cw);return $.createElement(cW,{className:e},n)}const Z9=["align"];function J9(){const{id:n,disable:e,disabled:t}=vr();return $.createElement($.Fragment,null,$.createElement(X9,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),$.createElement("label",{htmlFor:n+"__disable"}))}function Q9(n){const{id:e,optional:t,hint:r}=vr(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return $.createElement($.Fragment,null,t&&$.createElement(J9,null),r!==void 0?$.createElement(o9,null,$.createElement(a9,{asChild:!0},$.createElement(m1,En({},i,n))),$.createElement(l9,{side:"top",sideOffset:2},$.createElement(q9,null,r,$.createElement(K9,null)))):$.createElement(m1,En({},i,s,n)))}function rs(n){let{align:e}=n,t=Vt(n,Z9);const{value:r,label:i,key:s,disabled:o}=vr(),{hideCopyButton:a}=k9(),l=!a&&s!==void 0,[u,d]=D.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),d(!0)}catch{Js(an.CLIPBOARD_ERROR,{[s]:r})}};return $.createElement(j9,{align:e,onPointerLeave:()=>d(!1)},$.createElement(Q9,t),l&&!o&&$.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),$.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):$.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),$.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const e7=["toggled"],t7=st("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Lw(n){let{toggled:e}=n,t=Vt(n,e7);return $.createElement(t7,En({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),$.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const n7=["input"];function Pi(n){let{input:e}=n,t=Vt(n,n7);return e?$.createElement(jI,t):$.createElement($I,t)}function YI({value:n,type:e,settings:t,setValue:r}){const[i,s]=D.useState(eC(e,n,t)),o=D.useRef(n),a=D.useRef(t);a.current=t;const l=D.useCallback(d=>s(eC(e,d,a.current)),[e]),u=D.useCallback(d=>{try{r(d)}catch(h){const{type:p,previousValue:m}=h;if(p!=="LEVA_ERROR")throw h;l(m)}},[l,r]);return D.useEffect(()=>{Dd(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function mh(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=vr();return B8(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function r7(n){const e=D.useRef(null),t=D.useRef(null),r=D.useRef(!1);return D.useEffect(()=>{const i=II(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),D.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function qI(){const n=D.useRef(null),e=D.useRef({x:0,y:0}),t=D.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const i7=["__refCount"],f_=(n,e)=>{if(!n[e])return null;const t=n[e];return Vt(t,i7)};function s7(n){const e=ph(),[t,r]=D.useState(f_(e.getData(),n)),i=D.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=D.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=D.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=D.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=D.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return D.useEffect(()=>{r(f_(e.getData(),n));const u=e.useStore.subscribe(d=>f_(d.data,n),r,{equalityFn:hh});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const o7=st("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),KI=st("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),g1=st("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),ZI=st("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),JI=st("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function a7({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=D.useRef(null),a=D.useRef(null),l=D.useRef(0),u=lo("sizes","scrubberWidth"),d=mh(({event:p,first:m,xy:[v],movement:[S],memo:_})=>{if(m){const{width:x,left:w}=o.current.getBoundingClientRect();l.current=x-parseFloat(u),_=(p==null?void 0:p.target)===a.current?n:zg((v-w)/x,e,t)}const g=_+zg(S/l.current,0,t-e);return r(NI(g,{step:i,initialValue:s})),_}),h=Fg(n,e,t);return $.createElement(ZI,En({ref:o},d()),$.createElement(KI,null,$.createElement(JI,{style:{left:0,right:`${(1-h)*100}%`}})),$.createElement(g1,{ref:a,style:{left:`calc(${h} * (100% - ${u}))`}}))}const l7=$.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=D.useState(!1),o=mh(({active:a,delta:[l],event:u,memo:d=0})=>(s(a),d+=l/2,Math.abs(d)>=1&&(e(h=>parseFloat(h)+Math.floor(d)*t*DI(u)),d=0),d));return $.createElement(B9,En({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function QI({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&$.createElement(l7,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return $.createElement(W9,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function c7(){const n=vr(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return $.createElement(Pi,{input:!0},$.createElement(rs,null,e),$.createElement(o7,{hasRange:l},l&&$.createElement(a7,En({value:parseFloat(t),onDrag:r},i)),$.createElement(QI,En({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:u7}=UI,f7=Vt(UI,["sanitizeStep"]);var d7=ot({component:c7},f7);const h7=(n,e)=>Br().schema({options:Br().passesAnyOf(Br().object(),Br().array())}).test(e),p7=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},m7=(n,{values:e})=>e.indexOf(n),g7=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var v7=Object.freeze({__proto__:null,schema:h7,sanitize:p7,format:m7,normalize:g7});const y7=st("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),v1=st("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),_7=st("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${v1}:focus + &`]:{$focusStyle:""},[`${v1}:hover + &`]:{$hoverStyle:""}});function x7({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=D.useRef();return e===a[n]&&(l.current=o[n]),$.createElement(y7,null,$.createElement(v1,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,d)=>$.createElement("option",{key:u,value:d},u))),$.createElement(_7,null,l.current),$.createElement(Lw,{toggled:!0}))}function S7(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(x7,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var w7=ot({component:S7},v7);const E7=n=>Br().string().test(n),M7=n=>{if(typeof n!="string")throw Error("Invalid string");return n},T7=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var b7=Object.freeze({__proto__:null,schema:E7,sanitize:M7,normalize:T7});const A7=["displayValue","onUpdate","onChange","editable"],C7=st("div",{whiteSpace:"pre-wrap"});function R7(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Vt(n,A7);return i?$.createElement(Rw,En({value:e,onUpdate:t,onChange:r},s)):$.createElement(C7,null,e)}function P7(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(R7,En({displayValue:t,onUpdate:r,onChange:i},e)))}var L7=ot({component:P7},b7);const I7=n=>Br().boolean().test(n),D7=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var O7=Object.freeze({__proto__:null,schema:I7,sanitize:D7});const k7=st("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function N7({value:n,onUpdate:e,id:t,disabled:r}){return $.createElement(k7,null,$.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),$.createElement("label",{htmlFor:t},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function U7(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(N7,{value:e,onUpdate:t,id:i,disabled:r}))}var F7=ot({component:U7},O7);const z7=["locked"];function B7({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=D.useRef(n[t]);o.current=n[t];const a=D.useCallback(u=>i({[t]:LI({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=YI({type:"NUMBER",value:n[t],settings:r,setValue:a});return $.createElement(QI,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const H7=st("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function V7(n){let{locked:e}=n,t=Vt(n,z7);return $.createElement("svg",En({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?$.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):$.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Iw({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=vr(),{lock:o,locked:a}=t;return $.createElement(H7,{withLock:o},o&&$.createElement(V7,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>$.createElement(B7,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const eD=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=kI(ot({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},G7=["lock"],W7=["value"];function $7(n){const e=Br().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function j7(n){return Array.isArray(n)?"array":"object"}function Qf(n,e,t){return j7(n)===e?n:e==="array"?Object.values(n):E9(n,t)}const X7=(n,e,t)=>{const r=Qf(n,"object",e.keys);for(let o in r)r[o]=OI(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Qf(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],d=u!==0?l/u:1;for(let h in o)h===a?s[a]=l:s[h]=o[h]*d}else s=ot(ot({},o),r)}return Qf(s,e.format,e.keys)},Y7=(n,e)=>Qf(n,"object",e.keys),q7=n=>!!n&&("step"in n||"min"in n||"max"in n);function K7(n,e,t=[]){const{lock:r=!1}=e,i=Vt(e,G7),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Qf(n,"object",o),l=q7(i)?o.reduce((d,h)=>Object.assign(d,{[h]:i}),{}):i,u=eD(a,l);return{value:s==="array"?n:a,settings:ot(ot({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function tD(n){return{schema:$7(n.length),normalize:e=>{let{value:t}=e,r=Vt(e,W7);return K7(t,r,n)},format:(e,t)=>Y7(e,t),sanitize:(e,t,r)=>X7(e,t,r)}}var Z7={grad:.9,turn:360,rad:360/(2*Math.PI)},$s=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Xn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ti=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},nD=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},uC=function(n){return{r:Ti(n.r,0,255),g:Ti(n.g,0,255),b:Ti(n.b,0,255),a:Ti(n.a)}},d_=function(n){return{r:Xn(n.r),g:Xn(n.g),b:Xn(n.b),a:Xn(n.a,3)}},J7=/^#([0-9a-f]{3,8})$/i,Am=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},rD=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},iD=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},fC=function(n){return{h:nD(n.h),s:Ti(n.s,0,100),l:Ti(n.l,0,100),a:Ti(n.a)}},dC=function(n){return{h:Xn(n.h),s:Xn(n.s),l:Xn(n.l),a:Xn(n.a,3)}},hC=function(n){return iD((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},ed=function(n){return{h:(e=rD(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},Q7=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ej=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y1={string:[[function(n){var e=J7.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Xn(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Xn(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=tj.exec(n)||nj.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:uC({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Q7.exec(n)||ej.exec(n);if(!e)return null;var t,r,i=fC({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Z7[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return hC(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return $s(e)&&$s(t)&&$s(r)?uC({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!$s(e)||!$s(t)||!$s(r))return null;var o=fC({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return hC(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!$s(e)||!$s(t)||!$s(r))return null;var o=function(a){return{h:nD(a.h),s:Ti(a.s,0,100),v:Ti(a.v,0,100),a:Ti(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return iD(o)},"hsv"]]},pC=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},sD=function(n){return typeof n=="string"?pC(n.trim(),y1.string):typeof n=="object"&&n!==null?pC(n,y1.object):[null,void 0]},rj=function(n){return sD(n)[1]},h_=function(n,e){var t=ed(n);return{h:t.h,s:Ti(t.s+100*e,0,100),l:t.l,a:t.a}},p_=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},mC=function(n,e){var t=ed(n);return{h:t.h,s:t.s,l:Ti(t.l+100*e,0,100),a:t.a}},_1=function(){function n(e){this.parsed=sD(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Xn(p_(this.rgba),2)},n.prototype.isDark=function(){return p_(this.rgba)<.5},n.prototype.isLight=function(){return p_(this.rgba)>=.5},n.prototype.toHex=function(){return e=d_(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Am(Xn(255*s)):"","#"+Am(t)+Am(r)+Am(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return d_(this.rgba)},n.prototype.toRgbString=function(){return e=d_(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return dC(ed(this.rgba))},n.prototype.toHslString=function(){return e=dC(ed(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=rD(this.rgba),{h:Xn(e.h),s:Xn(e.s),v:Xn(e.v),a:Xn(e.a,3)};var e},n.prototype.invert=function(){return Mr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Mr(h_(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mr(h_(this.rgba,-e))},n.prototype.grayscale=function(){return Mr(h_(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Mr(mC(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Mr(mC(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Mr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Xn(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=ed(this.rgba);return typeof e=="number"?Mr({h:e,s:t.s,l:t.l,a:t.a}):Xn(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Mr(e).toHex()},n}(),Mr=function(n){return n instanceof _1?n:new _1(n)},gC=[],ij=function(n){n.forEach(function(e){gC.indexOf(e)<0&&(e(_1,y1),gC.push(e))})};function sj(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var d=this.toRgb(),h=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var S=(a=d,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));S<h&&(h=S,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Du(){return(Du=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function Dw(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function x1(n){var e=D.useRef(n),t=D.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var yu=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},td=function(n){return"touches"in n},S1=function(n){return n&&n.ownerDocument.defaultView||self},vC=function(n,e,t){var r=n.getBoundingClientRect(),i=td(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:yu((i.pageX-(r.left+S1(n).pageXOffset))/r.width),top:yu((i.pageY-(r.top+S1(n).pageYOffset))/r.height)}},yC=function(n){!td(n)&&n.preventDefault()},Ow=$.memo(function(n){var e=n.onMove,t=n.onKey,r=Dw(n,["onMove","onKey"]),i=D.useRef(null),s=x1(e),o=x1(t),a=D.useRef(null),l=D.useRef(!1),u=D.useMemo(function(){var m=function(_){yC(_),(td(_)?_.touches.length>0:_.buttons>0)&&i.current?s(vC(i.current,_,a.current)):S(!1)},v=function(){return S(!1)};function S(_){var g=l.current,x=S1(i.current),w=_?x.addEventListener:x.removeEventListener;w(g?"touchmove":"mousemove",m),w(g?"touchend":"mouseup",v)}return[function(_){var g=_.nativeEvent,x=i.current;if(x&&(yC(g),!function(M,A){return A&&!td(M)}(g,l.current)&&x)){if(td(g)){l.current=!0;var w=g.changedTouches||[];w.length&&(a.current=w[0].identifier)}x.focus(),s(vC(x,g,a.current)),S(!0)}},function(_){var g=_.which||_.keyCode;g<37||g>40||(_.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},S]},[o,s]),d=u[0],h=u[1],p=u[2];return D.useEffect(function(){return p},[p]),$.createElement("div",Du({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),gh=function(n){return n.filter(Boolean).join(" ")},kw=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=gh(["react-colorful__pointer",n.className]);return $.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},$.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Tr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},oD=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Tr(n.h),s:Tr(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Tr(i/2),a:Tr(r,2)}},w1=function(n){var e=oD(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},m_=function(n){var e=oD(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},aD=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:Tr(255*[r,a,o,o,l,r][u]),g:Tr(255*[l,r,r,a,o,o][u]),b:Tr(255*[o,o,l,r,r,a][u]),a:Tr(i,2)}},lD=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Tr(60*(a<0?a+6:a)),s:Tr(s?o/s*100:0),v:Tr(s/255*100),a:i}},cD=$.memo(function(n){var e=n.hue,t=n.onChange,r=gh(["react-colorful__hue",n.className]);return $.createElement("div",{className:r},$.createElement(Ow,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:yu(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Tr(e),"aria-valuemax":"360","aria-valuemin":"0"},$.createElement(kw,{className:"react-colorful__hue-pointer",left:e/360,color:w1({h:e,s:100,v:100,a:1})})))}),uD=$.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:w1({h:e.h,s:100,v:100,a:1})};return $.createElement("div",{className:"react-colorful__saturation",style:r},$.createElement(Ow,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:yu(e.s+100*i.left,0,100),v:yu(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Tr(e.s)+"%, Brightness "+Tr(e.v)+"%"},$.createElement(kw,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:w1(e)})))}),Nw=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function fD(n,e,t){var r=x1(t),i=D.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=D.useRef({color:e,hsva:s});D.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),D.useEffect(function(){var u;Nw(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,n,r]);var l=D.useCallback(function(u){o(function(d){return Object.assign({},d,u)})},[]);return[s,l]}var oj=typeof window<"u"?D.useLayoutEffect:D.useEffect,aj=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},_C=new Map,dD=function(n){oj(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!_C.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,_C.set(e,t);var r=aj();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},lj=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=Dw(n,["className","colorModel","color","onChange"]),a=D.useRef(null);dD(a);var l=fD(t,i,s),u=l[0],d=l[1],h=gh(["react-colorful",e]);return $.createElement("div",Du({},o,{ref:a,className:h}),$.createElement(uD,{hsva:u,onChange:d}),$.createElement(cD,{hue:u.h,onChange:d,className:"react-colorful__last-control"}))},cj=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+m_(Object.assign({},t,{a:0}))+", "+m_(Object.assign({},t,{a:1}))+")"},s=gh(["react-colorful__alpha",e]),o=Tr(100*t.a);return $.createElement("div",{className:s},$.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),$.createElement(Ow,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:yu(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},$.createElement(kw,{className:"react-colorful__alpha-pointer",left:t.a,color:m_(t)})))},uj=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=Dw(n,["className","colorModel","color","onChange"]),a=D.useRef(null);dD(a);var l=fD(t,i,s),u=l[0],d=l[1],h=gh(["react-colorful",e]);return $.createElement("div",Du({},o,{ref:a,className:h}),$.createElement(uD,{hsva:u,onChange:d}),$.createElement(cD,{hue:u.h,onChange:d}),$.createElement(cj,{hsva:u,onChange:d,className:"react-colorful__last-control"}))},fj={defaultColor:{r:0,g:0,b:0,a:1},toHsva:lD,fromHsva:aD,equal:Nw},dj=function(n){return $.createElement(uj,Du({},n,{colorModel:fj}))},hj={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return lD({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=aD(n)).r,g:e.g,b:e.b};var e},equal:Nw},pj=function(n){return $.createElement(lj,Du({},n,{colorModel:hj}))};function Ou(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function ku(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function mj(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function gj(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(mj(arguments[e]));return n}var vj=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function vh(n,e){var t=yj(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function yj(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=vj.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var _j=[".DS_Store","Thumbs.db"];function xj(n){return Ou(this,void 0,void 0,function(){return ku(this,function(e){return Hg(n)&&Sj(n)?[2,Tj(n.dataTransfer,n.type)]:wj(n)?[2,Ej(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Mj(n)]:[2,[]]})})}function Sj(n){return Hg(n.dataTransfer)}function wj(n){return Hg(n)&&Hg(n.target)}function Hg(n){return typeof n=="object"&&n!==null}function Ej(n){return E1(n.target.files).map(function(e){return vh(e)})}function Mj(n){return Ou(this,void 0,void 0,function(){var e;return ku(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return vh(r)})]}})})}function Tj(n,e){return Ou(this,void 0,void 0,function(){var t,r;return ku(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=E1(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(bj))]):[3,2];case 1:return r=i.sent(),[2,xC(hD(r))];case 2:return[2,xC(E1(n.files).map(function(s){return vh(s)}))]}})})}function xC(n){return n.filter(function(e){return _j.indexOf(e.name)===-1})}function E1(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function bj(n){if(typeof n.webkitGetAsEntry!="function")return SC(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?pD(e):SC(n)}function hD(n){return n.reduce(function(e,t){return gj(e,Array.isArray(t)?hD(t):[t])},[])}function SC(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=vh(e);return Promise.resolve(t)}function Aj(n){return Ou(this,void 0,void 0,function(){return ku(this,function(e){return[2,n.isDirectory?pD(n):Cj(n)]})})}function pD(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Ou(o,void 0,void 0,function(){var l,u,d;return ku(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),t(l),[3,4];case 3:return u=h.sent(),r(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(a.map(Aj)),i.push(d),s(),h.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Cj(n){return Ou(this,void 0,void 0,function(){return ku(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=vh(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var Rj=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function wC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function EC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wC(Object(t),!0).forEach(function(r){mD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MC(n,e){return Dj(n)||Ij(n,e)||Lj(n,e)||Pj()}function Pj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lj(n,e){if(n){if(typeof n=="string")return TC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TC(n,e)}}function TC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ij(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Dj(n){if(Array.isArray(n))return n}var Oj="file-invalid-type",kj="file-too-large",Nj="file-too-small",Uj="too-many-files",Fj=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Oj,message:"File type must be ".concat(t)}},bC=function(e){return{code:kj,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},AC=function(e){return{code:Nj,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},zj={code:Uj,message:"Too many files"};function gD(n,e){var t=n.type==="application/x-moz-file"||Rj(n,e);return[t,t?null:Fj(e)]}function vD(n,e,t){if(Af(n.size))if(Af(e)&&Af(t)){if(n.size>t)return[!1,bC(t)];if(n.size<e)return[!1,AC(e)]}else{if(Af(e)&&n.size<e)return[!1,AC(e)];if(Af(t)&&n.size>t)return[!1,bC(t)]}return[!0,null]}function Af(n){return n!=null}function Bj(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=gD(a,t),u=MC(l,1),d=u[0],h=vD(a,r,i),p=MC(h,1),m=p[0];return d&&m})}function Vg(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Cm(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function CC(n){n.preventDefault()}function Hj(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Vj(n){return n.indexOf("Edge/")!==-1}function Gj(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Hj(n)||Vj(n)}function ps(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!Vg(r)&&a&&a.apply(void 0,[r].concat(s)),Vg(r)})}}function Wj(){return"showOpenFilePicker"in window}function $j(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return EC(EC({},e),{},mD({},t,[]))},{}):{}}]}function jj(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Xj(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var Yj=["children"],qj=["open"],Kj=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Zj=["refKey","onChange","onClick"];function Jj(n){return tX(n)||eX(n)||yD(n)||Qj()}function Qj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tX(n){if(Array.isArray(n))return M1(n)}function g_(n,e){return iX(n)||rX(n,e)||yD(n,e)||nX()}function nX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yD(n,e){if(n){if(typeof n=="string")return M1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M1(n,e)}}function M1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function iX(n){if(Array.isArray(n))return n}function RC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function on(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RC(Object(t),!0).forEach(function(r){T1(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function T1(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gg(n,e){if(n==null)return{};var t=sX(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function sX(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Uw=D.forwardRef(function(n,e){var t=n.children,r=Gg(n,Yj),i=xD(r),s=i.open,o=Gg(i,qj);return D.useImperativeHandle(e,function(){return{open:s}},[s]),$.createElement(D.Fragment,null,t(on(on({},o),{},{open:s})))});Uw.displayName="Dropzone";var _D={disabled:!1,getFilesFromEvent:xj,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Uw.defaultProps=_D;Uw.propTypes={children:jt.func,accept:jt.oneOfType([jt.string,jt.arrayOf(jt.string)]),multiple:jt.bool,preventDropOnDocument:jt.bool,noClick:jt.bool,noKeyboard:jt.bool,noDrag:jt.bool,noDragEventsBubbling:jt.bool,minSize:jt.number,maxSize:jt.number,maxFiles:jt.number,disabled:jt.bool,getFilesFromEvent:jt.func,onFileDialogCancel:jt.func,onFileDialogOpen:jt.func,useFsAccessApi:jt.bool,onDragEnter:jt.func,onDragLeave:jt.func,onDragOver:jt.func,onDrop:jt.func,onDropAccepted:jt.func,onDropRejected:jt.func,validator:jt.func};var b1={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function xD(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=on(on({},_D),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,S=e.onFileDialogCancel,_=e.onFileDialogOpen,g=e.useFsAccessApi,x=e.preventDropOnDocument,w=e.noClick,M=e.noKeyboard,A=e.noDrag,b=e.noDragEventsBubbling,I=e.validator,L=D.useMemo(function(){return typeof _=="function"?_:PC},[_]),R=D.useMemo(function(){return typeof S=="function"?S:PC},[S]),P=D.useRef(null),k=D.useRef(null),V=D.useReducer(oX,b1),H=g_(V,2),j=H[0],q=H[1],Z=j.isFocused,ee=j.isFileDialogActive,F=j.draggedFiles,K=D.useRef(typeof window<"u"&&window.isSecureContext&&g&&Wj()),X=function(){!K.current&&ee&&setTimeout(function(){if(k.current){var O=k.current.files;O.length||(q({type:"closeDialog"}),R())}},300)};D.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[k,ee,R,K]);var oe=D.useRef([]),W=function(O){P.current&&P.current.contains(O.target)||(O.preventDefault(),oe.current=[])};D.useEffect(function(){return x&&(document.addEventListener("dragover",CC,!1),document.addEventListener("drop",W,!1)),function(){x&&(document.removeEventListener("dragover",CC),document.removeEventListener("drop",W))}},[P,x]);var he=D.useCallback(function(N){N.preventDefault(),N.persist(),ye(N),oe.current=[].concat(Jj(oe.current),[N.target]),Cm(N)&&Promise.resolve(i(N)).then(function(O){Vg(N)&&!b||(q({draggedFiles:O,isDragActive:!0,type:"setDraggedFiles"}),u&&u(N))})},[i,u,b]),le=D.useCallback(function(N){N.preventDefault(),N.persist(),ye(N);var O=Cm(N);if(O&&N.dataTransfer)try{N.dataTransfer.dropEffect="copy"}catch{}return O&&h&&h(N),!1},[h,b]),Te=D.useCallback(function(N){N.preventDefault(),N.persist(),ye(N);var O=oe.current.filter(function(xe){return P.current&&P.current.contains(xe)}),ae=O.indexOf(N.target);ae!==-1&&O.splice(ae,1),oe.current=O,!(O.length>0)&&(q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Cm(N)&&d&&d(N))},[P,d,b]),we=D.useCallback(function(N,O){var ae=[],xe=[];N.forEach(function(Se){var Le=gD(Se,t),Ve=g_(Le,2),Ie=Ve[0],fe=Ve[1],Y=vD(Se,o,s),ue=g_(Y,2),Ee=ue[0],Me=ue[1],De=I?I(Se):null;if(Ie&&Ee&&!De)ae.push(Se);else{var nt=[fe,Me];De&&(nt=nt.concat(De)),xe.push({file:Se,errors:nt.filter(function(Rt){return Rt})})}}),(!a&&ae.length>1||a&&l>=1&&ae.length>l)&&(ae.forEach(function(Se){xe.push({file:Se,errors:[zj]})}),ae.splice(0)),q({acceptedFiles:ae,fileRejections:xe,type:"setFiles"}),p&&p(ae,xe,O),xe.length>0&&v&&v(xe,O),ae.length>0&&m&&m(ae,O)},[q,a,t,o,s,l,p,m,v,I]),Re=D.useCallback(function(N){N.preventDefault(),N.persist(),ye(N),oe.current=[],Cm(N)&&Promise.resolve(i(N)).then(function(O){Vg(N)&&!b||we(O,N)}),q({type:"reset"})},[i,we,b]),Ze=D.useCallback(function(){if(K.current){q({type:"openDialog"}),L();var N={multiple:a,types:$j(t)};window.showOpenFilePicker(N).then(function(O){return i(O)}).then(function(O){we(O,null),q({type:"closeDialog"})}).catch(function(O){jj(O)?(R(O),q({type:"closeDialog"})):Xj(O)&&(K.current=!1,k.current&&(k.current.value=null,k.current.click()))});return}k.current&&(q({type:"openDialog"}),L(),k.current.value=null,k.current.click())},[q,L,R,g,we,t,a]),Qe=D.useCallback(function(N){!P.current||!P.current.isEqualNode(N.target)||(N.key===" "||N.key==="Enter"||N.keyCode===32||N.keyCode===13)&&(N.preventDefault(),Ze())},[P,Ze]),xt=D.useCallback(function(){q({type:"focus"})},[]),Ke=D.useCallback(function(){q({type:"blur"})},[]),G=D.useCallback(function(){w||(Gj()?setTimeout(Ze,0):Ze())},[w,Ze]),_e=function(O){return r?null:O},pe=function(O){return M?null:_e(O)},be=function(O){return A?null:_e(O)},ye=function(O){b&&O.stopPropagation()},$e=D.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=N.refKey,ae=O===void 0?"ref":O,xe=N.role,Se=N.onKeyDown,Le=N.onFocus,Ve=N.onBlur,Ie=N.onClick,fe=N.onDragEnter,Y=N.onDragOver,ue=N.onDragLeave,Ee=N.onDrop,Me=Gg(N,Kj);return on(on(T1({onKeyDown:pe(ps(Se,Qe)),onFocus:pe(ps(Le,xt)),onBlur:pe(ps(Ve,Ke)),onClick:_e(ps(Ie,G)),onDragEnter:be(ps(fe,he)),onDragOver:be(ps(Y,le)),onDragLeave:be(ps(ue,Te)),onDrop:be(ps(Ee,Re)),role:typeof xe=="string"&&xe!==""?xe:"button"},ae,P),!r&&!M?{tabIndex:0}:{}),Me)}},[P,Qe,xt,Ke,G,he,le,Te,Re,M,A,r]),Ue=D.useCallback(function(N){N.stopPropagation()},[]),ze=D.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=N.refKey,ae=O===void 0?"ref":O,xe=N.onChange,Se=N.onClick,Le=Gg(N,Zj),Ve=T1({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:_e(ps(xe,Re)),onClick:_e(ps(Se,Ue)),tabIndex:-1},ae,k);return on(on({},Ve),Le)}},[k,t,a,Re,r]),Je=F.length,yt=Je>0&&Bj({files:F,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Bt=Je>0&&!yt;return on(on({},j),{},{isDragAccept:yt,isDragReject:Bt,isFocused:Z&&!r,getRootProps:$e,getInputProps:ze,rootRef:P,inputRef:k,open:_e(Ze)})}function oX(n,e){switch(e.type){case"focus":return on(on({},n),{},{isFocused:!0});case"blur":return on(on({},n),{},{isFocused:!1});case"openDialog":return on(on({},b1),{},{isFileDialogActive:!0});case"closeDialog":return on(on({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return on(on({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return on(on({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return on({},b1);default:return n}}function PC(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aX=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var lX=aX;function LC(n){return lX(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var SD=function(e){var t,r;return!(LC(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,LC(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var cX=SD,Fw=function(e){return cX(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var uX=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},fX=Fw,dX=uX;function wD(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];A1(i)&&dX(i,hX,n)}return n}function hX(n,e){if(pX(e)){var t=this[e];A1(n)&&A1(t)?wD(t,n):this[e]=n}}function A1(n){return fX(n)&&!Array.isArray(n)}function pX(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var mX=wD;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var gX=function(n,e,t,r,i){if(!vX(n)||!e)return n;if(e=Rm(e),t&&(e+="."+Rm(t)),r&&(e+="."+Rm(r)),i&&(e+="."+Rm(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function vX(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Rm(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var yX=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(r[u]=o[u])}return r},_X=Fw,xX=yX,SX=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");IC(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];EX(t)&&(t=MX(t)),IC(t)&&(wX(n,t),xX(n,t))}return n};function wX(n,e){for(var t in e)TX(e,t)&&(n[t]=e[t])}function EX(n){return n&&typeof n=="string"}function MX(n){var e={};for(var t in n)e[t]=n[t];return e}function IC(n){return n&&typeof n=="object"||_X(n)}function TX(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bX=SX,AX=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=bX({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,d=n.length,h=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++h<d;){var v=n[h],S=n[h+1],_={val:v,idx:h,arr:l,str:n};if(o.push(_),v==="\\"){_.val=RX(r,n,h)===!0?v+S:S,_.escaped=!0,typeof t=="function"&&t(_),l[l.length-1]+=_.val,h++;continue}if(s&&s[v]){a.push(v);var g=m(),x=h+1;if(n.indexOf(g,x+1)!==-1)for(;a.length&&x<d;){var w=n[++x];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){x=C1(n,w,x+1);continue}if(g=m(),a.length&&n.indexOf(g,x+1)===-1)break;if(s[w]){a.push(w);continue}g===w&&a.pop()}if(p=x,p===-1){l[l.length-1]+=v;continue}v=n.slice(h,p+1),_.val=v,_.idx=h=p}if(i.indexOf(v)!==-1){if(p=C1(n,v,h+1),p===-1){l[l.length-1]+=v;continue}CX(v,r)===!0?v=n.slice(h,p+1):v=n.slice(h+1,p),_.val=v,_.idx=h=p}if(typeof t=="function"&&(t(_,o),v=_.val,h=_.idx),_.val===u&&_.split!==!1){l.push("");continue}l[l.length-1]+=_.val}return l};function C1(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?C1(n,e,i+1):i}function CX(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function RX(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var PX=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},DC=PX,LX=function(e){DC(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];DC(i)&&IX(e,i)}return e};function IX(n,e){for(var t in e)DX(e,t)&&(n[t]=e[t])}function DX(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var OX=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var kX=AX,NX=LX,OC=SD,kC=OX,UX=function(n,e,t){if(!kC(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=kX(e,{sep:".",brackets:!0}).filter(FX),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){kC(o[a])||(o[a]={}),o=o[a];continue}OC(o[a])&&OC(t)?o[a]=NX({},o[a],t):o[a]=t}return n};function FX(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var v_=Fw,NC=mX,zX=gX,UC=UX,BX=function(e,t,r){if(!v_(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return NC.apply(null,arguments);if(typeof r=="string")return UC(e,t,r),e;var i=zX(e,t);return v_(r)&&v_(i)&&(r=NC({},i,r)),UC(e,t,r),e};const HX=Sl(BX),zw=(...n)=>n.filter(Boolean).join(".");function VX(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function GX(n,e){return Object.entries(S9(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function WX(n,e){const t=D.useRef();return(e?Dd:hh)(n,t.current)||(t.current=n),t.current}function ED(n,e){return D.useMemo(n,WX(e,!0))}function $X(n){const e=D.useRef(null),t=D.useRef(null),r=D.useRef(!0);return D.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),D.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const jX=n=>{const[e,t]=D.useState(n.getVisiblePaths());return D.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:hh});return()=>r()},[n]),e};function XX(n,e,t){return n.useStore(i=>{const s=ot(ot({},t),i.data);return GX(s,e)},hh)}function MD(n=3){const e=D.useRef(null),t=D.useRef(null),[r,i]=D.useState(!1),s=D.useCallback(()=>i(!0),[]),o=D.useCallback(()=>i(!1),[]);return D.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:d}=t.current.getBoundingClientRect(),h=a+d>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",h==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}ij([sj]);const YX={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Br.extend({color:()=>n=>Mr(n).isValid()});const qX=n=>Br().color().test(n);function TD(n,{format:e,hasAlpha:t,isString:r}){const i=YX[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?w9(s,["a"]):s}const bD=(n,e)=>{const t=Mr(n);if(!t.isValid())throw Error("Invalid color");return TD(t,e)},KX=(n,e)=>TD(Mr(n),ot(ot({},e),{},{isString:!0,format:"hex"})),ZX=({value:n})=>{const e=rj(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:bD(n,i),settings:i}};var JX=Object.freeze({__proto__:null,schema:qX,sanitize:bD,format:KX,normalize:ZX});const QX=st("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),eY=st("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),tY=st("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function FC(n,e){return e!=="rgb"?Mr(n).toRgb():n}function nY({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=vr(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:d,show:h,hide:p}=MD(),m=D.useRef(0),[v,S]=D.useState(()=>FC(n,o)),_=a?dj:pj,g=()=>{S(FC(n,o)),h(),i()},x=()=>{p(),s(),window.clearTimeout(m.current)},w=()=>{m.current=window.setTimeout(x,500)};return D.useEffect(()=>()=>window.clearTimeout(m.current),[]),$.createElement($.Fragment,null,$.createElement(QX,{ref:l,active:d,onClick:()=>g(),style:{color:e}}),d&&$.createElement(Pw,null,$.createElement(XI,{onPointerUp:x}),$.createElement(tY,{ref:u,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:M=>M.buttons===0&&w()},$.createElement(_,{color:v,onChange:r}))))}function rY(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,t),$.createElement(eY,null,$.createElement(nY,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),$.createElement(Rw,{value:e,onChange:r,onUpdate:i})))}var iY=ot({component:rY},JX);function sY(){const{label:n,displayValue:e,onUpdate:t,settings:r}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(Iw,{value:e,settings:r,onUpdate:t}))}var oY=ot({component:sY},tD(["x","y","z"]));const aY=st("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),lY=st("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function cY({value:n,settings:e,onUpdate:t}){const r=D.useRef(),i=D.useRef(0),s=D.useRef(0),o=D.useRef(1),[a,l]=D.useState(!1),[u,d]=D.useState(!1),[h,p]=qI(),m=D.useRef(null),v=D.useRef(null);D.useLayoutEffect(()=>{if(a){const{top:V,left:H,width:j,height:q}=m.current.getBoundingClientRect();v.current.style.left=H+j/2+"px",v.current.style.top=V+q/2+"px"}},[a]);const{keys:[S,_],joystick:g}=e,x=g==="invertY"?1:-1,{[S]:{step:w},[_]:{step:M}}=e,A=lo("sizes","joystickWidth"),b=lo("sizes","joystickHeight"),I=parseFloat(A)*.8/2,L=parseFloat(b)*.8/2,R=D.useCallback(()=>{r.current||(d(!0),i.current&&p({x:i.current*I}),s.current&&p({y:s.current*-L}),r.current=window.setInterval(()=>{t(V=>{const H=w*i.current*o.current,j=x*M*s.current*o.current;return Array.isArray(V)?{[S]:V[0]+H,[_]:V[1]+j}:{[S]:V[S]+H,[_]:V[_]+j}})},16))},[I,L,t,p,w,M,S,_,x]),P=D.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,d(!1)},[]);D.useEffect(()=>{function V(H){o.current=DI(H)}return window.addEventListener("keydown",V),window.addEventListener("keyup",V),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",V),window.removeEventListener("keyup",V)}},[]);const k=mh(({first:V,active:H,delta:[j,q],movement:[Z,ee]})=>{V&&l(!0);const F=ma(Z,-I,I),K=ma(ee,-L,L);i.current=Math.abs(Z)>Math.abs(F)?Math.sign(Z-F):0,s.current=Math.abs(ee)>Math.abs(K)?Math.sign(K-ee):0;let X=n[S],oe=n[_];H?(i.current||(X+=j*w*o.current,p({x:F})),s.current||(oe-=x*q*M*o.current,p({y:K})),i.current||s.current?R():P(),t({[S]:X,[_]:oe})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),P())});return $.createElement(aY,En({ref:m},k()),a&&$.createElement(Pw,null,$.createElement(lY,{ref:v,isOutOfBounds:u},$.createElement("div",null),$.createElement("span",{ref:h}))))}const uY=st("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function fY(){const{label:n,displayValue:e,onUpdate:t,settings:r}=vr();return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(uY,{withJoystick:!!r.joystick},r.joystick&&$.createElement(cY,{value:e,settings:r,onUpdate:t}),$.createElement(Iw,{value:e,settings:r,onUpdate:t})))}const dY=["joystick"],AD=tD(["x","y"]),hY=n=>{let{joystick:e=!0}=n,t=Vt(n,dY);const{value:r,settings:i}=AD.normalize(t);return{value:r,settings:ot(ot({},i),{},{joystick:e})}};var pY=ot(ot({component:fY},AD),{},{normalize:hY});const mY=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},gY=(n,e)=>typeof e=="object"&&"image"in e,vY=({image:n})=>({value:n});var yY=Object.freeze({__proto__:null,sanitize:mY,schema:gY,normalize:vY});const _Y=st("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),xY=st("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),SY=st("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),wY=st("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),EY=st("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),MY=st("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function TY(){const{label:n,value:e,onUpdate:t,disabled:r}=vr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=MD(),u=D.useCallback(v=>{v.length&&t(v[0])},[t]),d=D.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:p,isDragAccept:m}=xD({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return $.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(_Y,null,$.createElement(SY,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&$.createElement(Pw,null,$.createElement(XI,{onPointerUp:l,style:{cursor:"pointer"}}),$.createElement(wY,{ref:s,style:{backgroundImage:`url(${e})`}})),$.createElement(xY,h({isDragAccept:m}),$.createElement("input",p()),$.createElement(EY,null,m?"drop image":"click or drop")),$.createElement(MY,{onClick:d,disabled:!e})))}var bY=ot({component:TY},yY);const zC=Br().number(),AY=(n,e)=>Br().array().length(2).every.number().test(n)&&Br().schema({min:zC,max:zC}).test(e),Wg=n=>({min:n[0],max:n[1]}),CD=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?Wg(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=ot(ot({},s),i);return[ma(Number(o),e,Math.max(e,a)),ma(Number(a),Math.min(t,o),t)]},CY=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=eD(Wg(n),{min:r,max:r}),s=[e,t],o=ot(ot({},i),{},{bounds:s});return{value:CD(Wg(n),o,n),settings:o}};var RY=Object.freeze({__proto__:null,schema:AY,format:Wg,sanitize:CD,normalize:CY});const PY=["value","bounds","onDrag"],LY=["bounds"],IY=st("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function DY(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Vt(n,PY);const o=D.useRef(null),a=D.useRef(null),l=D.useRef(null),u=D.useRef(0),d=lo("sizes","scrubberWidth"),h=mh(({event:v,first:S,xy:[_],movement:[g],memo:x={}})=>{if(S){const{width:M,left:A}=o.current.getBoundingClientRect();u.current=M-parseFloat(d);const b=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;x.pos=zg((_-A)/M,t,r);const I=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=I<0||I===0&&x.pos<=e.min?"min":"max",b&&(x.pos=e[x.key])}const w=x.pos+zg(g/u.current,0,r-t);return i({[x.key]:u7(w,s[x.key])}),x}),p=`calc(${Fg(e.min,t,r)} * (100% - ${d} - 8px) + 4px)`,m=`calc(${1-Fg(e.max,t,r)} * (100% - ${d} - 8px) + 4px)`;return $.createElement(ZI,En({ref:o},h()),$.createElement(KI,null,$.createElement(JI,{style:{left:p,right:m}})),$.createElement(g1,{position:"left",ref:a,style:{left:p}}),$.createElement(g1,{position:"right",ref:l,style:{right:m}}))}function OY(){const{label:n,displayValue:e,onUpdate:t,settings:r}=vr(),i=Vt(r,LY);return $.createElement($.Fragment,null,$.createElement(Pi,{input:!0},$.createElement(rs,null,n),$.createElement(IY,null,$.createElement(DY,En({value:e},r,{onDrag:t})),$.createElement(Iw,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var kY=ot({component:OY},RY);const NY=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},UY=["type","value"],FY=["onChange","transient","onEditStart","onEditEnd"],zY=function(){const e=mw(H8(()=>({data:{}}))),t=NY();this.storeId=x9(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([d,h])=>{h.render&&a.some(p=>p.indexOf(d)===0)&&!h.render(this.get)&&l.push(d+".")});const u=[];return i.forEach(d=>{d in o&&o[d].__refCount>0&&l.every(h=>d.indexOf(h)===-1)&&(!o[d].render||o[d].render(this.get))&&u.push(d)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const d=l[u];d.__refCount--,d.__refCount===0&&d.type in qi&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([d,h])=>{let p=u[d];if(p){const{type:m,value:v}=h,S=Vt(h,UY);m!==p.type?Js(an.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,S),p.__refCount++)}else u[d]=ot(ot({},h),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const d=u.data;return cC(d[o],a,o,this,l),{data:d}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=ot(ot({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([d,h])=>{try{cC(u[d],h,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Js(an.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,ot(ot({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,ot(ot({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([d,h])=>{if(d==="")return Js(an.EMPTY_KEY);let p=zw(a,d);if(h.type===qi.FOLDER){const m=s(h.schema,p,l);Object.assign(u,m),p in r||(r[p]=h.settings)}else if(d in l)Js(an.DUPLICATE_KEYS,d,p,l[d].path);else{const m=C9(h,d,p,u);if(m){const{type:v,options:S,input:_}=m,{onChange:g,transient:x,onEditStart:w,onEditEnd:M}=S,A=Vt(S,FY);u[p]=ot(ot(ot({type:v},A),_),{},{fromPanel:!0}),l[d]={path:p,onChange:g,transient:x,onEditStart:w,onEditEnd:M}}else Js(an.UNKNOWN_INPUT,p,h)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},RD=new zY,BY={collapsed:!1};function HY(n,e){return{type:qi.FOLDER,schema:n,settings:ot(ot({},BY),e)}}const BC=n=>"__levaInput"in n,VY=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=VX(i);(!r||s.toLowerCase().indexOf(r)>-1)&&HX(t,o,{[s]:{__levaInput:!0,path:i}})}),t},GY=["type","label","path","valueKey","value","settings","setValue","disabled"];function WY(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,u=Vt(n,GY);const{displayValue:d,onChange:h,onUpdate:p}=YI({type:e,value:s,settings:o,setValue:a}),m=xl[e].component;return m?$.createElement(FI.Provider,{value:ot({key:i,path:r,id:""+r,label:t,displayValue:d,value:s,onChange:h,onUpdate:p,settings:o,setValue:a,disabled:l},u)},$.createElement(Y9,{disabled:l},$.createElement(m,null))):(Js(an.NO_COMPONENT_FOR_TYPE,e,r),null)}const $Y=st("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function jY({onClick:n,settings:e,label:t}){const r=ph();return $.createElement(Pi,null,$.createElement($Y,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const XY=st("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),YY=st("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),qY=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function KY(n){const{label:e,opts:t}=qY(n),r=ph();return $.createElement(Pi,{input:!!e},e&&$.createElement(rs,null,e),$.createElement(XY,null,Object.entries(t).map(([i,s])=>$.createElement(YY,{key:i,onClick:()=>s(r.get)},i))))}const ZY=st("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),PD=100;function JY(n,e){n.push(e),n.length>PD&&n.shift()}const QY=D.forwardRef(function({initialValue:n},e){const t=lo("colors","highlight3"),r=lo("colors","elevation2"),i=lo("colors","highlight1"),[s,o]=D.useMemo(()=>[Mr(i).alpha(.4).toRgbString(),Mr(i).alpha(.1).toRgbString()],[i]),a=D.useRef([n]),l=D.useRef(n),u=D.useRef(n),d=D.useRef(),h=D.useCallback((v,S)=>{if(!v)return;const{width:_,height:g}=v,x=new Path2D,w=_/PD,M=g*.05;for(let I=0;I<a.current.length;I++){const L=Fg(a.current[I],l.current,u.current),R=w*I,P=g-L*(g-M*2)-M;x.lineTo(R,P)}S.clearRect(0,0,_,g);const A=new Path2D(x);A.lineTo(w*(a.current.length+1),g),A.lineTo(0,g),A.lineTo(0,0);const b=S.createLinearGradient(0,0,0,g);b.addColorStop(0,s),b.addColorStop(1,o),S.fillStyle=b,S.fill(A),S.strokeStyle=r,S.lineJoin="round",S.lineWidth=14,S.stroke(x),S.strokeStyle=t,S.lineWidth=2,S.stroke(x)},[t,r,s,o]),[p,m]=r7(h);return D.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(u.current===void 0||v>u.current)&&(u.current=v),JY(a.current,v),d.current=requestAnimationFrame(()=>h(p.current,m.current))}}),[p,m,h]),D.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),$.createElement(ZY,{ref:p})}),HC=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),eq=D.forwardRef(function({initialValue:n},e){const[t,r]=D.useState(HC(n));return D.useImperativeHandle(e,()=>({frame:i=>r(HC(i))}),[]),$.createElement("div",null,t)});function VC(n){return typeof n=="function"?n():n.current}function tq({label:n,objectOrFn:e,settings:t}){const r=D.useRef(),i=D.useRef(VC(e));return D.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(VC(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),$.createElement(Pi,{input:!0},$.createElement(rs,{align:"top"},n),t.graph?$.createElement(QY,{ref:r,initialValue:i.current}):$.createElement(eq,{ref:r,initialValue:i.current}))}const nq=["type","label","key"],rq={[qi.BUTTON]:jY,[qi.BUTTON_GROUP]:KY,[qi.MONITOR]:tq},iq=$.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=s7(n);if(!e)return null;const{type:l,label:u,key:d}=e,h=Vt(e,nq);if(l in qi){const p=rq[l];return $.createElement(p,En({label:u,path:n},h))}return l in xl?$.createElement(WY,En({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:d,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},h)):(d9(an.UNSUPPORTED_INPUT,l,n),null)});function sq({toggle:n,toggled:e,name:t}){return $.createElement($9,{onClick:()=>n()},$.createElement(Lw,{toggled:e}),$.createElement("div",null,t))}const oq=({name:n,path:e,tree:t})=>{const r=ph(),i=zw(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=D.useState(!s),u=D.useRef(null),d=lo("colors","folderWidgetColor"),h=lo("colors","folderTextColor");return D.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||d),u.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,d,h]),$.createElement(Bg,{ref:u},$.createElement(sq,{name:n,toggled:a,toggle:()=>l(p=>!p)}),$.createElement(LD,{parent:i,tree:t,toggled:a}))},LD=$.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=$X(s),l=ph(),u=([h,p])=>{var m;return(BC(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(zw(r,h)).order)||0},d=Object.entries(i).sort((h,p)=>u(h)-u(p));return $.createElement(p1,{ref:o,isRoot:n,fill:e,flat:t},$.createElement(WI,{ref:a,isRoot:n,toggled:s},d.map(([h,p])=>BC(p)?$.createElement(iq,{key:p.path,valueKey:p.valueKey,path:p.path}):$.createElement(oq,{key:h,name:h,path:r,tree:p}))))}),aq=st("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${jI}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),ID=40,$g=st("i",{$flexCenter:"",width:ID,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),lq=st("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),cq=st("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${$g}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),uq=st("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),fq=st("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:ID}}}}),dq=$.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=D.useState(""),s=D.useMemo(()=>II(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return D.useEffect(()=>{s(r)},[r,s]),$.createElement($.Fragment,null,$.createElement(uq,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),$.createElement($g,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function hq({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[d,h]=D.useState(!1),p=D.useRef(null);D.useEffect(()=>{var v,S;d?(v=p.current)===null||v===void 0||v.focus():(S=p.current)===null||S===void 0||S.blur()},[d]);const m=mh(({offset:[v,S],first:_,last:g})=>{e({x:v,y:S}),_&&t({x:v,y:S}),g&&r({x:v,y:S})},{filterTaps:!0,from:({offset:[v,S]})=>[(u==null?void 0:u.x)||v,(u==null?void 0:u.y)||S]});return D.useEffect(()=>{const v=S=>{S.key==="L"&&S.shiftKey&&S.metaKey&&h(_=>!_)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),$.createElement($.Fragment,null,$.createElement(lq,{mode:a?"drag":void 0},$.createElement($g,{active:!s,onClick:()=>i()},$.createElement(Lw,{toggled:s,width:12,height:8})),$.createElement(fq,En({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?$.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},$.createElement("circle",{cx:"2",cy:"2",r:"2"}),$.createElement("circle",{cx:"14",cy:"2",r:"2"}),$.createElement("circle",{cx:"26",cy:"2",r:"2"}),$.createElement("circle",{cx:"2",cy:"12",r:"2"}),$.createElement("circle",{cx:"14",cy:"12",r:"2"}),$.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&$.createElement($g,{active:d,onClick:()=>h(v=>!v)},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),$.createElement(cq,{toggled:d},$.createElement(dq,{ref:p,setFilter:n,toggle:i})))}const pq=["store","hidden","theme","collapsed"];function mq(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Vt(n,pq);const o=ED(()=>z9(r),[r]),[a,l]=D.useState(!i),u=typeof i=="object"?!i.collapsed:a,d=D.useMemo(()=>typeof i=="object"?h=>{typeof h=="function"?i.onChange(!h(!i.collapsed)):i.onChange(!h)}:l,[i]);return!e||t?null:$.createElement(Cw.Provider,{value:o},$.createElement(gq,En({store:e},s,{toggled:u,setToggle:d,rootClass:o.className})))}const gq=$.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var d,h;const p=jX(n),[m,v]=D.useState(""),S=D.useMemo(()=>VY(p,m),[p,m]),[_,g]=qI(),x=i||p.length>0,w=typeof o=="object"&&o.title||void 0,M=typeof o=="object"&&(d=o.drag)!==null&&d!==void 0?d:!0,A=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,b=typeof o=="object"&&o.position||void 0,I=typeof o=="object"&&o.onDrag||void 0,L=typeof o=="object"&&o.onDragStart||void 0,R=typeof o=="object"&&o.onDragEnd||void 0;return $.useEffect(()=>{g({x:b==null?void 0:b.x,y:b==null?void 0:b.y})},[b,g]),F9(),$.createElement(BI.Provider,{value:{hideCopyButton:a}},$.createElement(aq,{ref:_,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&$.createElement(hq,{onDrag:P=>{g(P),I==null||I(P)},onDragStart:P=>L==null?void 0:L(P),onDragEnd:P=>R==null?void 0:R(P),setFilter:v,toggle:P=>u(k=>P??!k),toggled:l,title:w,drag:M,filterEnabled:A,from:b}),x&&$.createElement(zI.Provider,{value:n},$.createElement(LD,{isRoot:!0,fill:t,flat:r,tree:S,toggled:l}))))}),vq=["isRoot"];let jg=!1,el=null;function DD(n){let{isRoot:e=!1}=n,t=Vt(n,vq);return D.useEffect(()=>(jg=!0,!e&&el&&(el.remove(),el=null),()=>{e||(jg=!1)}),[e]),$.createElement(mq,En({store:RD},t))}function yq(n){D.useEffect(()=>{n&&!jg&&(el||(el=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(el),P9($.createElement(DD,{isRoot:!0}),el))),jg=!0)},[n])}function _q(n,e,t,r,i){let s,o,a,l,u;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(a=t,Array.isArray(r)?u=r:(l=r,u=i)))):(s=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:u||[]}}function OD(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:u}=_q(n,e,t,r,i),d=typeof o=="function",h=D.useRef(!1),p=D.useRef(!0),m=ED(()=>{h.current=!0;const k=typeof o=="function"?o():o;return s?{[s]:HY(k,a)}:k},u),v=!(l!=null&&l.store);yq(v);const[S]=D.useState(()=>(l==null?void 0:l.store)||RD),[_,g]=D.useMemo(()=>S.getDataFromSchema(m),[S,m]),[x,w,M,A,b]=D.useMemo(()=>{const k=[],V=[],H={},j={},q={};return Object.values(g).forEach(({path:Z,onChange:ee,onEditStart:F,onEditEnd:K,transient:X})=>{k.push(Z),ee?(H[Z]=ee,X||V.push(Z)):V.push(Z),F&&(j[Z]=F),K&&(q[Z]=K)}),[k,V,H,j,q]},[g]),I=D.useMemo(()=>S.orderPaths(x),[x,S]),L=XX(S,w,_),R=D.useCallback(k=>{const V=Object.entries(k).reduce((H,[j,q])=>Object.assign(H,{[g[j].path]:q}),{});S.set(V,!1)},[S,g]),P=D.useCallback(k=>S.get(g[k].path),[S,g]);return D.useEffect(()=>{const k=!p.current&&h.current;return S.addData(_,k),p.current=!1,h.current=!1,()=>S.disposePaths(I)},[S,I,_]),D.useEffect(()=>{const k=[];return Object.entries(M).forEach(([V,H])=>{H(S.get(V),V,ot({initial:!0,get:S.get},S.getInput(V)));const j=S.useStore.subscribe(q=>{const Z=q.data[V];return[Z.disabled?void 0:Z.value,Z]},([q,Z])=>H(q,V,ot({initial:!1,get:S.get},Z)),{equalityFn:hh});k.push(j)}),()=>k.forEach(V=>V())},[S,M]),D.useEffect(()=>{const k=[];return Object.entries(A).forEach(([V,H])=>k.push(S.subscribeToEditStart(V,H))),Object.entries(b).forEach(([V,H])=>k.push(S.subscribeToEditEnd(V,H))),()=>k.forEach(V=>V())},[A,b,S]),d?[L,R,P]:L}So(es.SELECT,w7);So(es.IMAGE,bY);So(es.NUMBER,d7);So(es.COLOR,iY);So(es.STRING,L7);So(es.BOOLEAN,F7);So(es.INTERVAL,kY);So(es.VECTOR3D,oY);So(es.VECTOR2D,pY);aL({MapControls:VL});function xq(){const{light:n,directionalLight:e,directionalPosition:t}=OD({light:{value:.3,min:0,max:2,step:.01}});return cn.jsxs(cn.Fragment,{children:[cn.jsx(VL,{makeDefault:!0}),cn.jsx("hemisphereLight",{intensity:n}),cn.jsx(nW,{})]})}function Sq(){var n=JL(Zm);return cn.jsx(cn.Fragment,{children:cn.jsx("div",{style:{position:"absolute",bottom:120,left:120,fontSize:"18px"},children:cn.jsx("div",{style:{position:"relative",marginTop:10,display:"inline-block"},children:cn.jsx("button",{style:{background:n.color},onClick:()=>Zm.showFuture=!Zm.showFuture,children:n.showFuture?"Future":"Present"})})})})}const wq=y_.createRoot(document.querySelector("#root"));function Eq(){const{active:n,progress:e,errors:t,item:r,loaded:i,total:s}=X6();return cn.jsxs("div",{children:[e," % loaded"]})}function Mq(){const{background:n}=OD({background:"#ff0000"});return cn.jsxs("div",{style:{background:n,height:"100%"},children:[cn.jsxs(D.Suspense,{fallback:cn.jsx(Eq,{}),children:[jL.forEach(({name:e})=>{C0.preload(e+".fbx")}),cn.jsx(DD,{collapsed:!0}),cn.jsx(j6,{gl:{antialias:!0,toneMapping:f0,outputColorSpace:vt},camera:{fov:45,near:.1,far:1e3,position:[30,30,15]},children:cn.jsx(xq,{})})]}),cn.jsx(Sq,{})]})}wq.render(cn.jsx(Mq,{}));
//# sourceMappingURL=index-f70677c9.js.map
